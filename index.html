<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tribunal Superior Eleitoral - TSE RP</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
    <style>
        /* RESET E VARIÁVEIS */
        :root {
            --primary-bg: #F5F7FA;
            --secondary-bg: #FFFFFF;
            --text-primary: #1F2937;
            --text-secondary: #6B7280;
            --green: #0F9D58;
            --blue: #1A73E8;
            --dark-blue: #0B1F33;
            --border-color: #E5E7EB;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.06);
            --shadow-hover: 0 15px 40px rgba(0, 0, 0, 0.1);
            --radius: 16px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            line-height: 1.3;
            margin-bottom: 1rem;
        }

        .container {
            width: 100%;
            max-width: 1320px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* HEADER */
        .header {
            background-color: var(--secondary-bg);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 16px 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .logo {
            width: 60px;
            height: 60px;
            background-color: var(--dark-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            margin-bottom: 4px;
            color: var(--dark-blue);
        }

        .logo-text p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .nav {
            display: flex;
            gap: 24px;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            font-size: 1.05rem;
            padding: 8px 0;
            position: relative;
            transition: var(--transition);
        }

        .nav-link:hover {
            color: var(--blue);
        }

        .nav-link.active {
            color: var(--blue);
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--blue);
            border-radius: 2px;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-primary);
            cursor: pointer;
        }

        /* HERO SECTION */
        .hero {
            padding: 80px 0;
            background: linear-gradient(135deg, var(--dark-blue) 0%, #1a365d 100%);
            color: white;
            border-radius: 0 0 var(--radius) var(--radius);
            margin-bottom: 48px;
        }

        .hero-content {
            max-width: 800px;
            text-align: center;
            margin: 0 auto;
        }

        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: white;
        }

        .hero p {
            font-size: 1.25rem;
            opacity: 0.9;
            margin-bottom: 32px;
        }

        .hero-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* BUTTONS */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 28px;
            border-radius: 12px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1.05rem;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            height: 52px;
            min-width: 140px;
        }

        .btn-primary {
            background-color: var(--blue);
            color: white;
        }

        .btn-primary:hover {
            background-color: #0d62d9;
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .btn-secondary {
            background-color: transparent;
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        .btn-success {
            background-color: var(--green);
            color: white;
        }

        .btn-success:hover {
            background-color: #0d8c4d;
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .btn-outline {
            background-color: transparent;
            color: var(--blue);
            border: 2px solid var(--blue);
        }

        .btn-outline:hover {
            background-color: rgba(26, 115, 232, 0.05);
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        /* CARDS */
        .card {
            background-color: var(--secondary-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 32px;
            margin-bottom: 32px;
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .card:hover {
            box-shadow: var(--shadow-hover);
            transform: translateY(-4px);
        }

        .card-title {
            font-size: 1.5rem;
            margin-bottom: 16px;
            color: var(--dark-blue);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background-color: rgba(26, 115, 232, 0.1);
            color: var(--blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        /* ELECTION TYPE SELECTOR */
        .election-type-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin: 40px 0;
        }

        .election-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 40px 24px;
            border-radius: var(--radius);
            background-color: var(--secondary-bg);
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 2px solid transparent;
            cursor: pointer;
        }

        .election-card:hover {
            box-shadow: var(--shadow-hover);
            transform: translateY(-8px);
            border-color: var(--blue);
        }

        .election-card.selected {
            border-color: var(--blue);
            background-color: rgba(26, 115, 232, 0.03);
        }

        .election-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: rgba(26, 115, 232, 0.1);
            color: var(--blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .election-card h3 {
            font-size: 1.5rem;
            margin-bottom: 12px;
        }

        .election-card p {
            color: var(--text-secondary);
            margin-bottom: 24px;
        }

        /* FORM STYLES */
        .form-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .form-step {
            display: none;
        }

        .form-step.active {
            display: block;
        }

        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 32px;
        }

        .step-number {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: var(--blue);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.25rem;
            margin-right: 16px;
        }

        .step-info h3 {
            margin-bottom: 4px;
        }

        .step-info p {
            color: var(--text-secondary);
        }

        .form-group {
            margin-bottom: 28px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 1.05rem;
            color: var(--text-primary);
        }

        .form-control {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-family: 'Inter', sans-serif;
            font-size: 1.05rem;
            transition: var(--transition);
            background-color: white;
            color: var(--text-primary);
            height: 56px;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--blue);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }

        .form-control:disabled {
            background-color: #f9fafb;
            cursor: not-allowed;
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 20px center;
            background-size: 20px;
            padding-right: 60px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
        }

        .form-help {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        .form-error {
            color: #dc2626;
            font-size: 0.9rem;
            margin-top: 8px;
            display: none;
        }

        .form-error.show {
            display: block;
        }

        /* PARTY SELECTOR */
        .party-selector {
            margin-bottom: 32px;
    }

        .party-category {
            margin-bottom: 32px;
        }

        .party-category h4 {
            font-size: 1.25rem;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--border-color);
            color: var(--dark-blue);
        }

        .party-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .party-btn {
            padding: 12px 20px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            background-color: white;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            flex: 1;
            min-width: 180px;
            text-align: left;
        }

        .party-btn:hover {
            border-color: var(--blue);
            background-color: rgba(26, 115, 232, 0.03);
        }

        .party-btn.selected {
            border-color: var(--blue);
            background-color: rgba(26, 115, 232, 0.1);
            color: var(--blue);
            font-weight: 600;
        }

        /* NUMBER INPUT */
        .number-input-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .number-part {
            width: 80px;
            text-align: center;
            font-weight: 700;
            color: var(--blue);
            font-size: 1.2rem;
        }

        .number-input {
            display: flex;
            gap: 8px;
        }

        .number-digit {
            width: 70px;
            height: 70px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            text-align: center;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            transition: var(--transition);
        }

        .number-digit:focus {
            outline: none;
            border-color: var(--blue);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }

        .number-digit.fixed {
            background-color: #f9fafb;
            color: var(--blue);
            border-color: rgba(26, 115, 232, 0.3);
        }

        /* STEPPER NAVIGATION */
        .stepper-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 48px;
            padding-top: 32px;
            border-top: 1px solid var(--border-color);
        }

        /* CANDIDATE LISTING */
        .candidate-filters {
            background-color: var(--secondary-bg);
            border-radius: var(--radius);
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: var(--shadow);
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .filter-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .search-box {
            position: relative;
            flex-grow: 1;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: 14px 20px 14px 50px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-family: 'Inter', sans-serif;
            font-size: 1.05rem;
            transition: var(--transition);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--blue);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        .candidate-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 24px;
            margin-bottom: 48px;
        }

        .candidate-card {
            background-color: var(--secondary-bg);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid var(--border-color);
            height: 100%;
        }

        .candidate-card:hover {
            box-shadow: var(--shadow-hover);
            transform: translateY(-4px);
        }

        .candidate-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-color);
            background-color: rgba(11, 31, 51, 0.03);
        }

        .candidate-number {
            display: inline-block;
            background-color: var(--dark-blue);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 12px;
        }

        .candidate-name {
            font-size: 1.4rem;
            margin-bottom: 8px;
            color: var(--dark-blue);
        }

        .candidate-party {
            font-weight: 600;
            color: var(--blue);
            font-size: 1.1rem;
        }

        .candidate-body {
            padding: 24px;
        }

        .candidate-info {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .candidate-info-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .candidate-info-icon {
            color: var(--blue);
            width: 24px;
        }

        /* ADMIN LOGIN */
        .admin-login-container {
            max-width: 500px;
            margin: 80px auto;
        }

        .admin-login-card {
            background-color: var(--secondary-bg);
            border-radius: var(--radius);
            padding: 48px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .admin-logo {
            width: 80px;
            height: 80px;
            background-color: var(--dark-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            margin: 0 auto 24px;
        }

        .admin-login-card h2 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            color: var(--dark-blue);
        }

        .admin-login-card p {
            color: var(--text-secondary);
            margin-bottom: 32px;
        }

        /* ADMIN PANEL */
        .admin-header {
            background-color: var(--dark-blue);
            color: white;
            padding: 24px 0;
            margin-bottom: 40px;
        }

        .admin-header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .admin-avatar {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .admin-details h3 {
            color: white;
            margin-bottom: 4px;
        }

        .admin-details p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .stat-card {
            background-color: var(--secondary-bg);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .stat-content h4 {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark-blue);
        }

        .admin-tabs {
            display: flex;
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 32px;
            overflow-x: auto;
        }

        .admin-tab {
            padding: 16px 24px;
            font-weight: 600;
            color: var(--text-secondary);
            border-bottom: 3px solid transparent;
            cursor: pointer;
            white-space: nowrap;
            transition: var(--transition);
        }

        .admin-tab:hover {
            color: var(--blue);
        }

        .admin-tab.active {
            color: var(--blue);
            border-bottom-color: var(--blue);
        }

        .admin-tab-content {
            display: none;
        }

        .admin-tab-content.active {
            display: block;
        }

        /* FOOTER */
        .footer {
            background-color: var(--dark-blue);
            color: white;
            padding: 60px 0 30px;
            margin-top: 80px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-section h4 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: white;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        .footer-warning {
            background-color: rgba(255, 255, 255, 0.05);
            padding: 12px 20px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            font-size: 0.9rem;
        }

        /* LOADING STATES */
        .loading {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 4px;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1100;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: var(--secondary-bg);
            border-radius: var(--radius);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            animation: modalAppear 0.3s ease-out;
        }

        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin-bottom: 0;
            color: var(--dark-blue);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--text-primary);
        }

        .modal-body {
            padding: 24px;
        }

        .modal-footer {
            padding: 24px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        /* UTILITIES */
        .text-center {
            text-align: center;
        }

        .text-success {
            color: var(--green);
        }

        .text-danger {
            color: #dc2626;
        }

        .mb-4 {
            margin-bottom: 24px;
        }

        .mt-4 {
            margin-top: 24px;
        }

        .mb-8 {
            margin-bottom: 48px;
        }

        .d-none {
            display: none !important;
        }

        .d-flex {
            display: flex !important;
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 992px) {
            .container {
                padding: 0 20px;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .candidate-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .nav {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background-color: var(--secondary-bg);
                flex-direction: column;
                padding: 20px;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
                border-radius: 0 0 var(--radius) var(--radius);
            }
            
            .nav.active {
                display: flex;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .hero-buttons .btn {
                width: 100%;
                max-width: 300px;
            }
            
            .stepper-navigation {
                flex-direction: column;
                gap: 16px;
            }
            
            .stepper-navigation .btn {
                width: 100%;
            }
            
            .admin-header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }
            
            .admin-stats {
                grid-template-columns: 1fr;
            }
            
            .filter-actions {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                max-width: 100%;
            }
        }

        @media (max-width: 576px) {
            .hero {
                padding: 60px 0;
            }
            
            .hero h2 {
                font-size: 1.75rem;
            }
            
            .card {
                padding: 24px;
            }
            
            .number-input {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .number-digit {
                width: 60px;
                height: 60px;
            }
            
            .candidate-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-login-card {
                padding: 32px 24px;
            }
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-container">
                    <div class="logo">
                        <i class="fas fa-vote-yea"></i>
                    </div>
                    <div class="logo-text">
                        <h1>Tribunal Superior Eleitoral</h1>
                        <p>Garantindo a democracia no Roleplay</p>
                    </div>
                </div>
                
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                
                <nav class="nav" id="mainNav">
                    <a href="#home" class="nav-link active">Início</a>
                    <a href="#candidatar" class="nav-link">Candidatar-se</a>
                    <a href="#candidatos" class="nav-link">Candidatos</a>
                    <a href="#sobre" class="nav-link">Sobre</a>
                    <a href="#admin-login" class="nav-link">Área Admin</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main>
        <!-- HOME SECTION -->
        <section id="home" class="hero">
            <div class="container">
                <div class="hero-content">
                    <h2>Bem-vindo ao Portal Oficial do TSE RP</h2>
                    <p>Sistema oficial para registro e gerenciamento de candidaturas eleitorais em ambientes de Roleplay. Garantimos transparência, segurança e democracia digital.</p>
                    <div class="hero-buttons">
                        <a href="#candidatar" class="btn btn-primary">
                            <i class="fas fa-user-plus"></i> Candidatar-se
                        </a>
                        <a href="#candidatos" class="btn btn-secondary">
                            <i class="fas fa-list"></i> Ver Candidatos
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- ELECTION TYPE SELECTION -->
        <section id="candidatar" class="container" style="display: none;">
            <div class="card">
                <div class="card-title">
                    <div class="card-icon">
                        <i class="fas fa-flag"></i>
                    </div>
                    <h2>Selecione o Tipo de Eleição</h2>
                </div>
                <p class="mb-8">Escolha abaixo o tipo de eleição para a qual deseja se candidatar. As regras e requisitos variam conforme o cargo.</p>
                
                <div class="election-type-selector">
                    <div class="election-card" data-election-type="municipal">
                        <div class="election-icon">
                            <i class="fas fa-city"></i>
                        </div>
                        <h3>Eleição Municipal</h3>
                        <p>Para cargos de Prefeito e Vereador em cidades específicas dos estados.</p>
                        <div class="btn btn-outline mt-4">Selecionar</div>
                    </div>
                    
                    <div class="election-card" data-election-type="federal">
                        <div class="election-icon">
                            <i class="fas fa-landmark"></i>
                        </div>
                        <h3>Eleição Federal</h3>
                        <p>Para cargos de Presidente, Governador, Senador e Deputados (Federal e Estadual).</p>
                        <div class="btn btn-outline mt-4">Selecionar</div>
                    </div>
                </div>
            </div>
            
            <!-- FORM STEPS -->
            <div class="form-container" id="candidacyForm" style="display: none;">
                <!-- STEP 1: PERSONAL INFO -->
                <div class="form-step active" id="step1">
                    <div class="step-header">
                        <div class="step-number">1</div>
                        <div class="step-info">
                            <h3>Informações Pessoais</h3>
                            <p>Preencha seus dados pessoais para identificação</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="fullName">Nome Completo *</label>
                                <input type="text" id="fullName" class="form-control" placeholder="Digite seu nome completo">
                                <div class="form-error" id="fullNameError">Nome completo é obrigatório</div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="nickname">Nome Público (RP) *</label>
                                <input type="text" id="nickname" class="form-control" placeholder="Como será divulgado na campanha">
                                <div class="form-error" id="nicknameError">Nome público é obrigatório e deve ser único</div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="tiktok">Perfil do TikTok *</label>
                            <div class="input-group">
                                <input type="text" id="tiktok" class="form-control" placeholder="@seu_usuario">
                                <div class="form-help">Digite apenas o @ do usuário (ex: @usuario)</div>
                                <div class="form-error" id="tiktokError">Formato inválido ou usuário já cadastrado</div>
                            </div>
                        </div>
                        
                        <div class="stepper-navigation">
                            <button class="btn btn-outline" id="cancelForm">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                            <button class="btn btn-primary" id="nextStep1">
                                Próximo <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- STEP 2: ELECTION INFO -->
                <div class="form-step" id="step2">
                    <div class="step-header">
                        <div class="step-number">2</div>
                        <div class="step-info">
                            <h3>Informações da Eleição</h3>
                            <p>Selecione o cargo, estado e cidade (se aplicável)</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="form-group">
                            <label class="form-label" for="position">Cargo *</label>
                            <select id="position" class="form-control form-select">
                                <option value="">Selecione um cargo</option>
                                <!-- Options will be populated by JS based on election type -->
                            </select>
                            <div class="form-error" id="positionError">Selecione um cargo</div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group" id="stateGroup">
                                <label class="form-label" for="state">Estado *</label>
                                <select id="state" class="form-control form-select">
                                    <option value="">Selecione um estado</option>
                                    <option value="Brookhaven">Brookhaven</option>
                                    <option value="Novacore">Novacore</option>
                                    <option value="Casteríber">Casteríber</option>
                                    <option value="Fortemega">Fortemega</option>
                                    <option value="Florêmix">Florêmix</option>
                                    <option value="Brookasil" id="brookasilOption" style="display:none;">Brookasil (Nacional)</option>
                                </select>
                                <div class="form-error" id="stateError">Selecione um estado</div>
                            </div>
                            
                            <div class="form-group" id="cityGroup" style="display: none;">
                                <label class="form-label" for="city">Cidade *</label>
                                <select id="city" class="form-control form-select">
                                    <option value="">Selecione uma cidade</option>
                                    <!-- Cities will be populated by JS based on state -->
                                </select>
                                <div class="form-error" id="cityError">Selecione uma cidade</div>
                            </div>
                        </div>
                        
                        <div class="stepper-navigation">
                            <button class="btn btn-outline" id="prevStep2">
                                <i class="fas fa-arrow-left"></i> Voltar
                            </button>
                            <button class="btn btn-primary" id="nextStep2">
                                Próximo <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- STEP 3: PARTY AND NUMBER -->
                <div class="form-step" id="step3">
                    <div class="step-header">
                        <div class="step-number">3</div>
                        <div class="step-info">
                            <h3>Partido e Número Eleitoral</h3>
                            <p>Selecione seu partido político e número da urna</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="party-selector">
                            <div class="party-category">
                                <h4>Partidos de Direita</h4>
                                <div class="party-buttons" id="rightParties">
                                    <!-- Right parties will be populated by JS -->
                                </div>
                            </div>
                            
                            <div class="party-category">
                                <h4>Partidos de Centro</h4>
                                <div class="party-buttons" id="centerParties">
                                    <!-- Center parties will be populated by JS -->
                                </div>
                            </div>
                            
                            <div class="party-category">
                                <h4>Partidos de Esquerda</h4>
                                <div class="party-buttons" id="leftParties">
                                    <!-- Left parties will be populated by JS -->
                                </div>
                            </div>
                            
                            <div class="form-error" id="partyError">Selecione um partido</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Número Eleitoral *</label>
                            <div class="form-help" id="numberHelp">Os dois primeiros dígitos são do partido. Complete os dígitos restantes conforme o cargo.</div>
                            
                            <div class="number-input-container">
                                <div class="number-part" id="partyNumber">--</div>
                                <div class="number-input" id="numberInput">
                                    <!-- Digits will be generated by JS -->
                                </div>
                            </div>
                            
                            <div class="form-error" id="numberError">Número inválido ou já utilizado</div>
                        </div>
                        
                        <div class="stepper-navigation">
                            <button class="btn btn-outline" id="prevStep3">
                                <i class="fas fa-arrow-left"></i> Voltar
                            </button>
                            <button class="btn btn-primary" id="nextStep3">
                                Próximo <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- STEP 4: REVIEW -->
                <div class="form-step" id="step4">
                    <div class="step-header">
                        <div class="step-number">4</div>
                        <div class="step-info">
                            <h3>Revisão Final</h3>
                            <p>Confira todas as informações antes de enviar</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3 class="mb-4">Resumo da Candidatura</h3>
                        
                        <div class="candidate-card" style="transform: none; box-shadow: none; border: 1px solid var(--border-color);">
                            <div class="candidate-header">
                                <div class="candidate-number" id="reviewNumber">--</div>
                                <h3 class="candidate-name" id="reviewName">Nome do Candidato</h3>
                                <div class="candidate-party" id="reviewParty">Partido</div>
                            </div>
                            
                            <div class="candidate-body">
                                <div class="candidate-info">
                                    <div class="candidate-info-item">
                                        <i class="fas fa-user candidate-info-icon"></i>
                                        <div>
                                            <strong>Nome Real:</strong> <span id="reviewFullName">--</span>
                                        </div>
                                    </div>
                                    <div class="candidate-info-item">
                                        <i class="fab fa-tiktok candidate-info-icon"></i>
                                        <div>
                                            <strong>TikTok:</strong> <span id="reviewTiktok">--</span>
                                        </div>
                                    </div>
                                    <div class="candidate-info-item">
                                        <i class="fas fa-briefcase candidate-info-icon"></i>
                                        <div>
                                            <strong>Cargo:</strong> <span id="reviewPosition">--</span>
                                        </div>
                                    </div>
                                    <div class="candidate-info-item">
                                        <i class="fas fa-map-marker-alt candidate-info-icon"></i>
                                        <div>
                                            <strong>Localidade:</strong> <span id="reviewLocation">--</span>
                                        </div>
                                    </div>
                                    <div class="candidate-info-item">
                                        <i class="fas fa-calendar-alt candidate-info-icon"></i>
                                        <div>
                                            <strong>Data de Registro:</strong> <span id="reviewDate">--</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <div class="form-check">
                                <input type="checkbox" id="confirmInfo" class="form-check-input">
                                <label for="confirmInfo" class="form-check-label">
                                    Declaro que todas as informações fornecidas são verdadeiras e estou ciente das regras eleitorais do TSE RP.
                                </label>
                            </div>
                            <div class="form-error" id="confirmError">Você precisa confirmar as informações</div>
                        </div>
                        
                        <div class="stepper-navigation">
                            <button class="btn btn-outline" id="prevStep4">
                                <i class="fas fa-arrow-left"></i> Voltar
                            </button>
                            <button class="btn btn-success" id="submitCandidacy">
                                <i class="fas fa-paper-plane"></i> Enviar Candidatura
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CANDIDATES LISTING -->
        <section id="candidatos" class="container" style="display: none;">
            <div class="card">
                <div class="card-title">
                    <div class="card-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h2>Candidatos Registrados</h2>
                </div>
                <p class="mb-8">Consulte abaixo a lista de candidatos registrados para as eleições. Utilize os filtros para buscar informações específicas.</p>
                
                <div class="candidate-filters">
                    <div class="filter-row">
                        <div class="form-group">
                            <label class="form-label" for="filterPosition">Cargo</label>
                            <select id="filterPosition" class="form-control form-select">
                                <option value="">Todos os cargos</option>
                                <option value="Prefeito">Prefeito</option>
                                <option value="Vereador">Vereador</option>
                                <option value="Presidente">Presidente</option>
                                <option value="Governador">Governador</option>
                                <option value="Senador">Senador</option>
                                <option value="Deputado Federal">Deputado Federal</option>
                                <option value="Deputado Estadual">Deputado Estadual</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="filterState">Estado</label>
                            <select id="filterState" class="form-control form-select">
                                <option value="">Todos os estados</option>
                                <option value="Brookhaven">Brookhaven</option>
                                <option value="Novacore">Novacore</option>
                                <option value="Casteríber">Casteríber</option>
                                <option value="Fortemega">Fortemega</option>
                                <option value="Florêmix">Florêmix</option>
                                <option value="Brookasil">Brookasil</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="filterParty">Partido</label>
                            <select id="filterParty" class="form-control form-select">
                                <option value="">Todos os partidos</option>
                                <!-- Parties will be populated by JS -->
                            </select>
                        </div>
                    </div>
                    
                    <div class="filter-actions">
                        <div class="search-box">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" id="searchInput" class="search-input" placeholder="Buscar por nome, número ou TikTok...">
                        </div>
                        
                        <div>
                            <button class="btn btn-outline" id="resetFilters">
                                <i class="fas fa-redo"></i> Limpar Filtros
                            </button>
                        </div>
                    </div>
                </div>
                
                <div id="candidateList">
                    <div class="candidate-grid" id="candidateGrid">
                        <!-- Candidate cards will be populated by JS -->
                    </div>
                    
                    <div class="text-center" id="noCandidates" style="display: none;">
                        <div class="card">
                            <i class="fas fa-users" style="font-size: 4rem; color: var(--border-color); margin-bottom: 20px;"></i>
                            <h3>Nenhum candidato encontrado</h3>
                            <p>Não há candidatos registrados com os filtros aplicados.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ABOUT SECTION -->
        <section id="sobre" class="container" style="display: none;">
            <div class="card">
                <div class="card-title">
                    <div class="card-icon">
                        <i class="fas fa-info-circle"></i>
                    </div>
                    <h2>Sobre o TSE RP</h2>
                </div>
                
                <div class="mb-8">
                    <h3 class="mb-4">Missão Institucional</h3>
                    <p>O Tribunal Superior Eleitoral - Roleplay (TSE RP) é uma instituição fictícia criada para organizar, gerenciar e garantir a transparência de processos eleitorais em ambientes de Roleplay. Nossa missão é proporcionar uma experiência democrática digital realista, segura e acessível a todos os participantes.</p>
                </div>
                
                <div class="mb-8">
                    <h3 class="mb-4">Estrutura Organizacional</h3>
                    <p>O TSE RP é composto por uma estrutura hierárquica que inclui:</p>
                    <ul style="padding-left: 24px; margin-top: 12px;">
                        <li><strong>TSE Nacional:</strong> Com jurisdição sobre todo o território do Brookasil</li>
                        <li><strong>TREs Estaduais:</strong> Com autonomia administrativa em seus respectivos estados</li>
                        <li><strong>Equipe Técnica:</strong> Responsável pelo desenvolvimento e manutenção do sistema</li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="mb-4">Princípios Fundamentais</h3>
                    <div class="election-type-selector" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                        <div class="election-card" style="cursor: default;">
                            <div class="election-icon" style="background-color: rgba(15, 157, 88, 0.1); color: var(--green);">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <h3>Segurança</h3>
                            <p>Todas as candidaturas passam por rigorosas validações para garantir a integridade do processo eleitoral.</p>
                        </div>
                        
                        <div class="election-card" style="cursor: default;">
                            <div class="election-icon" style="background-color: rgba(26, 115, 232, 0.1); color: var(--blue);">
                                <i class="fas fa-balance-scale"></i>
                            </div>
                            <h3>Transparência</h3>
                            <p>Todas as informações são públicas e auditáveis, garantindo a confiança no sistema eleitoral.</p>
                        </div>
                        
                        <div class="election-card" style="cursor: default;">
                            <div class="election-icon" style="background-color: rgba(11, 31, 51, 0.1); color: var(--dark-blue);">
                                <i class="fas fa-universal-access"></i>
                            </div>
                            <h3>Acessibilidade</h3>
                            <p>Sistema desenvolvido para ser acessível a todos, seguindo as melhores práticas de UX e design inclusivo.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ADMIN LOGIN -->
        <section id="admin-login" class="container" style="display: none;">
            <div class="admin-login-container">
                <div class="admin-login-card">
                    <div class="admin-logo">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <h2>Área Administrativa</h2>
                    <p>Faça login para acessar o painel de administração do TSE RP</p>
                    
                    <form id="adminLoginForm">
                        <div class="form-group">
                            <label class="form-label" for="adminState">Órgão Administrativo *</label>
                            <select id="adminState" class="form-control form-select" required>
                                <option value="">Selecione seu órgão</option>
                                <option value="TSE">TSE Nacional (Brookasil)</option>
                                <option value="TRE_Brookhaven">TRE Brookhaven</option>
                                <option value="TRE_Novacore">TRE Novacore</option>
                                <option value="TRE_Casteríber">TRE Casteríber</option>
                                <option value="TRE_Fortemega">TRE Fortemega</option>
                                <option value="TRE_Florêmix">TRE Florêmix</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="adminPassword">Senha *</label>
                            <input type="password" id="adminPassword" class="form-control" placeholder="Digite sua senha" required>
                            <div class="form-error" id="adminLoginError">Credenciais inválidas</div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-block mt-4" id="adminLoginBtn">
                            <i class="fas fa-sign-in-alt"></i> Entrar
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- ADMIN PANEL -->
        <section id="admin-panel" class="container" style="display: none;">
            <div class="admin-header">
                <div class="container">
                    <div class="admin-header-content">
                        <div class="admin-info">
                            <div class="admin-avatar">
                                <i class="fas fa-user-cog"></i>
                            </div>
                            <div class="admin-details">
                                <h3 id="adminOrg">TSE Nacional</h3>
                                <p id="adminJurisdiction">Jurisdição: Brookasil</p>
                            </div>
                        </div>
                        
                        <button class="btn btn-outline" id="adminLogout" style="border-color: rgba(255,255,255,0.3); color: white;">
                            <i class="fas fa-sign-out-alt"></i> Sair
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="container">
                <div class="admin-stats">
                    <div class="stat-card">
                        <div class="stat-icon" style="background-color: rgba(26, 115, 232, 0.1); color: var(--blue);">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <div class="stat-content">
                            <h4>Candidatos Totais</h4>
                            <div class="stat-number" id="totalCandidates">0</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background-color: rgba(15, 157, 88, 0.1); color: var(--green);">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h4>Candidaturas Aprovadas</h4>
                            <div class="stat-number" id="approvedCandidates">0</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background-color: rgba(220, 38, 38, 0.1); color: #dc2626;">
                            <i class="fas fa-times-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h4>Candidaturas Pendentes</h4>
                            <div class="stat-number" id="pendingCandidates">0</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background-color: rgba(107, 114, 128, 0.1); color: var(--text-secondary);">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <div class="stat-content">
                            <h4>Logs do Sistema</h4>
                            <div class="stat-number" id="totalLogs">0</div>
                        </div>
                    </div>
                </div>
                
                <div class="admin-tabs">
                    <div class="admin-tab active" data-tab="candidacies">
                        <i class="fas fa-list"></i> Gerenciar Candidaturas
                    </div>
                    <div class="admin-tab" data-tab="approvals">
                        <i class="fas fa-check-double"></i> Aprovações Pendentes
                    </div>
                    <div class="admin-tab" data-tab="logs">
                        <i class="fas fa-history"></i> Logs do Sistema
                    </div>
                    <div class="admin-tab" data-tab="elections" id="electionsTab" style="display: none;">
                        <i class="fas fa-vote-yea"></i> Gerenciar Eleições
                    </div>
                </div>
                
                <!-- CANDIDACIES TAB -->
                <div class="admin-tab-content active" id="candidaciesTab">
                    <div class="card">
                        <h3 class="mb-4">Todas as Candidaturas</h3>
                        <div id="adminCandidateList">
                            <!-- Admin candidate list will be populated by JS -->
                        </div>
                    </div>
                </div>
                
                <!-- APPROVALS TAB -->
                <div class="admin-tab-content" id="approvalsTab">
                    <div class="card">
                        <h3 class="mb-4">Candidaturas Pendentes de Aprovação</h3>
                        <div id="pendingApprovalsList">
                            <!-- Pending approvals will be populated by JS -->
                        </div>
                    </div>
                </div>
                
                <!-- LOGS TAB -->
                <div class="admin-tab-content" id="logsTab">
                    <div class="card">
                        <h3 class="mb-4">Registro de Atividades</h3>
                        <div id="adminLogsList">
                            <!-- Logs will be populated by JS -->
                        </div>
                    </div>
                </div>
                
                <!-- ELECTIONS TAB -->
                <div class="admin-tab-content" id="electionsTabContent">
                    <div class="card">
                        <h3 class="mb-4">Gerenciamento de Eleições</h3>
                        <p class="mb-8">Esta funcionalidade está disponível apenas para o TSE Nacional.</p>
                        <!-- Election management interface would go here -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Tribunal Superior Eleitoral RP</h4>
                    <p>Garantindo a democracia no Roleplay desde 2023. Sistema oficial para organização de eleições em ambientes de RP.</p>
                </div>
                
                <div class="footer-section">
                    <h4>Links Rápidos</h4>
                    <ul class="footer-links">
                        <li><a href="#home">Início</a></li>
                        <li><a href="#candidatar">Candidatar-se</a></li>
                        <li><a href="#candidatos">Ver Candidatos</a></li>
                        <li><a href="#sobre">Sobre o TSE RP</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Contato Institucional</h4>
                    <ul class="footer-links">
                        <li><i class="fas fa-envelope"></i> contato@tse-rp.gov.br</li>
                        <li><i class="fas fa-phone"></i> (61) 3030-3030</li>
                        <li><i class="fas fa-map-marker-alt"></i> Brookasil, DF</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-warning">
                <i class="fas fa-exclamation-triangle"></i> 
                <strong>AVISO IMPORTANTE:</strong> Este portal é fictício e destinado exclusivamente a Roleplay. Não possui qualquer vínculo com órgãos governamentais reais.
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2023 Tribunal Superior Eleitoral - TSE RP. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- MODALS -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Candidatura Registrada com Sucesso!</h3>
                <button class="modal-close" id="closeSuccessModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="text-center">
                    <div style="width: 100px; height: 100px; background-color: rgba(15, 157, 88, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px;">
                        <i class="fas fa-check" style="font-size: 48px; color: var(--green);"></i>
                    </div>
                    <h3 class="mb-4">Sua candidatura foi registrada no sistema TSE RP</h3>
                    <p class="mb-4">Agora sua candidatura passará pelo processo de aprovação do Tribunal Eleitoral correspondente. Você será notificado quando houver uma atualização no status.</p>
                    <p><strong>Número de protocolo:</strong> <span id="protocolNumber">TSE-2023-0001</span></p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="successModalOk">OK</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="errorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Erro no Processamento</h3>
                <button class="modal-close" id="closeErrorModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="text-center">
                    <div style="width: 100px; height: 100px; background-color: rgba(220, 38, 38, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px;">
                        <i class="fas fa-times" style="font-size: 48px; color: #dc2626;"></i>
                    </div>
                    <h3 class="mb-4" id="errorTitle">Ocorreu um erro</h3>
                    <p class="mb-4" id="errorMessage">Não foi possível processar sua solicitação. Tente novamente mais tarde.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="errorModalOk">OK</button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="adminActionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="adminActionTitle">Aprovar Candidatura</h3>
                <button class="modal-close" id="closeAdminActionModal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="adminActionMessage">Você está prestes a aprovar a candidatura de <strong id="candidateNameAction">[Nome]</strong>. Esta ação será registrada nos logs do sistema.</p>
                
                <div class="form-group mt-4">
                    <label class="form-label" for="adminActionReason">Motivo (opcional)</label>
                    <textarea id="adminActionReason" class="form-control" rows="3" placeholder="Digite o motivo da ação, se necessário"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelAdminAction">Cancelar</button>
                <button class="btn btn-success" id="confirmAdminAction">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- FIREBASE CONFIGURATION -->
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAwFLV5X9ICB3mvU4WU1ihxGUeG9UsrbtQ",
            authDomain: "candidatura-cde.firebaseapp.com",
            databaseURL: "https://candidatura-cde-default-rtdb.firebaseio.com",
            projectId: "candidatura-cde",
            storageBucket: "candidatura-cde.firebasestorage.app",
            messagingSenderId: "958958180950",
            appId: "1:958958180950:web:51427276d0a83978fdb9f7"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();
        const storage = firebase.storage();

        // Partidos políticos fixos
        const partidosMap = {
            Direita: [
                "PL (22)", "PP (11)", "Republicanos (10)", "PRTN (75)", "Patriota (51)",
                "PRTB (28)", "NOVO (30)", "PMB (35)", "DC (27)", "UDB (38)", "Agir (36)",
                "POL (81)", "ACN (84)", "PRONA (57)", "PDC (17)", "PESP (48)", "PMNL (86)"
            ],
            Centro: [
                "MDB (15)", "UNIÃO (44)", "PSD (55)", "Podemos (20)", "PSDB (45)",
                "CDN (23)", "Solidariedade (77)", "Avante (70)", "PMN (33)",
                "PV (43)", "PUN (42)", "MPD (37)", "PDM (26)", "MTB (63)",
                "PTD (46)", "PDSD (88)", "MSS (14)", "PC (85)"
            ],
            Esquerda: [
                "PT (13)", "PSOL (50)", "PCdoB (65)", "Rede (18)", "PDT (12)",
                "UP (80)", "PCO (29)", "PCB (21)", "PSTU (16)", "PPL (54)",
                "PSB (40)", "PFS (60)", "PS (56)", "PSTN (31)"
            ]
        };

        // Estados e cidades
        const estadosCidades = {
            "Brookhaven": ["Cidade Eleitoral", "Liberty City"],
            "Novacore": ["Nexaville"],
            "Casteríber": ["Castelo Verde"],
            "Fortemega": ["Marinha City"],
            "Florêmix": ["Florápolis"]
        };

        // Configuração de cargos por tipo de eleição
        const cargosPorEleicao = {
            "municipal": ["Prefeito", "Vereador"],
            "federal": ["Presidente", "Governador", "Senador", "Deputado Federal", "Deputado Estadual"]
        };

        // Configuração de dígitos por cargo
        const digitosPorCargo = {
            "Presidente": 2,
            "Governador": 2,
            "Senador": 3,
            "Deputado Federal": 4,
            "Deputado Estadual": 5,
            "Prefeito": 2,
            "Vereador": 5
        };

        // Limites de vagas por estado
        const limitesVagas = {
            "Prefeito": 10,
            "Vereador": 20,
            "Presidente": 8,
            "Governador": 8,
            "Senador": 18,
            "Deputado Federal": 18,
            "Deputado Estadual": 18
        };

        // Credenciais administrativas iniciais (em produção, isso seria no backend)
        const adminCredentials = {
            "TSE": { password: "Brookasil1234", jurisdiction: "Brookasil", org: "TSE Nacional" },
            "TRE_Brookhaven": { password: "tutuBH", jurisdiction: "Brookhaven", org: "TRE Brookhaven" },
            "TRE_Novacore": { password: "williamNC", jurisdiction: "Novacore", org: "TRE Novacore" },
            "TRE_Casteríber": { password: "henriqueCB", jurisdiction: "Casteríber", org: "TRE Casteríber" },
            "TRE_Fortemega": { password: "lucasFM", jurisdiction: "Fortemega", org: "TRE Fortemega" },
            "TRE_Florêmix": { password: "popoFX", jurisdiction: "Florêmix", org: "TRE Florêmix" }
        };

        // Estado da aplicação
        let currentState = {
            currentSection: "home",
            electionType: null,
            currentStep: 1,
            selectedParty: null,
            selectedPartyNumber: null,
            candidacyData: {},
            adminLoggedIn: false,
            adminData: null,
            candidates: [],
            filteredCandidates: []
        };

        // Inicialização da aplicação
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            loadCandidates();
        });

        function initializeApp() {
            // Configurar navegação
            setupNavigation();
            
            // Preencher partidos políticos
            populateParties();
            
            // Verificar autenticação admin
            checkAdminAuth();
        }

        function setupEventListeners() {
            // Menu mobile
            document.getElementById('mobileMenuBtn').addEventListener('click', toggleMobileMenu);
            
            // Navegação
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('href').substring(1);
                    showSection(section);
                    
                    // Fechar menu mobile se aberto
                    document.getElementById('mainNav').classList.remove('active');
                });
            });
            
            // Seleção de tipo de eleição
            document.querySelectorAll('.election-card').forEach(card => {
                card.addEventListener('click', function() {
                    const electionType = this.dataset.electionType;
                    selectElectionType(electionType);
                });
            });
            
            // Navegação do formulário
            document.getElementById('cancelForm').addEventListener('click', cancelForm);
            document.getElementById('nextStep1').addEventListener('click', validateStep1);
            document.getElementById('prevStep2').addEventListener('click', () => navigateStep(1));
            document.getElementById('nextStep2').addEventListener('click', validateStep2);
            document.getElementById('prevStep3').addEventListener('click', () => navigateStep(2));
            document.getElementById('nextStep3').addEventListener('click', validateStep3);
            document.getElementById('prevStep4').addEventListener('click', () => navigateStep(3));
            document.getElementById('submitCandidacy').addEventListener('click', submitCandidacy);
            
            // Filtros de candidatos
            document.getElementById('filterPosition').addEventListener('change', filterCandidates);
            document.getElementById('filterState').addEventListener('change', filterCandidates);
            document.getElementById('filterParty').addEventListener('change', filterCandidates);
            document.getElementById('searchInput').addEventListener('input', filterCandidates);
            document.getElementById('resetFilters').addEventListener('click', resetFilters);
            
            // Login admin
            document.getElementById('adminLoginForm').addEventListener('submit', adminLogin);
            document.getElementById('adminLogout').addEventListener('click', adminLogout);
            
            // Modais
            document.getElementById('closeSuccessModal').addEventListener('click', () => hideModal('successModal'));
            document.getElementById('successModalOk').addEventListener('click', () => hideModal('successModal'));
            document.getElementById('closeErrorModal').addEventListener('click', () => hideModal('errorModal'));
            document.getElementById('errorModalOk').addEventListener('click', () => hideModal('errorModal'));
            document.getElementById('closeAdminActionModal').addEventListener('click', () => hideModal('adminActionModal'));
            document.getElementById('cancelAdminAction').addEventListener('click', () => hideModal('adminActionModal'));
            
            // Abas do admin
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    switchAdminTab(tabId);
                });
            });
        }

        function setupNavigation() {
            // Verificar hash na URL
            const hash = window.location.hash.substring(1) || 'home';
            showSection(hash);
            
            // Atualizar link ativo
            document.querySelectorAll('.nav-link').forEach(link => {
                if (link.getAttribute('href') === `#${hash}`) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
        }

        function showSection(sectionId) {
            // Esconder todas as seções
            document.querySelectorAll('main > section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Esconder painel admin se visível
            document.getElementById('admin-panel').style.display = 'none';
            
            // Mostrar seção solicitada
            const section = document.getElementById(sectionId);
            if (section) {
                section.style.display = 'block';
                currentState.currentSection = sectionId;
                
                // Scroll para o topo
                window.scrollTo(0, 0);
            }
            
            // Atualizar navegação
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${sectionId}`) {
                    link.classList.add('active');
                }
            });
            
            // Se for a seção de candidatos, carregar lista
            if (sectionId === 'candidatos') {
                loadCandidates();
            }
            
            // Se for a seção admin e não estiver logado, mostrar login
            if (sectionId === 'admin-login' && currentState.adminLoggedIn) {
                showAdminPanel();
            }
        }

        function toggleMobileMenu() {
            document.getElementById('mainNav').classList.toggle('active');
        }

        function selectElectionType(type) {
            currentState.electionType = type;
            
            // Atualizar visual da seleção
            document.querySelectorAll('.election-card').forEach(card => {
                if (card.dataset.electionType === type) {
                    card.classList.add('selected');
                } else {
                    card.classList.remove('selected');
                }
            });
            
            // Mostrar formulário
            document.getElementById('candidacyForm').style.display = 'block';
            
            // Configurar opções de cargo
            const positionSelect = document.getElementById('position');
            positionSelect.innerHTML = '<option value="">Selecione um cargo</option>';
            
            cargosPorEleicao[type].forEach(cargo => {
                const option = document.createElement('option');
                option.value = cargo;
                option.textContent = cargo;
                positionSelect.appendChild(option);
            });
            
            // Configurar estado para Presidente
            positionSelect.addEventListener('change', function() {
                const cargo = this.value;
                const stateGroup = document.getElementById('stateGroup');
                const cityGroup = document.getElementById('cityGroup');
                const brookasilOption = document.getElementById('brookasilOption');
                
                if (cargo === 'Presidente') {
                    brookasilOption.style.display = 'block';
                    stateGroup.style.display = 'block';
                    cityGroup.style.display = 'none';
                } else if (cargo === 'Governador' || cargo === 'Senador' || cargo === 'Deputado Estadual') {
                    brookasilOption.style.display = 'none';
                    stateGroup.style.display = 'block';
                    cityGroup.style.display = 'none';
                } else if (cargo === 'Deputado Federal') {
                    brookasilOption.style.display = 'none';
                    stateGroup.style.display = 'block';
                    cityGroup.style.display = 'block';
                } else if (cargo === 'Prefeito' || cargo === 'Vereador') {
                    brookasilOption.style.display = 'none';
                    stateGroup.style.display = 'block';
                    cityGroup.style.display = 'block';
                }
            });
            
            // Configurar cidades baseadas no estado
            document.getElementById('state').addEventListener('change', function() {
                const estado = this.value;
                const citySelect = document.getElementById('city');
                const cargo = document.getElementById('position').value;
                
                citySelect.innerHTML = '<option value="">Selecione uma cidade</option>';
                
                // Mostrar/ocultar grupo de cidades
                if (estado && (cargo === 'Deputado Federal' || cargo === 'Prefeito' || cargo === 'Vereador')) {
                    document.getElementById('cityGroup').style.display = 'block';
                    
                    if (estadosCidades[estado]) {
                        estadosCidades[estado].forEach(cidade => {
                            const option = document.createElement('option');
                            option.value = cidade;
                            option.textContent = cidade;
                            citySelect.appendChild(option);
                        });
                    }
                } else {
                    document.getElementById('cityGroup').style.display = 'none';
                }
            });
            
            // Navegar para o primeiro passo
            navigateStep(1);
        }

        function populateParties() {
            // Preencher partidos no formulário
            populatePartyCategory('rightParties', partidosMap.Direita);
            populatePartyCategory('centerParties', partidosMap.Centro);
            populatePartyCategory('leftParties', partidosMap.Esquerda);
            
            // Preencher partidos no filtro
            const filterPartySelect = document.getElementById('filterParty');
            filterPartySelect.innerHTML = '<option value="">Todos os partidos</option>';
            
            // Adicionar todos os partidos ao filtro
            Object.values(partidosMap).forEach(categoria => {
                categoria.forEach(partido => {
                    const option = document.createElement('option');
                    option.value = partido;
                    option.textContent = partido;
                    filterPartySelect.appendChild(option);
                });
            });
        }

        function populatePartyCategory(containerId, parties) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            parties.forEach(partido => {
                const button = document.createElement('button');
                button.type = 'button';
                button.className = 'party-btn';
                button.textContent = partido;
                button.dataset.party = partido;
                
                button.addEventListener('click', function() {
                    // Remover seleção de outros botões
                    document.querySelectorAll('.party-btn').forEach(btn => {
                        btn.classList.remove('selected');
                    });
                    
                    // Selecionar este botão
                    this.classList.add('selected');
                    
                    // Extrair número do partido
                    const match = partido.match(/\((\d+)\)/);
                    if (match) {
                        currentState.selectedParty = partido;
                        currentState.selectedPartyNumber = match[1];
                        
                        // Atualizar número do partido
                        document.getElementById('partyNumber').textContent = currentState.selectedPartyNumber;
                        
                        // Configurar campos de número baseado no cargo
                        setupNumberInput();
                    }
                });
                
                container.appendChild(button);
            });
        }

        function setupNumberInput() {
            const cargo = document.getElementById('position').value;
            if (!cargo) return;
            
            const digitosNecessarios = digitosPorCargo[cargo];
            const digitosPartido = 2; // Sempre 2 dígitos para o partido
            const digitosUsuario = digitosNecessarios - digitosPartido;
            
            const container = document.getElementById('numberInput');
            container.innerHTML = '';
            
            // Adicionar dígitos do partido (fixos)
            for (let i = 0; i < digitosPartido; i++) {
                const digitElement = document.createElement('input');
                digitElement.type = 'text';
                digitElement.className = 'number-digit fixed';
                digitElement.maxLength = 1;
                digitElement.value = currentState.selectedPartyNumber.charAt(i) || '';
                digitElement.readOnly = true;
                container.appendChild(digitElement);
            }
            
            // Adicionar dígitos do usuário (editáveis)
            for (let i = 0; i < digitosUsuario; i++) {
                const digitElement = document.createElement('input');
                digitElement.type = 'text';
                digitElement.className = 'number-digit';
                digitElement.maxLength = 1;
                digitElement.dataset.index = i;
                
                digitElement.addEventListener('input', function() {
                    // Permitir apenas números
                    this.value = this.value.replace(/\D/g, '');
                    
                    // Mover para o próximo campo se preenchido
                    if (this.value && i < digitosUsuario - 1) {
                        const nextInput = container.querySelector(`.number-digit:not(.fixed)[data-index="${i + 1}"]`);
                        if (nextInput) nextInput.focus();
                    }
                    
                    // Validar número completo
                    validateNumber();
                });
                
                digitElement.addEventListener('keydown', function(e) {
                    // Navegação com setas e backspace
                    if (e.key === 'Backspace' && !this.value && i > 0) {
                        const prevInput = container.querySelector(`.number-digit:not(.fixed)[data-index="${i - 1}"]`);
                        if (prevInput) prevInput.focus();
                    }
                });
                
                container.appendChild(digitElement);
            }
            
            // Atualizar texto de ajuda
            let helpText = `Os dois primeiros dígitos são do partido. `;
            if (digitosUsuario === 0) {
                helpText += `Este cargo usa apenas o número do partido.`;
            } else if (digitosUsuario === 1) {
                helpText += `Digite ${digitosUsuario} dígito adicional.`;
            } else {
                helpText += `Digite ${digitosUsuario} dígitos adicionais.`;
            }
            
            document.getElementById('numberHelp').textContent = helpText;
        }

        function navigateStep(step) {
            // Esconder todos os passos
            document.querySelectorAll('.form-step').forEach(stepElement => {
                stepElement.classList.remove('active');
            });
            
            // Mostrar passo atual
            document.getElementById(`step${step}`).classList.add('active');
            currentState.currentStep = step;
            
            // Scroll para o topo do formulário
            document.getElementById('candidacyForm').scrollIntoView({ behavior: 'smooth' });
        }

        function validateStep1() {
            const fullName = document.getElementById('fullName').value.trim();
            const nickname = document.getElementById('nickname').value.trim();
            const tiktok = document.getElementById('tiktok').value.trim();
            
            let isValid = true;
            
            // Validar nome completo
            if (!fullName) {
                document.getElementById('fullNameError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('fullNameError').classList.remove('show');
            }
            
            // Validar nome público
            if (!nickname) {
                document.getElementById('nicknameError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('nicknameError').classList.remove('show');
            }
            
            // Validar TikTok
            const tiktokRegex = /^@?[a-zA-Z0-9._]{3,24}$/;
            if (!tiktok || !tiktokRegex.test(tiktok)) {
                document.getElementById('tiktokError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('tiktokError').classList.remove('show');
            }
            
            if (isValid) {
                // Salvar dados
                currentState.candidacyData.fullName = fullName;
                currentState.candidacyData.nickname = nickname;
                currentState.candidacyData.tiktok = tiktok.startsWith('@') ? tiktok : `@${tiktok}`;
                
                // Navegar para o próximo passo
                navigateStep(2);
            }
        }

        function validateStep2() {
            const position = document.getElementById('position').value;
            const state = document.getElementById('state').value;
            const city = document.getElementById('city').value;
            const cargo = document.getElementById('position').value;
            
            let isValid = true;
            
            // Validar cargo
            if (!position) {
                document.getElementById('positionError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('positionError').classList.remove('show');
            }
            
            // Validar estado
            if (!state) {
                document.getElementById('stateError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('stateError').classList.remove('show');
            }
            
            // Validar cidade (se aplicável)
            if ((cargo === 'Deputado Federal' || cargo === 'Prefeito' || cargo === 'Vereador') && !city) {
                document.getElementById('cityGroup').style.display = 'block';
                document.getElementById('cityError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('cityError').classList.remove('show');
            }
            
            if (isValid) {
                // Salvar dados
                currentState.candidacyData.position = position;
                currentState.candidacyData.state = state;
                currentState.candidacyData.city = city || '';
                
                // Navegar para o próximo passo
                navigateStep(3);
            }
        }

        function validateStep3() {
            const party = currentState.selectedParty;
            const numberValid = validateNumber();
            
            let isValid = true;
            
            // Validar partido
            if (!party) {
                document.getElementById('partyError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('partyError').classList.remove('show');
            }
            
            // Validar número
            if (!numberValid) {
                document.getElementById('numberError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('numberError').classList.remove('show');
            }
            
            if (isValid) {
                // Salvar dados
                currentState.candidacyData.party = party;
                
                // Navegar para o próximo passo
                navigateStep(4);
                
                // Atualizar revisão
                updateReview();
            }
        }

        function validateNumber() {
            const cargo = document.getElementById('position').value;
            if (!cargo || !currentState.selectedPartyNumber) return false;
            
            const digitosNecessarios = digitosPorCargo[cargo];
            const digitosPartido = 2;
            const digitosUsuario = digitosNecessarios - digitosPartido;
            
            // Coletar dígitos do usuário
            let userDigits = '';
            for (let i = 0; i < digitosUsuario; i++) {
                const input = document.querySelector(`.number-digit:not(.fixed)[data-index="${i}"]`);
                if (input) {
                    userDigits += input.value;
                }
            }
            
            // Verificar se todos os dígitos estão preenchidos
            if (userDigits.length !== digitosUsuario) {
                document.getElementById('numberError').textContent = `Preencha todos os ${digitosUsuario} dígitos necessários`;
                return false;
            }
            
            // Construir número completo
            const fullNumber = currentState.selectedPartyNumber + userDigits;
            currentState.candidacyData.number = fullNumber;
            
            // Verificar duplicatas (simulação - em produção, verificaria no Firebase)
            // Por enquanto, apenas validação básica
            if (fullNumber.length !== digitosNecessarios) {
                document.getElementById('numberError').textContent = `Número deve ter exatamente ${digitosNecessarios} dígitos`;
                return false;
            }
            
            document.getElementById('numberError').classList.remove('show');
            return true;
        }

        function updateReview() {
            // Atualizar dados na revisão
            document.getElementById('reviewName').textContent = currentState.candidacyData.nickname || '--';
            document.getElementById('reviewFullName').textContent = currentState.candidacyData.fullName || '--';
            document.getElementById('reviewTiktok').textContent = currentState.candidacyData.tiktok || '--';
            document.getElementById('reviewPosition').textContent = currentState.candidacyData.position || '--';
            document.getElementById('reviewParty').textContent = currentState.candidacyData.party || '--';
            document.getElementById('reviewNumber').textContent = currentState.candidacyData.number || '--';
            
            // Localidade
            let locationText = currentState.candidacyData.state || '';
            if (currentState.candidacyData.city) {
                locationText += ` - ${currentState.candidacyData.city}`;
            }
            document.getElementById('reviewLocation').textContent = locationText || '--';
            
            // Data atual
            const now = new Date();
            const dateStr = now.toLocaleDateString('pt-BR') + ' ' + now.toLocaleTimeString('pt-BR').substring(0, 5);
            document.getElementById('reviewDate').textContent = dateStr;
            
            // Número de protocolo simulando
            const protocolNum = 'TSE-' + now.getFullYear() + '-' + Math.floor(1000 + Math.random() * 9000);
            document.getElementById('protocolNumber').textContent = protocolNum;
        }

        function cancelForm() {
            if (confirm('Tem certeza que deseja cancelar? Todas as informações preenchidas serão perdidas.')) {
                // Resetar estado
                currentState.electionType = null;
                currentState.currentStep = 1;
                currentState.selectedParty = null;
                currentState.selectedPartyNumber = null;
                currentState.candidacyData = {};
                
                // Resetar UI
                document.querySelectorAll('.election-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                document.getElementById('candidacyForm').style.display = 'none';
                navigateStep(1);
                
                // Resetar formulário
                document.getElementById('fullName').value = '';
                document.getElementById('nickname').value = '';
                document.getElementById('tiktok').value = '';
                document.getElementById('position').value = '';
                document.getElementById('state').value = '';
                document.getElementById('city').value = '';
                document.getElementById('cityGroup').style.display = 'none';
                
                // Remover seleção de partidos
                document.querySelectorAll('.party-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                
                document.getElementById('partyNumber').textContent = '--';
                document.getElementById('numberInput').innerHTML = '';
                
                // Mostrar seção inicial
                showSection('home');
            }
        }

        function submitCandidacy() {
            // Verificar confirmação
            if (!document.getElementById('confirmInfo').checked) {
                document.getElementById('confirmError').classList.add('show');
                return;
            }
            
            document.getElementById('confirmError').classList.remove('show');
            
            // Simular envio para Firebase
            // Em produção, isso enviaria para o Firebase Realtime Database
            simulateCandidacySubmission();
        }

        function simulateCandidacySubmission() {
            // Mostrar loading
            const submitBtn = document.getElementById('submitCandidacy');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<div class="loading"></div> Enviando...';
            submitBtn.disabled = true;
            
            // Simular delay de rede
            setTimeout(() => {
                // Gerar ID único
                const candidacyId = 'candidate_' + Date.now();
                
                // Criar objeto de candidatura
                const candidacy = {
                    id: candidacyId,
                    fullName: currentState.candidacyData.fullName,
                    nickname: currentState.candidacyData.nickname,
                    tiktok: currentState.candidacyData.tiktok,
                    position: currentState.candidacyData.position,
                    state: currentState.candidacyData.state,
                    city: currentState.candidacyData.city || null,
                    party: currentState.candidacyData.party,
                    number: currentState.candidacyData.number,
                    status: 'pending', // pending, approved, rejected
                    submissionDate: new Date().toISOString(),
                    approvalDate: null,
                    approvedBy: null
                };
                
                // Em produção, salvaria no Firebase
                // database.ref('candidates/' + candidacyId).set(candidacy);
                
                // Também geraria um log
                // database.ref('logs/' + Date.now()).set({
                //     action: 'candidacy_submission',
                //     candidateId: candidacyId,
                //     candidateName: candidacy.nickname,
                //     timestamp: new Date().toISOString()
                // });
                
                // Adicionar à lista local
                currentState.candidates.push(candidacy);
                
                // Restaurar botão
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                
                // Mostrar modal de sucesso
                showModal('successModal');
                
                // Resetar formulário após sucesso
                setTimeout(() => {
                    cancelForm();
                }, 3000);
            }, 1500);
        }

        function loadCandidates() {
            // Em produção, carregaria do Firebase
            // Por enquanto, usar dados simulados
            
            // Se não houver candidatos, mostrar mensagem
            if (currentState.candidates.length === 0) {
                 
            }
            
            currentState.filteredCandidates = [...currentState.candidates];
            renderCandidates();
        }

        function renderCandidates() {
            const container = document.getElementById('candidateGrid');
            container.innerHTML = '';
            
            if (currentState.filteredCandidates.length === 0) {
                document.getElementById('noCandidates').style.display = 'block';
                return;
            }
            
            document.getElementById('noCandidates').style.display = 'none';
            
            currentState.filteredCandidates.forEach(candidate => {
                const card = document.createElement('div');
                card.className = 'candidate-card';
                
                // Status badge
                let statusBadge = '';
                if (candidate.status === 'approved') {
                    statusBadge = '<span style="position: absolute; top: 15px; right: 15px; background-color: var(--green); color: white; padding: 4px 10px; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">APROVADO</span>';
                } else if (candidate.status === 'pending') {
                    statusBadge = '<span style="position: absolute; top: 15px; right: 15px; background-color: #f59e0b; color: white; padding: 4px 10px; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">PENDENTE</span>';
                }
                
                // Localidade
                let location = candidate.state;
                if (candidate.city) {
                    location += ` - ${candidate.city}`;
                }
                
                card.innerHTML = `
                    ${statusBadge}
                    <div class="candidate-header">
                        <div class="candidate-number">${candidate.number}</div>
                        <h3 class="candidate-name">${candidate.nickname}</h3>
                        <div class="candidate-party">${candidate.party}</div>
                    </div>
                    <div class="candidate-body">
                        <div class="candidate-info">
                            <div class="candidate-info-item">
                                <i class="fas fa-briefcase candidate-info-icon"></i>
                                <div><strong>Cargo:</strong> ${candidate.position}</div>
                            </div>
                            <div class="candidate-info-item">
                                <i class="fas fa-map-marker-alt candidate-info-icon"></i>
                                <div><strong>Localidade:</strong> ${location}</div>
                            </div>
                            <div class="candidate-info-item">
                                <i class="fab fa-tiktok candidate-info-icon"></i>
                                <div><strong>TikTok:</strong> ${candidate.tiktok}</div>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        function filterCandidates() {
            const positionFilter = document.getElementById('filterPosition').value;
            const stateFilter = document.getElementById('filterState').value;
            const partyFilter = document.getElementById('filterParty').value;
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            currentState.filteredCandidates = currentState.candidates.filter(candidate => {
                // Filtrar por cargo
                if (positionFilter && candidate.position !== positionFilter) {
                    return false;
                }
                
                // Filtrar por estado
                if (stateFilter && candidate.state !== stateFilter) {
                    return false;
                }
                
                // Filtrar por partido
                if (partyFilter && candidate.party !== partyFilter) {
                    return false;
                }
                
                // Filtrar por busca
                if (searchTerm) {
                    const searchFields = [
                        candidate.nickname,
                        candidate.number,
                        candidate.tiktok,
                        candidate.party
                    ].join(' ').toLowerCase();
                    
                    if (!searchFields.includes(searchTerm)) {
                        return false;
                    }
                }
                
                return true;
            });
            
            renderCandidates();
        }

        function resetFilters() {
            document.getElementById('filterPosition').value = '';
            document.getElementById('filterState').value = '';
            document.getElementById('filterParty').value = '';
            document.getElementById('searchInput').value = '';
            
            filterCandidates();
        }

        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function adminLogin(e) {
            e.preventDefault();
            
            const adminState = document.getElementById('adminState').value;
            const password = document.getElementById('adminPassword').value;
            
            // Validar credenciais
            if (!adminState || !password) {
                document.getElementById('adminLoginError').textContent = 'Preencha todos os campos';
                document.getElementById('adminLoginError').classList.add('show');
                return;
            }
            
            // Verificar credenciais
            if (adminCredentials[adminState] && adminCredentials[adminState].password === password) {
                // Login bem-sucedido
                currentState.adminLoggedIn = true;
                currentState.adminData = {
                    org: adminCredentials[adminState].org,
                    jurisdiction: adminCredentials[adminState].jurisdiction,
                    type: adminState
                };
                
                // Limpar erro
                document.getElementById('adminLoginError').classList.remove('show');
                
                // Mostrar painel admin
                showAdminPanel();
            } else {
                // Credenciais inválidas
                document.getElementById('adminLoginError').textContent = 'Credenciais inválidas';
                document.getElementById('adminLoginError').classList.add('show');
            }
        }

        function showAdminPanel() {
            // Atualizar informações do admin
            document.getElementById('adminOrg').textContent = currentState.adminData.org;
            document.getElementById('adminJurisdiction').textContent = `Jurisdição: ${currentState.adminData.jurisdiction}`;
            
            // Mostrar/ocultar aba de eleições (apenas para TSE Nacional)
            if (currentState.adminData.type === 'TSE') {
                document.getElementById('electionsTab').style.display = 'block';
            } else {
                document.getElementById('electionsTab').style.display = 'none';
            }
            
            // Mostrar painel
            document.getElementById('admin-panel').style.display = 'block';
            document.getElementById('admin-login').style.display = 'none';
            
            // Carregar dados do admin
            loadAdminData();
        }

        function loadAdminData() {
            // Atualizar estatísticas
            const total = currentState.candidates.length;
            const approved = currentState.candidates.filter(c => c.status === 'approved').length;
            const pending = currentState.candidates.filter(c => c.status === 'pending').length;
            
            document.getElementById('totalCandidates').textContent = total;
            document.getElementById('approvedCandidates').textContent = approved;
            document.getElementById('pendingCandidates').textContent = pending;
            document.getElementById('totalLogs').textContent = total + 15; // Simulação
            
            // Carregar candidaturas para administração
            renderAdminCandidates();
            
            // Carregar aprovações pendentes
            renderPendingApprovals();
        }

        function renderAdminCandidates() {
            const container = document.getElementById('adminCandidateList');
            container.innerHTML = '';
            
            // Filtrar candidaturas baseado na jurisdição do admin
            let candidatesToShow = [...currentState.candidates];
            
            // Se não for TSE Nacional, filtrar por estado
            if (currentState.adminData.type !== 'TSE') {
                candidatesToShow = candidatesToShow.filter(candidate => 
                    candidate.state === currentState.adminData.jurisdiction
                );
            }
            
            if (candidatesToShow.length === 0) {
                container.innerHTML = '<p>Nenhuma candidatura encontrada.</p>';
                return;
            }
            
            candidatesToShow.forEach(candidate => {
                const card = document.createElement('div');
                card.className = 'card';
                card.style.marginBottom = '16px';
                card.style.position = 'relative';
                
                // Status
                let statusBadge = '';
                if (candidate.status === 'approved') {
                    statusBadge = '<span style="background-color: var(--green); color: white; padding: 4px 10px; border-radius: 12px; font-size: 0.8rem; font-weight: 600; position: absolute; top: 20px; right: 20px;">APROVADO</span>';
                } else if (candidate.status === 'pending') {
                    statusBadge = '<span style="background-color: #f59e0b; color: white; padding: 4px 10px; border-radius: 12px; font-size: 0.8rem; font-weight: 600; position: absolute; top: 20px; right: 20px;">PENDENTE</span>';
                }
                
                // Localidade
                let location = candidate.state;
                if (candidate.city) {
                    location += ` - ${candidate.city}`;
                }
                
                // Ações (apenas para pendentes ou se for TSE)
                let actions = '';
                if (candidate.status === 'pending') {
                    actions = `
                        <div style="display: flex; gap: 10px; margin-top: 16px;">
                            <button class="btn btn-success btn-approve" data-id="${candidate.id}" style="padding: 8px 16px; font-size: 0.9rem;">
                                <i class="fas fa-check"></i> Aprovar
                            </button>
                            <button class="btn btn-outline btn-reject" data-id="${candidate.id}" style="padding: 8px 16px; font-size: 0.9rem; border-color: #dc2626; color: #dc2626;">
                                <i class="fas fa-times"></i> Rejeitar
                            </button>
                        </div>
                    `;
                } else if (currentState.adminData.type === 'TSE') {
                    actions = `
                        <div style="display: flex; gap: 10px; margin-top: 16px;">
                            <button class="btn btn-outline btn-audit" data-id="${candidate.id}" style="padding: 8px 16px; font-size: 0.9rem;">
                                <i class="fas fa-search"></i> Auditar
                            </button>
                        </div>
                    `;
                }
                
                card.innerHTML = `
                    ${statusBadge}
                    <h4 style="margin-bottom: 8px;">${candidate.nickname} <small>(#${candidate.number})</small></h4>
                    <p style="margin-bottom: 4px;"><strong>Cargo:</strong> ${candidate.position}</p>
                    <p style="margin-bottom: 4px;"><strong>Localidade:</strong> ${location}</p>
                    <p style="margin-bottom: 4px;"><strong>Partido:</strong> ${candidate.party}</p>
                    <p style="margin-bottom: 4px;"><strong>TikTok:</strong> ${candidate.tiktok}</p>
                    <p style="margin-bottom: 4px;"><strong>Status:</strong> ${candidate.status === 'approved' ? 'Aprovado' : candidate.status === 'pending' ? 'Pendente' : 'Rejeitado'}</p>
                    ${actions}
                `;
                
                container.appendChild(card);
            });
            
            // Adicionar event listeners para os botões
            document.querySelectorAll('.btn-approve').forEach(btn => {
                btn.addEventListener('click', function() {
                    const candidateId = this.dataset.id;
                    initiateAdminAction('approve', candidateId);
                });
            });
            
            document.querySelectorAll('.btn-reject').forEach(btn => {
                btn.addEventListener('click', function() {
                    const candidateId = this.dataset.id;
                    initiateAdminAction('reject', candidateId);
                });
            });
        }

        function renderPendingApprovals() {
            const container = document.getElementById('pendingApprovalsList');
            container.innerHTML = '';
            
            // Filtrar candidaturas pendentes baseado na jurisdição
            let pendingCandidates = currentState.candidates.filter(c => c.status === 'pending');
            
            // Se não for TSE Nacional, filtrar por estado
            if (currentState.adminData.type !== 'TSE') {
                pendingCandidates = pendingCandidates.filter(candidate => 
                    candidate.state === currentState.adminData.jurisdiction
                );
            }
            
            if (pendingCandidates.length === 0) {
                container.innerHTML = '<div class="card"><p>Nenhuma candidatura pendente de aprovação.</p></div>';
                return;
            }
            
            pendingCandidates.forEach(candidate => {
                const card = document.createElement('div');
                card.className = 'card';
                card.style.marginBottom = '16px';
                
                // Localidade
                let location = candidate.state;
                if (candidate.city) {
                    location += ` - ${candidate.city}`;
                }
                
                card.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <div>
                            <h4 style="margin-bottom: 8px;">${candidate.nickname}</h4>
                            <p style="margin-bottom: 4px;"><strong>Cargo:</strong> ${candidate.position} (${candidate.number})</p>
                            <p style="margin-bottom: 4px;"><strong>Localidade:</strong> ${location}</p>
                            <p style="margin-bottom: 4px;"><strong>Partido:</strong> ${candidate.party}</p>
                            <p style="margin-bottom: 4px;"><strong>TikTok:</strong> ${candidate.tiktok}</p>
                            <p style="margin-bottom: 4px;"><strong>Data de inscrição:</strong> ${new Date(candidate.submissionDate || Date.now()).toLocaleDateString('pt-BR')}</p>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <button class="btn btn-success btn-approve" data-id="${candidate.id}" style="padding: 10px 20px;">
                                <i class="fas fa-check"></i> Aprovar
                            </button>
                            <button class="btn btn-outline btn-reject" data-id="${candidate.id}" style="padding: 10px 20px; border-color: #dc2626; color: #dc2626;">
                                <i class="fas fa-times"></i> Rejeitar
                            </button>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });
            
            // Adicionar event listeners para os botões
            document.querySelectorAll('.btn-approve').forEach(btn => {
                btn.addEventListener('click', function() {
                    const candidateId = this.dataset.id;
                    initiateAdminAction('approve', candidateId);
                });
            });
            
            document.querySelectorAll('.btn-reject').forEach(btn => {
                btn.addEventListener('click', function() {
                    const candidateId = this.dataset.id;
                    initiateAdminAction('reject', candidateId);
                });
            });
        }

        function initiateAdminAction(action, candidateId) {
            const candidate = currentState.candidates.find(c => c.id === candidateId);
            if (!candidate) return;
            
            // Configurar modal baseado na ação
            const modal = document.getElementById('adminActionModal');
            const title = document.getElementById('adminActionTitle');
            const message = document.getElementById('adminActionMessage');
            const candidateName = document.getElementById('candidateNameAction');
            const confirmBtn = document.getElementById('confirmAdminAction');
            
            if (action === 'approve') {
                title.textContent = 'Aprovar Candidatura';
                message.textContent = `Você está prestes a aprovar a candidatura de ${candidate.nickname} para o cargo de ${candidate.position}. Esta ação será registrada nos logs do sistema.`;
                confirmBtn.textContent = 'Aprovar';
                confirmBtn.className = 'btn btn-success';
            } else {
                title.textContent = 'Rejeitar Candidatura';
                message.textContent = `Você está prestes a rejeitar a candidatura de ${candidate.nickname} para o cargo de ${candidate.position}. Esta ação será registrada nos logs do sistema.`;
                confirmBtn.textContent = 'Rejeitar';
                confirmBtn.className = 'btn btn-danger';
                confirmBtn.style.backgroundColor = '#dc2626';
                confirmBtn.style.borderColor = '#dc2626';
            }
            
            candidateName.textContent = candidate.nickname;
            
            // Armazenar dados da ação
            modal.dataset.action = action;
            modal.dataset.candidateId = candidateId;
            
            // Mostrar modal
            showModal('adminActionModal');
            
            // Configurar confirmação
            confirmBtn.onclick = function() {
                completeAdminAction(action, candidateId);
            };
        }

        function completeAdminAction(action, candidateId) {
            const reason = document.getElementById('adminActionReason').value;
            
            // Encontrar candidato
            const candidateIndex = currentState.candidates.findIndex(c => c.id === candidateId);
            if (candidateIndex === -1) return;
            
            // Atualizar status
            if (action === 'approve') {
                currentState.candidates[candidateIndex].status = 'approved';
                currentState.candidates[candidateIndex].approvalDate = new Date().toISOString();
                currentState.candidates[candidateIndex].approvedBy = currentState.adminData.org;
            } else {
                currentState.candidates[candidateIndex].status = 'rejected';
                currentState.candidates[candidateIndex].approvalDate = new Date().toISOString();
                currentState.candidates[candidateIndex].approvedBy = currentState.adminData.org;
            }
            
            // Em produção, atualizaria no Firebase
            // database.ref('candidates/' + candidateId).update({
            //     status: action === 'approve' ? 'approved' : 'rejected',
            //     approvalDate: new Date().toISOString(),
            //     approvedBy: currentState.adminData.org
            // });
            
            // Também geraria um log
            // database.ref('logs/' + Date.now()).set({
            //     action: action === 'approve' ? 'candidacy_approval' : 'candidacy_rejection',
            //     admin: currentState.adminData.org,
            //     candidateId: candidateId,
            //     candidateName: currentState.candidates[candidateIndex].nickname,
            //     reason: reason || null,
            //     timestamp: new Date().toISOString()
            // });
            
            // Fechar modal
            hideModal('adminActionModal');
            
            // Resetar campo de motivo
            document.getElementById('adminActionReason').value = '';
            
            // Recarregar dados do admin
            loadAdminData();
            
            // Atualizar lista de candidatos se estiver visível
            if (currentState.currentSection === 'candidatos') {
                filterCandidates();
            }
            
            // Mostrar confirmação
            alert(`Candidatura ${action === 'approve' ? 'aprovada' : 'rejeitada'} com sucesso!`);
        }

        function switchAdminTab(tabId) {
            // Atualizar abas
            document.querySelectorAll('.admin-tab').forEach(tab => {
                if (tab.dataset.tab === tabId) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Atualizar conteúdo
            document.querySelectorAll('.admin-tab-content').forEach(content => {
                if (content.id === `${tabId}Tab`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
        }

        function checkAdminAuth() {
            // Verificar se há admin logado
            // Em produção, usaria Firebase Auth para persistência
            if (currentState.adminLoggedIn) {
                showAdminPanel();
            }
        }

        function adminLogout() {
            currentState.adminLoggedIn = false;
            currentState.adminData = null;
            
            // Redirecionar para login
            showSection('admin-login');
        }
    </script>
</body>
</html>
