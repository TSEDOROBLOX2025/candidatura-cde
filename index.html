<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSE RP BROOKASIL - Sistema Eleitoral Oficial</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <style>
        :root {
            --obsidian: #0a0a0a;
            --gold: #ffd700;
            --gold-light: #fff0a3;
            --gold-dark: #b8860b;
            --cyber-blue: #00f3ff;
            --cyber-pink: #ff00ff;
            --glass-dark: rgba(10, 10, 10, 0.8);
            --glass-light: rgba(255, 215, 0, 0.1);
            --danger: #ff3860;
            --success: #23d160;
            --warning: #ffdd57;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--obsidian);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 243, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 0, 255, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: -2;
        }

        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                transparent 50%,
                rgba(0, 243, 255, 0.03) 50%
            );
            background-size: 100% 4px;
            pointer-events: none;
            z-index: -1;
            animation: scan 10s linear infinite;
        }

        @keyframes scan {
            0% { transform: translateY(0); }
            100% { transform: translateY(4px); }
        }

        .mouse-light {
            position: fixed;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
            z-index: -1;
            transform: translate(-50%, -50%);
            transition: transform 0.1s;
        }

        /* HEADER E NAVEGA√á√ÉO */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: var(--glass-dark);
            backdrop-filter: blur(40px);
            border-bottom: 2px solid var(--gold);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--gold);
            text-shadow: 0 0 10px var(--gold);
            letter-spacing: 2px;
        }

        .logo-sub {
            font-size: 0.8rem;
            color: var(--cyber-blue);
            display: block;
            letter-spacing: 4px;
        }

        .nav-tabs {
            display: flex;
            gap: 1rem;
        }

        .nav-tab {
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 0.8rem 1.5rem;
            font-family: 'Orbitron', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-tab:hover {
            background: rgba(255, 215, 0, 0.1);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: var(--gold);
            color: var(--obsidian);
            font-weight: 700;
        }

        .admin-indicator {
            background: var(--danger);
            color: white;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 1rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* SIDEBAR FLUTUANTE */
        .sidebar {
            position: fixed;
            left: 2rem;
            top: 50%;
            transform: translateY(-50%);
            background: var(--glass-dark);
            backdrop-filter: blur(40px);
            border: 1px solid var(--gold);
            border-radius: 20px;
            padding: 1.5rem;
            width: 80px;
            transition: width 0.3s ease;
            z-index: 999;
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.2);
        }

        .sidebar:hover {
            width: 250px;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.8rem;
            margin: 0.5rem 0;
            color: var(--gold);
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
        }

        .sidebar-item:hover {
            background: rgba(255, 215, 0, 0.1);
            transform: translateX(5px);
        }

        .sidebar-item i {
            font-size: 1.2rem;
            min-width: 24px;
        }

        /* CONTE√öDO PRINCIPAL */
        .main-content {
            margin-top: 100px;
            padding: 2rem;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* CARDS GLASSMORPHISM */
        .card {
            background: var(--glass-dark);
            backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: var(--gold);
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.2);
            transform: translateY(-5px);
        }

        .card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, var(--gold), var(--cyber-blue), var(--cyber-pink), var(--gold));
            z-index: -1;
            filter: blur(10px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover::before {
            opacity: 1;
        }

        .card-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            color: var(--gold);
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--gold);
            padding-bottom: 0.5rem;
        }

        /* DASHBOARD */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--glass-dark), rgba(0, 243, 255, 0.1));
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: scale(1.05);
        }

        .stat-number {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            font-weight: 900;
            color: var(--gold);
            text-shadow: 0 0 10px currentColor;
            margin: 0.5rem 0;
        }

        .stat-label {
            color: var(--cyber-blue);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .chart-container {
            background: var(--glass-dark);
            padding: 1.5rem;
            border-radius: 15px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        /* FILTROS */
        .filters {
            background: var(--glass-dark);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            border: 1px solid rgba(0, 243, 255, 0.3);
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-label {
            color: var(--cyber-blue);
            font-size: 0.9rem;
            font-weight: 600;
        }

        .filter-select, .filter-input {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--gold);
            color: white;
            padding: 0.8rem;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.3s ease;
        }

        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: var(--cyber-blue);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.5);
        }

        /* TABELAS */
        .table-container {
            overflow-x: auto;
            margin-top: 1rem;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--glass-dark);
        }

        .data-table th {
            background: rgba(255, 215, 0, 0.2);
            color: var(--gold);
            padding: 1rem;
            text-align: left;
            font-family: 'Orbitron', sans-serif;
            font-weight: 500;
            border-bottom: 2px solid var(--gold);
        }

        .data-table td {
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 215, 0, 0.1);
            transition: background 0.3s ease;
        }

        .data-table tr:hover td {
            background: rgba(255, 215, 0, 0.05);
        }

        /* BOT√ïES */
        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--gold), var(--gold-dark));
            color: var(--obsidian);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .btn-danger {
            background: linear-gradient(45deg, var(--danger), #b3002d);
            color: white;
        }

        .btn-success {
            background: linear-gradient(45deg, var(--success), #008e46);
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
        }

        .btn-outline:hover {
            background: rgba(255, 215, 0, 0.1);
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: var(--glass-dark);
            backdrop-filter: blur(40px);
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: transparent;
            border: none;
            color: var(--gold);
            font-size: 1.5rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .modal-close:hover {
            background: rgba(255, 215, 0, 0.1);
        }

        /* FORMUL√ÅRIOS */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            color: var(--cyber-blue);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 0.8rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--gold);
            border-radius: 8px;
            color: white;
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.3s ease;
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--cyber-blue);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.5);
        }

        /* LOGIN */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
        }

        .login-card {
            background: var(--glass-dark);
            backdrop-filter: blur(40px);
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 3rem;
            width: 100%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 0 60px rgba(255, 215, 0, 0.3);
        }

        .login-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            color: var(--gold);
            margin-bottom: 0.5rem;
        }

        .login-subtitle {
            color: var(--cyber-blue);
            margin-bottom: 2rem;
        }

        /* ABAS FLUTUANTES */
        .floating-tabs {
            position: fixed;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 1rem;
            z-index: 998;
        }

        .floating-tab {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--glass-dark);
            border: 1px solid var(--gold);
            color: var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .floating-tab:hover {
            width: 200px;
            border-radius: 25px;
            justify-content: flex-start;
            padding-left: 1rem;
            gap: 1rem;
        }

        .floating-tab:hover::after {
            content: attr(data-tooltip);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        /* RESPONSIVIDADE */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                padding: 1rem;
            }
            
            .nav-tabs {
                margin-top: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .sidebar {
                display: none;
            }
            
            .floating-tabs {
                display: none;
            }
            
            .main-content {
                margin-top: 150px;
                padding: 1rem;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .filter-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .logo {
                font-size: 1.2rem;
            }
            
            .nav-tab {
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }
            
            .card {
                padding: 1rem;
            }
        }

        /* ANIMA√á√ïES ESPECIAIS */
        .glow {
            text-shadow: 0 0 10px currentColor;
        }

        .cyber-border {
            position: relative;
            border: 1px solid transparent;
            background: linear-gradient(var(--glass-dark), var(--glass-dark)) padding-box,
                      linear-gradient(45deg, var(--gold), var(--cyber-blue), var(--cyber-pink), var(--gold)) border-box;
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

        .float-animation {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* STATUS BADGES */
        .status-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-analise {
            background: rgba(255, 221, 87, 0.2);
            color: var(--warning);
            border: 1px solid var(--warning);
        }

        .status-homologado {
            background: rgba(35, 209, 96, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status-recusado {
            background: rgba(255, 56, 96, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        /* IDEOLOGIA COLORS */
        .ideologia-direita {
            color: #4169e1;
            border-left: 4px solid #4169e1;
            padding-left: 1rem;
        }

        .ideologia-centro {
            color: #32cd32;
            border-left: 4px solid #32cd32;
            padding-left: 1rem;
        }

        .ideologia-esquerda {
            color: #dc143c;
            border-left: 4px solid #dc143c;
            padding-left: 1rem;
        }
    </style>
</head>
<body>
    <!-- Efeito de scanlines -->
    <div class="scanlines"></div>
    
    <!-- Luz que segue o mouse -->
    <div class="mouse-light" id="mouseLight"></div>
    
    <!-- Header -->
    <header class="header">
        <div class="logo">
            TSE RP BROOKASIL
            <span class="logo-sub">SISTEMA ELEITORAL OFICIAL</span>
        </div>
        <div class="nav-tabs">
            <button class="nav-tab active" data-section="dashboard">DASHBOARD</button>
            <button class="nav-tab" data-section="candidatos">VER CANDIDATOS</button>
            <button class="nav-tab" data-section="candidatura">SE CANDIDATAR</button>
            <button class="nav-tab" data-section="login" id="loginTab">LOGIN TSE/TRE</button>
            <div id="adminIndicator" class="admin-indicator" style="display: none;">MODO ADMIN</div>
        </div>
    </header>
    
    <!-- Sidebar Flutuante -->
    <nav class="sidebar">
        <div class="sidebar-item" data-section="dashboard">
            <i>üìä</i> <span>Dashboard</span>
        </div>
        <div class="sidebar-item" data-section="candidatos">
            <i>üë•</i> <span>Candidatos</span>
        </div>
        <div class="sidebar-item" data-section="candidatura">
            <i>‚úçÔ∏è</i> <span>Candidatura</span>
        </div>
        <div class="sidebar-item" data-section="admin" id="sidebarAdmin">
            <i>üîê</i> <span>Administra√ß√£o</span>
        </div>
        <div class="sidebar-item" data-section="logs">
            <i>üìã</i> <span>Logs do Sistema</span>
        </div>
        <div class="sidebar-item" data-section="config">
            <i>‚öôÔ∏è</i> <span>Configura√ß√µes</span>
        </div>
    </nav>
    
    <!-- Abas Flutuantes -->
    <div class="floating-tabs">
        <div class="floating-tab float-animation" data-tooltip="Relat√≥rio R√°pido" onclick="generateQuickReport()">
            üìà
        </div>
        <div class="floating-tab float-animation" data-tooltip="Alertas do Sistema" onclick="showSystemAlerts()">
            üîî
        </div>
        <div class="floating-tab float-animation" data-tooltip="Modo da Elei√ß√£o" onclick="showElectionMode()">
            üó≥Ô∏è
        </div>
        <div class="floating-tab pulse-animation" data-tooltip="Acesso R√°pido" onclick="toggleQuickAccess()">
            ‚ö°
        </div>
    </div>
    
    <!-- Conte√∫do Principal -->
    <main class="main-content">
        <!-- Dashboard P√∫blico -->
        <section id="dashboard" class="section active">
            <div class="card">
                <h2 class="card-title">DASHBOARD ELEITORAL - BROOKASIL</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Candidatos Totais</div>
                        <div class="stat-number" id="totalCandidatos">0</div>
                        <div class="stat-desc">Sistema Nacional</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Homologados</div>
                        <div class="stat-number" id="homologados">0</div>
                        <div class="stat-desc">Aprovados pelo TSE/TRE</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Em An√°lise</div>
                        <div class="stat-number" id="emAnalise">0</div>
                        <div class="stat-desc">Aguardando an√°lise</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Recusados</div>
                        <div class="stat-number" id="recusados">0</div>
                        <div class="stat-desc">Com motivo registrado</div>
                    </div>
                </div>
                
                <div class="card-title">MODO DA ELEI√á√ÉO ATUAL</div>
                <div class="cyber-border" style="padding: 1.5rem; margin-bottom: 2rem;">
                    <div id="modoEleicao" class="stat-number" style="font-size: 2rem;">CARREGANDO...</div>
                    <div class="stat-label">Apenas TSE Nacional pode alterar</div>
                </div>
                
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3 class="card-title">IDEOLOGIAS MAIS ESCOLHIDAS</h3>
                        <canvas id="ideologiaChart"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <h3 class="card-title">DISTRIBUI√á√ÉO POR CARGO</h3>
                        <canvas id="cargoChart"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <h3 class="card-title">DISTRIBUI√á√ÉO POR ESTADO</h3>
                        <canvas id="estadoChart"></canvas>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Ver Candidatos (P√∫blico) -->
        <section id="candidatos" class="section">
            <div class="card">
                <h2 class="card-title">CANDIDATOS HOMOLOGADOS</h2>
                
                <div class="filters">
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label class="filter-label">ESTADO</label>
                            <select class="filter-select" id="filterEstado">
                                <option value="">Todos os Estados</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">CIDADE</label>
                            <select class="filter-select" id="filterCidade">
                                <option value="">Todas as Cidades</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">CARGO</label>
                            <select class="filter-select" id="filterCargo">
                                <option value="">Todos os Cargos</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">PARTIDO</label>
                            <select class="filter-select" id="filterPartido">
                                <option value="">Todos os Partidos</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">IDEOLOGIA</label>
                            <select class="filter-select" id="filterIdeologia">
                                <option value="">Todas as Ideologias</option>
                            </select>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" style="margin-top: 1rem;" onclick="filtrarCandidatos()">
                        APLICAR FILTROS
                    </button>
                </div>
                
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>NOME</th>
                                <th>CARGO</th>
                                <th>PARTIDO</th>
                                <th>ESTADO/CIDADE</th>
                                <th>IDEOLOGIA</th>
                                <th>STATUS</th>
                            </tr>
                        </thead>
                        <tbody id="candidatosTable">
                            <!-- Dados carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
        
        <!-- Se Candidatar (P√∫blico) -->
        <section id="candidatura" class="section">
            <div class="card">
                <h2 class="card-title">FORMUL√ÅRIO DE CANDIDATURA</h2>
                
                <div class="form-group">
                    <label class="form-label">NOME COMPLETO</label>
                    <input type="text" class="form-input" id="candidatoNome" placeholder="Digite seu nome completo">
                </div>
                
                <div class="form-group">
                    <label class="form-label">ESTADO</label>
                    <select class="form-select" id="candidatoEstado" onchange="carregarCidades()">
                        <option value="">Selecione um estado</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">CIDADE</label>
                    <select class="form-select" id="candidatoCidade">
                        <option value="">Selecione uma cidade</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">CARGO</label>
                    <select class="form-select" id="candidatoCargo">
                        <option value="">Selecione um cargo</option>
                        <option value="Prefeito">Prefeito</option>
                        <option value="Vereador">Vereador</option>
                        <option value="Governador">Governador</option>
                        <option value="Presidente">Presidente</option>
                        <option value="Senador">Senador</option>
                        <option value="Deputado Federal">Deputado Federal</option>
                        <option value="Deputado Estadual">Deputado Estadual</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">PARTIDO</label>
                    <select class="form-select" id="candidatoPartido">
                        <option value="">Selecione um partido</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">MANIFESTO (opcional)</label>
                    <textarea class="form-textarea" id="candidatoManifesto" placeholder="Descreva suas propostas e ideais..."></textarea>
                </div>
                
                <div class="form-group">
                    <button class="btn btn-primary" onclick="enviarCandidatura()">
                        ENVIAR CANDIDATURA
                    </button>
                    <button class="btn btn-outline" onclick="limparFormulario()">
                        LIMPAR FORMUL√ÅRIO
                    </button>
                </div>
                
                <div id="candidaturaMessage" style="margin-top: 1rem;"></div>
            </div>
        </section>
        
        <!-- Login Administrativo -->
        <section id="login" class="section">
            <div class="login-container">
                <div class="login-card">
                    <h2 class="login-title">ACESSO ADMINISTRATIVO</h2>
                    <p class="login-subtitle">TSE Nacional e TREs Estaduais</p>
                    
                    <div class="form-group">
                        <label class="form-label">SENHA DE ACESSO</label>
                        <input type="password" class="form-input" id="adminPassword" placeholder="Digite a senha de acesso">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">TIPO DE ACESSO</label>
                        <select class="form-select" id="adminType">
                            <option value="TSE">TSE Nacional - Brookasil</option>
                            <option value="Brookhaven">TRE - Brookhaven</option>
                            <option value="Novacore">TRE - Novacore</option>
                            <option value="Casteriber">TRE - Caster√≠ber</option>
                            <option value="Fortemega">TRE - Fortemega</option>
                            <option value="Floremix">TRE - Flor√™mix</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="realizarLogin()">
                            ACESSAR SISTEMA
                        </button>
                    </div>
                    
                    <div style="margin-top: 2rem; font-size: 0.9rem; color: var(--cyber-blue);">
                        <p><strong>Senhas Oficiais:</strong></p>
                        <p>‚Ä¢ TSE: Brookasil1234</p>
                        <p>‚Ä¢ TRE Brookhaven: tutuBH</p>
                        <p>‚Ä¢ TRE Novacore: williamNC</p>
                        <p>‚Ä¢ TRE Caster√≠ber: henriqueCB</p>
                        <p>‚Ä¢ TRE Fortemega: lucasFM</p>
                        <p>‚Ä¢ TRE Flor√™mix: popoFX</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Dashboard Administrativo (ap√≥s login) -->
        <section id="admin" class="section">
            <div class="card">
                <h2 class="card-title">PAINEL ADMINISTRATIVO - <span id="adminTitulo"></span></h2>
                
                <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
                    <button class="btn btn-primary" onclick="mostrarAprovarCandidaturas()">
                        APROVAR CANDIDATURAS
                    </button>
                    <button class="btn btn-danger" onclick="mostrarRecusarCandidaturas()">
                        RECUSAR CANDIDATURAS
                    </button>
                    <button class="btn btn-outline" onclick="mostrarRecusados()">
                        VER RECUSADOS
                    </button>
                    <button class="btn btn-outline" onclick="mostrarLogs()">
                        VER LOGS
                    </button>
                    <button class="btn btn-outline" onclick="logout()">
                        SAIR
                    </button>
                </div>
                
                <div id="adminContent">
                    <!-- Conte√∫do administrativo ser√° carregado aqui -->
                </div>
            </div>
        </section>
        
        <!-- Configura√ß√µes (apenas TSE) -->
        <section id="config" class="section">
            <div class="card">
                <h2 class="card-title">CONFIGURA√á√ïES DO SISTEMA</h2>
                <p style="color: var(--cyber-blue); margin-bottom: 2rem;">
                    Apenas TSE Nacional pode alterar estas configura√ß√µes
                </p>
                
                <div class="form-group">
                    <label class="form-label">MODO DA ELEI√á√ÉO</label>
                    <select class="form-select" id="configModoEleicao">
                        <option value="Municipal">Municipal</option>
                        <option value="Estadual">Estadual</option>
                        <option value="Federal">Federal</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <button class="btn btn-primary" onclick="alterarModoEleicao()">
                        ALTERAR MODO
                    </button>
                </div>
                
                <div id="configMessage" style="margin-top: 1rem;"></div>
            </div>
        </section>
        
        <!-- Logs do Sistema -->
        <section id="logs" class="section">
            <div class="card">
                <h2 class="card-title">LOGS DO SISTEMA</h2>
                
                <div class="filters" style="margin-bottom: 2rem;">
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label class="filter-label">TIPO DE A√á√ÉO</label>
                            <select class="filter-select" id="filterLogTipo">
                                <option value="">Todos os Tipos</option>
                                <option value="candidatura">Nova Candidatura</option>
                                <option value="aprovar">Aprova√ß√£o</option>
                                <option value="recusar">Recusa</option>
                                <option value="config">Configura√ß√£o</option>
                                <option value="login">Login</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">USU√ÅRIO</label>
                            <input type="text" class="filter-input" id="filterLogUsuario" placeholder="Filtrar por usu√°rio">
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="filtrarLogs()">
                        FILTRAR LOGS
                    </button>
                </div>
                
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>DATA/HORA</th>
                                <th>USU√ÅRIO</th>
                                <th>A√á√ÉO</th>
                                <th>DETALHES</th>
                            </tr>
                        </thead>
                        <tbody id="logsTable">
                            <!-- Logs carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Modal para Aprovar/Recusar Candidaturas -->
    <div id="adminModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="fecharModal()">√ó</button>
            <h2 class="card-title" id="modalTitulo"></h2>
            <div id="modalContent">
                <!-- Conte√∫do do modal ser√° carregado aqui -->
            </div>
        </div>
    </div>
    
    <script>
        // Configura√ß√£o do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyD4a9vL9K9K9K9K9K9K9K9K9K9K9K9K9K9K",
            authDomain: "tse-rp-brookasil.firebaseapp.com",
            databaseURL: "https://tse-rp-brookasil-default-rtdb.firebaseio.com",
            projectId: "tse-rp-brookasil",
            storageBucket: "tse-rp-brookasil.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abcdef1234567890"
        };

        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const auth = firebase.auth();

        // Dados iniciais
        const estados = [
            { nome: "Brookhaven", cidades: ["Cidade Eleitoral", "Liberty City"] },
            { nome: "Novacore", cidades: ["Nexaville", "Sol√°ria"] },
            { nome: "Casteriber", cidades: ["Castelo Verde", "Porto Rubi"] },
            { nome: "Fortemega", cidades: ["Marinha City", "Porto Rubi"] },
            { nome: "Flor√™mix", cidades: ["Flor√°polis", "Riomarina"] }
        ];

        const partidos = [
            // DIREITA
            { nome: "Partido Liberal", sigla: "PL", numero: 22, ideologia: "Direita", cor: "#1e90ff" },
            { nome: "Progressistas", sigla: "PP", numero: 11, ideologia: "Direita", cor: "#4169e1" },
            { nome: "Republicanos", sigla: "Republicanos", numero: 10, ideologia: "Direita", cor: "#0000cd" },
            { nome: "Uni√£o da Direita Brookasileira", sigla: "UDB", numero: 38, ideologia: "Direita", cor: "#191970" },
            { nome: "Partido da Ordem e Liberdade", sigla: "POL", numero: 81, ideologia: "Direita", cor: "#000080" },
            { nome: "Alian√ßa Crist√£ Nacional", sigla: "ACN", numero: 84, ideologia: "Direita", cor: "#4b0082" },
            { nome: "Partido da Reedifica√ß√£o da Ordem Nacional", sigla: "PRONA", numero: 57, ideologia: "Direita", cor: "#8a2be2" },
            { nome: "Partido Social Liberal", sigla: "PSL", numero: 17, ideologia: "Direita", cor: "#4682b4" },
            { nome: "Partido da Esperan√ßa", sigla: "PESP", numero: 48, ideologia: "Direita", cor: "#5f9ea0" },
            { nome: "Partido Militar Nacionalista", sigla: "PMNL", numero: 86, ideologia: "Direita", cor: "#2f4f4f" },
            { nome: "Partido Republicano Trabalhista Nacional", sigla: "PRTN", numero: 75, ideologia: "Direita", cor: "#008b8b" },
            
            // CENTRO
            { nome: "Movimento Democr√°tico Brookasileiro", sigla: "MDB", numero: 15, ideologia: "Centro", cor: "#32cd32" },
            { nome: "Uni√£o Brasil", sigla: "UNI√ÉO", numero: 44, ideologia: "Centro", cor: "#90ee90" },
            { nome: "Partido Social Democr√°tico", sigla: "PSD", numero: 55, ideologia: "Centro", cor: "#00fa9a" },
            { nome: "Partido da Social Democracia Brookasileira", sigla: "PSDB", numero: 45, ideologia: "Centro", cor: "#3cb371" },
            { nome: "Partido da Uni√£o Nacional", sigla: "PUN", numero: 42, ideologia: "Centro", cor: "#2e8b57" },
            { nome: "Movimento Popular Democr√°tico", sigla: "MPD", numero: 37, ideologia: "Centro", cor: "#228b22" },
            { nome: "Partido da Mudan√ßa", sigla: "PDM", numero: 26, ideologia: "Centro", cor: "#008000" },
            { nome: "Movimento Trabalhista Brookasileiro", sigla: "MTB", numero: 63, ideologia: "Centro", cor: "#006400" },
            { nome: "Partido Trabalhista Democr√°tico", sigla: "PTD", numero: 46, ideologia: "Centro", cor: "#9acd32" },
            { nome: "Partido do Sindicato Democrata", sigla: "PDSD", numero: 88, ideologia: "Centro", cor: "#6b8e23" },
            { nome: "Partido Miss√£o", sigla: "MSS", numero: 14, ideologia: "Centro", cor: "#556b2f" },
            { nome: "Partido Constru√ß√£o", sigla: "PC", numero: 85, ideologia: "Centro", cor: "#adff2f" },
            
            // ESQUERDA
            { nome: "Partido dos Trabalhadores", sigla: "PT", numero: 13, ideologia: "Esquerda", cor: "#dc143c" },
            { nome: "Partido Socialismo e Liberdade", sigla: "PSOL", numero: 50, ideologia: "Esquerda", cor: "#ff0000" },
            { nome: "Partido Comunista do Brookasil", sigla: "PCdoB", numero: 65, ideologia: "Esquerda", cor: "#b22222" },
            { nome: "Partido Democr√°tico Trabalhista", sigla: "PDT", numero: 12, ideologia: "Esquerda", cor: "#cd5c5c" },
            { nome: "Partido da Frente Socialista", sigla: "PFS", numero: 60, ideologia: "Esquerda", cor: "#8b0000" },
            { nome: "Partido Socialista", sigla: "PS", numero: 56, ideologia: "Esquerda", cor: "#ff4500" },
            { nome: "Partido Social Trabalhista Nacional", sigla: "PSTN", numero: 31, ideologia: "Esquerda", cor: "#ff6347" }
        ];

        // Estado da aplica√ß√£o
        let usuarioLogado = null;
        let candidatos = [];
        let logs = [];
        let modoEleicao = "Municipal";
        let charts = {};

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            inicializarDados();
            inicializarEventos();
            carregarDadosFirebase();
            
            // Luz que segue o mouse
            document.addEventListener('mousemove', function(e) {
                const light = document.getElementById('mouseLight');
                light.style.left = e.clientX + 'px';
                light.style.top = e.clientY + 'px';
            });
            
            // Verificar se h√° usu√°rio logado
            const savedUser = localStorage.getItem('tse_user');
            if (savedUser) {
                usuarioLogado = JSON.parse(savedUser);
                entrarModoAdmin();
            }
        });

        function inicializarDados() {
            // Popular selects de estados
            const selectEstado = document.getElementById('filterEstado');
            const selectCandidatoEstado = document.getElementById('candidatoEstado');
            
            estados.forEach(estado => {
                const option1 = document.createElement('option');
                option1.value = estado.nome;
                option1.textContent = estado.nome;
                selectEstado.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = estado.nome;
                option2.textContent = estado.nome;
                selectCandidatoEstado.appendChild(option2);
            });
            
            // Popular selects de partidos
            const selectPartido = document.getElementById('filterPartido');
            const selectCandidatoPartido = document.getElementById('candidatoPartido');
            
            partidos.forEach(partido => {
                const option1 = document.createElement('option');
                option1.value = partido.sigla;
                option1.textContent = `${partido.sigla} - ${partido.nome}`;
                selectPartido.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = partido.sigla;
                option2.textContent = `${partido.sigla} - ${partido.nome}`;
                selectCandidatoPartido.appendChild(option2);
            });
            
            // Popular select de ideologias
            const selectIdeologia = document.getElementById('filterIdeologia');
            const ideologias = [...new Set(partidos.map(p => p.ideologia))];
            ideologias.forEach(ideologia => {
                const option = document.createElement('option');
                option.value = ideologia;
                option.textContent = ideologia;
                selectIdeologia.appendChild(option);
            });
        }

        function inicializarEventos() {
            // Navega√ß√£o por tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const sectionId = this.dataset.section;
                    mostrarSecao(sectionId);
                    
                    // Atualizar tabs ativas
                    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Navega√ß√£o por sidebar
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.addEventListener('click', function() {
                    const sectionId = this.dataset.section;
                    if (sectionId === 'admin' && !usuarioLogado) {
                        mostrarSecao('login');
                        return;
                    }
                    mostrarSecao(sectionId);
                });
            });
        }

        function mostrarSecao(sectionId) {
            // Esconder todas as se√ß√µes
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Mostrar se√ß√£o selecionada
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.add('active');
                
                // Atualizar tab ativa
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    if (tab.dataset.section === sectionId) {
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                    }
                });
                
                // Carregar dados espec√≠ficos da se√ß√£o
                switch(sectionId) {
                    case 'dashboard':
                        atualizarDashboard();
                        break;
                    case 'candidatos':
                        carregarCandidatosPublicos();
                        break;
                    case 'admin':
                        if (usuarioLogado) {
                            mostrarDashboardAdmin();
                        }
                        break;
                    case 'logs':
                        carregarLogs();
                        break;
                }
            }
        }

        // Fun√ß√µes Firebase
        function carregarDadosFirebase() {
            // Carregar candidatos
            database.ref('candidatos').on('value', snapshot => {
                candidatos = [];
                snapshot.forEach(childSnapshot => {
                    const candidato = childSnapshot.val();
                    candidato.id = childSnapshot.key;
                    candidatos.push(candidato);
                });
                atualizarDashboard();
                if (document.getElementById('candidatos').classList.contains('active')) {
                    carregarCandidatosPublicos();
                }
            });
            
            // Carregar logs
            database.ref('logs').on('value', snapshot => {
                logs = [];
                snapshot.forEach(childSnapshot => {
                    const log = childSnapshot.val();
                    log.id = childSnapshot.key;
                    logs.push(log);
                });
                if (document.getElementById('logs').classList.contains('active')) {
                    carregarLogs();
                }
            });
            
            // Carregar configura√ß√µes
            database.ref('configuracoes').on('value', snapshot => {
                const config = snapshot.val();
                if (config && config.modoEleicao) {
                    modoEleicao = config.modoEleicao;
                    document.getElementById('modoEleicao').textContent = modoEleicao.toUpperCase();
                    document.getElementById('configModoEleicao').value = modoEleicao;
                }
            });
            
            // Inicializar estados no Firebase se n√£o existirem
            database.ref('estados').once('value').then(snapshot => {
                if (!snapshot.exists()) {
                    const estadosRef = database.ref('estados');
                    estados.forEach(estado => {
                        estadosRef.push(estado);
                    });
                }
            });
        }

        // Dashboard
        function atualizarDashboard() {
            const total = candidatos.length;
            const homologados = candidatos.filter(c => c.status === 'Homologado').length;
            const emAnalise = candidatos.filter(c => c.status === 'Em an√°lise').length;
            const recusados = candidatos.filter(c => c.status === 'Recusado').length;
            
            document.getElementById('totalCandidatos').textContent = total;
            document.getElementById('homologados').textContent = homologados;
            document.getElementById('emAnalise').textContent = emAnalise;
            document.getElementById('recusados').textContent = recusados;
            
            atualizarGraficos();
        }

        function atualizarGraficos() {
            // Gr√°fico de ideologias
            const ideologiaData = {};
            candidatos.forEach(c => {
                const partido = partidos.find(p => p.sigla === c.partido);
                if (partido) {
                    ideologiaData[partido.ideologia] = (ideologiaData[partido.ideologia] || 0) + 1;
                }
            });
            
            const ideologiaCtx = document.getElementById('ideologiaChart').getContext('2d');
            if (charts.ideologia) charts.ideologia.destroy();
            
            charts.ideologia = new Chart(ideologiaCtx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(ideologiaData),
                    datasets: [{
                        data: Object.values(ideologiaData),
                        backgroundColor: ['#4169e1', '#32cd32', '#dc143c'],
                        borderColor: ['#fff', '#fff', '#fff'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffd700',
                                font: {
                                    family: 'Orbitron'
                                }
                            }
                        }
                    }
                }
            });
            
            // Gr√°fico de cargos
            const cargoData = {};
            candidatos.forEach(c => {
                cargoData[c.cargo] = (cargoData[c.cargo] || 0) + 1;
            });
            
            const cargoCtx = document.getElementById('cargoChart').getContext('2d');
            if (charts.cargo) charts.cargo.destroy();
            
            charts.cargo = new Chart(cargoCtx, {
                type: 'bar',
                data: {
                    labels: Object.keys(cargoData),
                    datasets: [{
                        label: 'Candidatos',
                        data: Object.values(cargoData),
                        backgroundColor: '#ffd700',
                        borderColor: '#fff',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffd700',
                                font: {
                                    family: 'Orbitron'
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#ffd700'
                            },
                            grid: {
                                color: 'rgba(255, 215, 0, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#ffd700'
                            },
                            grid: {
                                color: 'rgba(255, 215, 0, 0.1)'
                            }
                        }
                    }
                }
            });
            
            // Gr√°fico de estados
            const estadoData = {};
            candidatos.forEach(c => {
                estadoData[c.estado] = (estadoData[c.estado] || 0) + 1;
            });
            
            const estadoCtx = document.getElementById('estadoChart').getContext('2d');
            if (charts.estado) charts.estado.destroy();
            
            charts.estado = new Chart(estadoCtx, {
                type: 'polarArea',
                data: {
                    labels: Object.keys(estadoData),
                    datasets: [{
                        data: Object.values(estadoData),
                        backgroundColor: [
                            '#ffd700',
                            '#00f3ff',
                            '#ff00ff',
                            '#23d160',
                            '#ff3860'
                        ],
                        borderColor: '#fff',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffd700',
                                font: {
                                    family: 'Orbitron'
                                }
                            }
                        }
                    }
                }
            });
        }

        // Candidatos P√∫blicos
        function carregarCandidatosPublicos() {
            const candidatosHomologados = candidatos.filter(c => c.status === 'Homologado');
            const tbody = document.getElementById('candidatosTable');
            tbody.innerHTML = '';
            
            candidatosHomologados.forEach(candidato => {
                const partido = partidos.find(p => p.sigla === candidato.partido);
                const ideologia = partido ? partido.ideologia : 'N/A';
                const ideologiaClass = ideologia === 'Direita' ? 'ideologia-direita' : 
                                     ideologia === 'Centro' ? 'ideologia-centro' : 
                                     'ideologia-esquerda';
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${candidato.nome}</td>
                    <td>${candidato.cargo}</td>
                    <td>${candidato.partido}</td>
                    <td>${candidato.estado} / ${candidato.cidade}</td>
                    <td class="${ideologiaClass}">${ideologia}</td>
                    <td><span class="status-badge status-homologado">HOMOLOGADO</span></td>
                `;
                tbody.appendChild(tr);
            });
        }

        function filtrarCandidatos() {
            const estado = document.getElementById('filterEstado').value;
            const cidade = document.getElementById('filterCidade').value;
            const cargo = document.getElementById('filterCargo').value;
            const partido = document.getElementById('filterPartido').value;
            const ideologia = document.getElementById('filterIdeologia').value;
            
            const candidatosFiltrados = candidatos.filter(c => {
                if (c.status !== 'Homologado') return false;
                if (estado && c.estado !== estado) return false;
                if (cidade && c.cidade !== cidade) return false;
                if (cargo && c.cargo !== cargo) return false;
                if (partido && c.partido !== partido) return false;
                if (ideologia) {
                    const p = partidos.find(part => part.sigla === c.partido);
                    if (!p || p.ideologia !== ideologia) return false;
                }
                return true;
            });
            
            const tbody = document.getElementById('candidatosTable');
            tbody.innerHTML = '';
            
            candidatosFiltrados.forEach(candidato => {
                const partido = partidos.find(p => p.sigla === candidato.partido);
                const ideologia = partido ? partido.ideologia : 'N/A';
                const ideologiaClass = ideologia === 'Direita' ? 'ideologia-direita' : 
                                     ideologia === 'Centro' ? 'ideologia-centro' : 
                                     'ideologia-esquerda';
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${candidato.nome}</td>
                    <td>${candidato.cargo}</td>
                    <td>${candidato.partido}</td>
                    <td>${candidato.estado} / ${candidato.cidade}</td>
                    <td class="${ideologiaClass}">${ideologia}</td>
                    <td><span class="status-badge status-homologado">HOMOLOGADO</span></td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Candidatura
        function carregarCidades() {
            const estadoSelecionado = document.getElementById('candidatoEstado').value;
            const selectCidade = document.getElementById('candidatoCidade');
            selectCidade.innerHTML = '<option value="">Selecione uma cidade</option>';
            
            if (estadoSelecionado) {
                const estado = estados.find(e => e.nome === estadoSelecionado);
                if (estado) {
                    estado.cidades.forEach(cidade => {
                        const option = document.createElement('option');
                        option.value = cidade;
                        option.textContent = cidade;
                        selectCidade.appendChild(option);
                    });
                }
            }
        }

        function enviarCandidatura() {
            const nome = document.getElementById('candidatoNome').value;
            const estado = document.getElementById('candidatoEstado').value;
            const cidade = document.getElementById('candidatoCidade').value;
            const cargo = document.getElementById('candidatoCargo').value;
            const partido = document.getElementById('candidatoPartido').value;
            const manifesto = document.getElementById('candidatoManifesto').value;
            
            if (!nome || !estado || !cidade || !cargo || !partido) {
                mostrarMensagem('candidaturaMessage', 'Preencha todos os campos obrigat√≥rios!', 'danger');
                return;
            }
            
            // Verificar se partido existe
            const partidoInfo = partidos.find(p => p.sigla === partido);
            if (!partidoInfo) {
                mostrarMensagem('candidaturaMessage', 'Partido inv√°lido!', 'danger');
                return;
            }
            
            const candidatura = {
                nome,
                estado,
                cidade,
                cargo,
                partido,
                manifesto: manifesto || '',
                ideologia: partidoInfo.ideologia,
                status: 'Em an√°lise',
                dataCadastro: new Date().toISOString()
            };
            
            // Salvar no Firebase
            database.ref('candidatos').push(candidatura)
                .then(() => {
                    // Registrar log
                    registrarLog('candidatura', `Nova candidatura: ${nome} (${partido}) para ${cargo} em ${cidade}/${estado}`);
                    
                    mostrarMensagem('candidaturaMessage', 'Candidatura enviada com sucesso! Aguarde an√°lise do TSE/TRE.', 'success');
                    limparFormulario();
                    
                    // Atualizar dashboard
                    setTimeout(() => {
                        mostrarSecao('dashboard');
                    }, 2000);
                })
                .catch(error => {
                    mostrarMensagem('candidaturaMessage', 'Erro ao enviar candidatura: ' + error.message, 'danger');
                });
        }

        function limparFormulario() {
            document.getElementById('candidatoNome').value = '';
            document.getElementById('candidatoEstado').value = '';
            document.getElementById('candidatoCidade').innerHTML = '<option value="">Selecione uma cidade</option>';
            document.getElementById('candidatoCargo').value = '';
            document.getElementById('candidatoPartido').value = '';
            document.getElementById('candidatoManifesto').value = '';
        }

        // Login Administrativo
        function realizarLogin() {
            const password = document.getElementById('adminPassword').value;
            const adminType = document.getElementById('adminType').value;
            
            // Senhas oficiais
            const senhas = {
                'TSE': 'Brookasil1234',
                'Brookhaven': 'tutuBH',
                'Novacore': 'williamNC',
                'Casteriber': 'henriqueCB',
                'Fortemega': 'lucasFM',
                'Floremix': 'popoFX'
            };
            
            if (password === senhas[adminType]) {
                usuarioLogado = {
                    tipo: adminType === 'TSE' ? 'TSE' : 'TRE',
                    estado: adminType === 'TSE' ? 'Nacional' : adminType,
                    nome: adminType
                };
                
                // Salvar no localStorage
                localStorage.setItem('tse_user', JSON.stringify(usuarioLogado));
                
                // Registrar log
                registrarLog('login', `Login administrativo: ${adminType}`);
                
                entrarModoAdmin();
                mostrarSecao('admin');
                
                // Atualizar interface
                document.getElementById('loginTab').textContent = 'PAINEL ADMIN';
                document.getElementById('adminIndicator').style.display = 'block';
            } else {
                alert('Senha incorreta! Verifique as credenciais.');
            }
        }

        function entrarModoAdmin() {
            document.getElementById('loginTab').textContent = 'PAINEL ADMIN';
            document.getElementById('adminIndicator').style.display = 'block';
            document.getElementById('sidebarAdmin').style.display = 'flex';
        }

        function logout() {
            usuarioLogado = null;
            localStorage.removeItem('tse_user');
            
            // Registrar log
            registrarLog('login', 'Logout do sistema');
            
            // Atualizar interface
            document.getElementById('loginTab').textContent = 'LOGIN TSE/TRE';
            document.getElementById('adminIndicator').style.display = 'none';
            
            mostrarSecao('dashboard');
        }

        // Fun√ß√µes Administrativas
        function mostrarDashboardAdmin() {
            const adminContent = document.getElementById('adminContent');
            const adminTitulo = document.getElementById('adminTitulo');
            
            if (usuarioLogado.tipo === 'TSE') {
                adminTitulo.textContent = 'TSE NACIONAL - CONTROLE TOTAL';
            } else {
                adminTitulo.textContent = `TRE ${usuarioLogado.estado} - ADMINISTRA√á√ÉO ESTADUAL`;
            }
            
            adminContent.innerHTML = `
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Candidaturas Pendentes</div>
                        <div class="stat-number">${candidatos.filter(c => c.status === 'Em an√°lise' && (usuarioLogado.tipo === 'TSE' || c.estado === usuarioLogado.estado)).length}</div>
                        <div class="stat-desc">Aguardando sua an√°lise</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Homologados por voc√™</div>
                        <div class="stat-number">${candidatos.filter(c => c.status === 'Homologado' && c.aprovadoPor === usuarioLogado.nome).length}</div>
                        <div class="stat-desc">Aprova√ß√µes realizadas</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Recusados por voc√™</div>
                        <div class="stat-number">${candidatos.filter(c => c.status === 'Recusado' && c.recusadoPor === usuarioLogado.nome).length}</div>
                        <div class="stat-desc">Recusas realizadas</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Modo da Elei√ß√£o</div>
                        <div class="stat-number" style="font-size: 1.5rem;">${modoEleicao.toUpperCase()}</div>
                        <div class="stat-desc">${usuarioLogado.tipo === 'TSE' ? 'Voc√™ pode alterar' : 'Apenas TSE altera'}</div>
                    </div>
                </div>
                
                <div class="card-title" style="margin-top: 2rem;">A√á√ïES R√ÅPIDAS</div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin-top: 1rem;">
                    <div class="cyber-border" style="padding: 1rem;">
                        <h3 style="color: var(--cyber-blue); margin-bottom: 0.5rem;">APROVAR CANDIDATURAS</h3>
                        <p style="font-size: 0.9rem; margin-bottom: 1rem;">Analise e aprove candidaturas pendentes do ${usuarioLogado.tipo === 'TSE' ? 'sistema nacional' : 'seu estado'}</p>
                        <button class="btn btn-success" onclick="mostrarAprovarCandidaturas()">VER PENDENTES</button>
                    </div>
                    
                    <div class="cyber-border" style="padding: 1rem;">
                        <h3 style="color: var(--cyber-blue); margin-bottom: 0.5rem;">RECUSAR CANDIDATURAS</h3>
                        <p style="font-size: 0.9rem; margin-bottom: 1rem;">Recuse candidaturas com justificativa obrigat√≥ria</p>
                        <button class="btn btn-danger" onclick="mostrarRecusarCandidaturas()">RECUSAR CANDIDATURAS</button>
                    </div>
                    
                    ${usuarioLogado.tipo === 'TSE' ? `
                    <div class="cyber-border" style="padding: 1rem;">
                        <h3 style="color: var(--cyber-blue); margin-bottom: 0.5rem;">CONFIGURAR ELEI√á√ÉO</h3>
                        <p style="font-size: 0.9rem; margin-bottom: 1rem;">Altere o modo da elei√ß√£o (Municipal, Estadual, Federal)</p>
                        <button class="btn btn-primary" onclick="mostrarSecao('config')">CONFIGURAR</button>
                    </div>
                    ` : ''}
                </div>
            `;
        }

        function mostrarAprovarCandidaturas() {
            const candidaturasPendentes = candidatos.filter(c => 
                c.status === 'Em an√°lise' && 
                (usuarioLogado.tipo === 'TSE' || c.estado === usuarioLogado.estado)
            );
            
            const modalTitulo = document.getElementById('modalTitulo');
            const modalContent = document.getElementById('modalContent');
            const modal = document.getElementById('adminModal');
            
            modalTitulo.textContent = 'APROVAR CANDIDATURAS PENDENTES';
            
            if (candidaturasPendentes.length === 0) {
                modalContent.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <p style="color: var(--cyber-blue); font-size: 1.2rem;">Nenhuma candidatura pendente!</p>
                        <p>Todas as candidaturas j√° foram analisadas.</p>
                    </div>
                `;
            } else {
                let html = '<div style="max-height: 400px; overflow-y: auto;">';
                
                candidaturasPendentes.forEach(candidato => {
                    const partidoInfo = partidos.find(p => p.sigla === candidato.partido);
                    html += `
                        <div class="cyber-border" style="padding: 1rem; margin-bottom: 1rem;">
                            <h3 style="color: var(--gold); margin-bottom: 0.5rem;">${candidato.nome}</h3>
                            <p><strong>Cargo:</strong> ${candidato.cargo}</p>
                            <p><strong>Local:</strong> ${candidato.cidade} / ${candidato.estado}</p>
                            <p><strong>Partido:</strong> ${candidato.partido} (${partidoInfo ? partidoInfo.ideologia : 'N/A'})</p>
                            ${candidato.manifesto ? `<p><strong>Manifesto:</strong> ${candidato.manifesto}</p>` : ''}
                            <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                                <button class="btn btn-success" onclick="aprovarCandidatura('${candidato.id}')">APROVAR</button>
                                <button class="btn btn-danger" onclick="mostrarFormRecusar('${candidato.id}')">RECUSAR</button>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                modalContent.innerHTML = html;
            }
            
            modal.classList.add('active');
        }

        function mostrarRecusarCandidaturas() {
            const candidaturasPendentes = candidatos.filter(c => 
                c.status === 'Em an√°lise' && 
                (usuarioLogado.tipo === 'TSE' || c.estado === usuarioLogado.estado)
            );
            
            const modalTitulo = document.getElementById('modalTitulo');
            const modalContent = document.getElementById('modalContent');
            const modal = document.getElementById('adminModal');
            
            modalTitulo.textContent = 'RECUSAR CANDIDATURAS';
            
            if (candidaturasPendentes.length === 0) {
                modalContent.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <p style="color: var(--cyber-blue); font-size: 1.2rem;">Nenhuma candidatura pendente!</p>
                        <p>Todas as candidaturas j√° foram analisadas.</p>
                    </div>
                `;
            } else {
                let html = `
                    <p style="margin-bottom: 1rem; color: var(--warning);">
                        ATEN√á√ÉO: Toda recusa deve ter um motivo justificado e registrado.
                    </p>
                    <div style="max-height: 300px; overflow-y: auto; margin-bottom: 1rem;">
                `;
                
                candidaturasPendentes.forEach(candidato => {
                    const partidoInfo = partidos.find(p => p.sigla === candidato.partido);
                    html += `
                        <div class="cyber-border" style="padding: 1rem; margin-bottom: 1rem;">
                            <h3 style="color: var(--gold); margin-bottom: 0.5rem;">${candidato.nome}</h3>
                            <p><strong>Cargo:</strong> ${candidato.cargo} | <strong>Local:</strong> ${candidato.cidade}/${candidato.estado}</p>
                            <p><strong>Partido:</strong> ${candidato.partido}</p>
                            <div class="form-group">
                                <label class="form-label">Motivo da Recusa</label>
                                <input type="text" class="form-input" id="motivo-${candidato.id}" placeholder="Digite o motivo da recusa" required>
                            </div>
                            <button class="btn btn-danger" onclick="recusarCandidatura('${candidato.id}')">CONFIRMAR RECUSA</button>
                        </div>
                    `;
                });
                
                html += '</div>';
                modalContent.innerHTML = html;
            }
            
            modal.classList.add('active');
        }

        function mostrarRecusados() {
            const candidaturasRecusadas = candidatos.filter(c => 
                c.status === 'Recusado' && 
                (usuarioLogado.tipo === 'TSE' || c.estado === usuarioLogado.estado)
            );
            
            const modalTitulo = document.getElementById('modalTitulo');
            const modalContent = document.getElementById('modalContent');
            const modal = document.getElementById('adminModal');
            
            modalTitulo.textContent = 'CANDIDATURAS RECUSADAS';
            
            if (candidaturasRecusadas.length === 0) {
                modalContent.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <p style="color: var(--cyber-blue); font-size: 1.2rem;">Nenhuma candidatura recusada!</p>
                    </div>
                `;
            } else {
                let html = '<div style="max-height: 400px; overflow-y: auto;">';
                
                candidaturasRecusadas.forEach(candidato => {
                    html += `
                        <div class="cyber-border" style="padding: 1rem; margin-bottom: 1rem;">
                            <h3 style="color: var(--danger); margin-bottom: 0.5rem;">${candidato.nome}</h3>
                            <p><strong>Cargo:</strong> ${candidato.cargo}</p>
                            <p><strong>Local:</strong> ${candidato.cidade} / ${candidato.estado}</p>
                            <p><strong>Partido:</strong> ${candidato.partido}</p>
                            <p><strong>Recusado por:</strong> ${candidato.recusadoPor || 'N/A'}</p>
                            <p><strong>Motivo:</strong> ${candidato.motivoRecusa || 'N/A'}</p>
                            <p><strong>Data:</strong> ${new Date(candidato.dataRecusa).toLocaleString() || 'N/A'}</p>
                        </div>
                    `;
                });
                
                html += '</div>';
                modalContent.innerHTML = html;
            }
            
            modal.classList.add('active');
        }

        function aprovarCandidatura(candidatoId) {
            const candidato = candidatos.find(c => c.id === candidatoId);
            if (!candidato) return;
            
            // Atualizar no Firebase
            database.ref('candidatos/' + candidatoId).update({
                status: 'Homologado',
                aprovadoPor: usuarioLogado.nome,
                dataAprovacao: new Date().toISOString()
            })
            .then(() => {
                // Registrar log
                registrarLog('aprovar', `Candidatura aprovada: ${candidato.nome} (${candidato.partido}) para ${candidato.cargo}`);
                
                alert('Candidatura aprovada com sucesso!');
                fecharModal();
                mostrarDashboardAdmin();
            })
            .catch(error => {
                alert('Erro ao aprovar candidatura: ' + error.message);
            });
        }

        function mostrarFormRecusar(candidatoId) {
            const modalContent = document.getElementById('modalContent');
            const candidato = candidatos.find(c => c.id === candidatoId);
            
            modalContent.innerHTML = `
                <div class="form-group">
                    <label class="form-label">CANDIDATO</label>
                    <input type="text" class="form-input" value="${candidato.nome}" readonly>
                </div>
                
                <div class="form-group">
                    <label class="form-label">CARGO</label>
                    <input type="text" class="form-input" value="${candidato.cargo}" readonly>
                </div>
                
                <div class="form-group">
                    <label class="form-label">PARTIDO</label>
                    <input type="text" class="form-input" value="${candidato.partido}" readonly>
                </div>
                
                <div class="form-group">
                    <label class="form-label">MOTIVO DA RECUSA *</label>
                    <textarea class="form-textarea" id="motivoRecusa" placeholder="Digite o motivo detalhado da recusa..." required></textarea>
                </div>
                
                <div class="form-group">
                    <button class="btn btn-danger" onclick="recusarCandidatura('${candidatoId}')">CONFIRMAR RECUSA</button>
                    <button class="btn btn-outline" onclick="mostrarAprovarCandidaturas()">VOLTAR</button>
                </div>
            `;
        }

        function recusarCandidatura(candidatoId) {
            const motivo = document.getElementById('motivoRecusa') || 
                          document.getElementById(`motivo-${candidatoId}`);
            
            if (!motivo || !motivo.value.trim()) {
                alert('Digite o motivo da recusa!');
                return;
            }
            
            const candidato = candidatos.find(c => c.id === candidatoId);
            if (!candidato) return;
            
            // Atualizar no Firebase
            database.ref('candidatos/' + candidatoId).update({
                status: 'Recusado',
                motivoRecusa: motivo.value,
                recusadoPor: usuarioLogado.nome,
                dataRecusa: new Date().toISOString()
            })
            .then(() => {
                // Registrar log
                registrarLog('recusar', `Candidatura recusada: ${candidato.nome} (${candidato.partido}) - Motivo: ${motivo.value}`);
                
                alert('Candidatura recusada com sucesso!');
                fecharModal();
                mostrarDashboardAdmin();
            })
            .catch(error => {
                alert('Erro ao recusar candidatura: ' + error.message);
            });
        }

        // Configura√ß√µes (apenas TSE)
        function alterarModoEleicao() {
            if (usuarioLogado?.tipo !== 'TSE') {
                mostrarMensagem('configMessage', 'Apenas o TSE Nacional pode alterar o modo da elei√ß√£o!', 'danger');
                return;
            }
            
            const novoModo = document.getElementById('configModoEleicao').value;
            
            // Atualizar no Firebase
            database.ref('configuracoes').update({
                modoEleicao: novoModo
            })
            .then(() => {
                modoEleicao = novoModo;
                document.getElementById('modoEleicao').textContent = novoModo.toUpperCase();
                
                // Registrar log
                registrarLog('config', `Modo da elei√ß√£o alterado para: ${novoModo}`);
                
                mostrarMensagem('configMessage', 'Modo da elei√ß√£o atualizado com sucesso!', 'success');
            })
            .catch(error => {
                mostrarMensagem('configMessage', 'Erro ao atualizar modo da elei√ß√£o: ' + error.message, 'danger');
            });
        }

        // Logs do Sistema
        function carregarLogs() {
            const tbody = document.getElementById('logsTable');
            tbody.innerHTML = '';
            
            // Ordenar logs por data (mais recente primeiro)
            const logsOrdenados = [...logs].sort((a, b) => 
                new Date(b.timestamp) - new Date(a.timestamp)
            );
            
            logsOrdenados.forEach(log => {
                const data = new Date(log.timestamp);
                const dataFormatada = data.toLocaleDateString('pt-BR') + ' ' + data.toLocaleTimeString('pt-BR');
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${dataFormatada}</td>
                    <td>${log.usuario || 'Sistema'}</td>
                    <td>${log.acao}</td>
                    <td>${log.detalhes || ''}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function filtrarLogs() {
            const tipo = document.getElementById('filterLogTipo').value;
            const usuario = document.getElementById('filterLogUsuario').value.toLowerCase();
            
            const logsFiltrados = logs.filter(log => {
                if (tipo && !log.acao.toLowerCase().includes(tipo.toLowerCase())) return false;
                if (usuario && !(log.usuario || '').toLowerCase().includes(usuario)) return false;
                return true;
            });
            
            const tbody = document.getElementById('logsTable');
            tbody.innerHTML = '';
            
            logsFiltrados.forEach(log => {
                const data = new Date(log.timestamp);
                const dataFormatada = data.toLocaleDateString('pt-BR') + ' ' + data.toLocaleTimeString('pt-BR');
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${dataFormatada}</td>
                    <td>${log.usuario || 'Sistema'}</td>
                    <td>${log.acao}</td>
                    <td>${log.detalhes || ''}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Fun√ß√µes auxiliares
        function registrarLog(acao, detalhes) {
            const log = {
                usuario: usuarioLogado ? usuarioLogado.nome : 'P√∫blico',
                acao: acao,
                detalhes: detalhes,
                timestamp: new Date().toISOString()
            };
            
            database.ref('logs').push(log);
        }

        function mostrarMensagem(elementId, mensagem, tipo) {
            const element = document.getElementById(elementId);
            const color = tipo === 'success' ? '#23d160' : 
                         tipo === 'warning' ? '#ffdd57' : '#ff3860';
            
            element.innerHTML = `
                <div style="background: rgba(${tipo === 'success' ? '35, 209, 96' : tipo === 'warning' ? '255, 221, 87' : '255, 56, 96'}, 0.2); 
                            border: 1px solid ${color}; 
                            padding: 1rem; 
                            border-radius: 8px;
                            color: ${color};">
                    ${mensagem}
                </div>
            `;
            
            if (tipo === 'success') {
                setTimeout(() => {
                    element.innerHTML = '';
                }, 5000);
            }
        }

        function fecharModal() {
            document.getElementById('adminModal').classList.remove('active');
        }

        // Fun√ß√µes das abas flutuantes
        function generateQuickReport() {
            const total = candidatos.length;
            const homologados = candidatos.filter(c => c.status === 'Homologado').length;
            const emAnalise = candidatos.filter(c => c.status === 'Em an√°lise').length;
            const recusados = candidatos.filter(c => c.status === 'Recusado').length;
            
            alert(`RELAT√ìRIO R√ÅPIDO:\n\n` +
                  `Total de Candidatos: ${total}\n` +
                  `Homologados: ${homologados}\n` +
                  `Em An√°lise: ${emAnalise}\n` +
                  `Recusados: ${recusados}\n` +
                  `Modo da Elei√ß√£o: ${modoEleicao}\n\n` +
                  `Data: ${new Date().toLocaleDateString('pt-BR')}`);
        }

        function showSystemAlerts() {
            const pendentes = candidatos.filter(c => c.status === 'Em an√°lise').length;
            const alertas = [];
            
            if (pendentes > 10) {
                alertas.push(`${pendentes} candidaturas pendentes de an√°lise`);
            }
            
            if (!usuarioLogado) {
                alertas.push('Voc√™ est√° no modo p√∫blico');
            } else {
                alertas.push(`Logado como: ${usuarioLogado.nome}`);
            }
            
            if (alertas.length === 0) {
                alert('‚úÖ Nenhum alerta no momento!');
            } else {
                alert('üîî ALERTAS DO SISTEMA:\n\n' + alertas.join('\n'));
            }
        }

        function showElectionMode() {
            alert(`üó≥Ô∏è MODO DA ELEI√á√ÉO ATUAL:\n\n` +
                  `üî∏ ${modoEleicao.toUpperCase()}\n\n` +
                  `${modoEleicao === 'Municipal' ? 'Elei√ß√£o para Prefeito e Vereadores' : 
                    modoEleicao === 'Estadual' ? 'Elei√ß√£o para Governador, Deputados Estaduais e Senadores' : 
                    'Elei√ß√£o para Presidente, Governadores, Deputados Federais e Senadores'}\n\n` +
                  `Apenas TSE Nacional pode alterar este modo.`);
        }

        function toggleQuickAccess() {
            if (usuarioLogado) {
                mostrarSecao('admin');
            } else {
                mostrarSecao('login');
            }
        }
                    
                    // Inicializar configura√ß√µes
                    database.ref('configuracoes').set({
                        modoEleicao: "Municipal"
                    });
                }
            });
        }

        // Inicializar dados de exemplo
        setTimeout(inicializarDadosExemplo, 1000);
    </script>
</body>
</html>
