<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSE RP BROOKASIL - Sistema Eleitoral Oficial</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --obsidian: #0a0a0a;
            --gold: #ffd700;
            --gold-light: #fff0a3;
            --gold-dark: #b8860b;
            --cyber-blue: #00f3ff;
            --cyber-pink: #ff00ff;
            --glass-dark: rgba(10, 10, 10, 0.9);
            --glass-light: rgba(255, 215, 0, 0.1);
            --danger: #ff3860;
            --success: #23d160;
            --warning: #ffdd57;
            --purple: #9d4edd;
            --teal: #00ffc3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--obsidian);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(255, 215, 0, 0.03) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(0, 243, 255, 0.03) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(255, 0, 255, 0.02) 0%, transparent 50%),
                linear-gradient(45deg, rgba(10, 10, 10, 0.95), rgba(20, 20, 20, 0.97));
            pointer-events: none;
            z-index: -2;
        }

        /* Scanlines mais suaves */
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                transparent 49%,
                rgba(0, 243, 255, 0.015) 49%,
                rgba(0, 243, 255, 0.015) 51%,
                transparent 51%
            );
            background-size: 100% 8px;
            pointer-events: none;
            z-index: -1;
            animation: scan 15s linear infinite;
        }

        @keyframes scan {
            0% { transform: translateY(0); }
            100% { transform: translateY(8px); }
        }

        /* Particle effect background */
        .particles {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--gold);
            border-radius: 50%;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(100vh) translateX(0); opacity: 0; }
            10% { opacity: 0.5; }
            90% { opacity: 0.5; }
            100% { transform: translateY(-100px) translateX(100px); opacity: 0; }
        }

        /* HEADER E NAVEGAÇÃO */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: var(--glass-dark);
            backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
            padding: 1.2rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--gold), var(--teal), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 1px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .logo-sub {
            font-size: 0.7rem;
            color: var(--cyber-blue);
            letter-spacing: 3px;
            opacity: 0.8;
        }

        /* SIDEBAR MELHORADA */
        .sidebar-container {
            position: fixed;
            left: 0;
            top: 80px;
            height: calc(100vh - 80px);
            z-index: 998;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .sidebar {
            width: 250px;
            height: 100%;
            background: var(--glass-dark);
            backdrop-filter: blur(20px) saturate(180%);
            border-right: 1px solid rgba(255, 215, 0, 0.2);
            padding: 2rem 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
        }

        .sidebar.hidden {
            transform: translateX(-100%);
            opacity: 0;
        }

        .sidebar-toggle {
            position: absolute;
            right: -20px;
            top: 20px;
            width: 20px;
            height: 60px;
            background: var(--glass-dark);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-left: none;
            border-radius: 0 10px 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--gold);
            transition: all 0.3s ease;
        }

        .sidebar-toggle:hover {
            background: rgba(255, 215, 0, 0.1);
            width: 25px;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.2rem;
            color: var(--gold-light);
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s ease;
            margin-bottom: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .sidebar-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(to bottom, var(--gold), var(--teal));
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .sidebar-item:hover::before,
        .sidebar-item.active::before {
            transform: translateX(0);
        }

        .sidebar-item:hover {
            background: linear-gradient(90deg, rgba(255, 215, 0, 0.05), transparent);
            transform: translateX(5px);
            color: var(--gold);
        }

        .sidebar-item.active {
            background: linear-gradient(90deg, rgba(255, 215, 0, 0.1), transparent);
            color: var(--gold);
        }

        .sidebar-item i {
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }

        /* CONTEÚDO PRINCIPAL */
        .main-content {
            margin-top: 80px;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 0;
            padding-left: 2rem;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease;
            max-width: 1400px;
            margin: 0 auto;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* CARDS GLASSMORPHISM */
        .card {
            background: var(--glass-dark);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 215, 0, 0.15);
            border-radius: 20px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .card:hover {
            border-color: var(--gold);
            box-shadow: 0 15px 50px rgba(255, 215, 0, 0.1);
            transform: translateY(-5px);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, 
                rgba(255, 215, 0, 0.03) 0%,
                rgba(0, 243, 255, 0.03) 50%,
                rgba(157, 78, 221, 0.03) 100%);
            z-index: -1;
        }

        .card-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            color: var(--gold);
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(255, 215, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .card-title i {
            font-size: 1.5rem;
        }

        /* STATS GRID */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, 
                rgba(255, 215, 0, 0.05), 
                rgba(0, 243, 255, 0.05));
            border: 1px solid rgba(255, 215, 0, 0.1);
            border-radius: 16px;
            padding: 1.8rem;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.1), 
                transparent);
            transition: left 0.6s;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: var(--gold);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.1);
        }

        .stat-number {
            font-family: 'Orbitron', sans-serif;
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--gold), var(--teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 1rem 0;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .stat-label {
            color: var(--cyber-blue);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
        }

        /* FILTROS */
        .filters {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .filter-label {
            color: var(--cyber-blue);
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-select, .filter-input {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 215, 0, 0.3);
            color: white;
            padding: 1rem 1.2rem;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: var(--teal);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.2);
        }

        /* BOTÕES */
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            font-size: 0.95rem;
            letter-spacing: 1px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: left 0.6s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--gold-dark), var(--gold));
            color: var(--obsidian);
            border: 1px solid var(--gold);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 215, 0, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
        }

        .btn-outline:hover {
            background: rgba(255, 215, 0, 0.1);
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 215, 0, 0.1);
        }

        .btn-danger {
            background: linear-gradient(45deg, #b3002d, var(--danger));
            color: white;
            border: 1px solid var(--danger);
        }

        .btn-success {
            background: linear-gradient(45deg, #008e46, var(--success));
            color: white;
            border: 1px solid var(--success);
        }

        /* FORMULÁRIOS */
        .form-group {
            margin-bottom: 2rem;
        }

        .form-label {
            display: block;
            color: var(--cyber-blue);
            margin-bottom: 0.8rem;
            font-weight: 600;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 1.2rem;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 10px;
            color: white;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--teal);
            box-shadow: 0 0 25px rgba(0, 243, 255, 0.2);
        }

        /* TABELAS */
        .table-container {
            overflow-x: auto;
            margin: 2rem 0;
            border-radius: 12px;
            border: 1px solid rgba(255, 215, 0, 0.1);
        }

        .data-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            background: rgba(0, 0, 0, 0.3);
        }

        .data-table th {
            background: linear-gradient(to bottom, 
                rgba(255, 215, 0, 0.2), 
                rgba(255, 215, 0, 0.1));
            color: var(--gold);
            padding: 1.5rem 1rem;
            text-align: left;
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 2px solid rgba(255, 215, 0, 0.3);
        }

        .data-table td {
            padding: 1.2rem 1rem;
            border-bottom: 1px solid rgba(255, 215, 0, 0.05);
            transition: background 0.3s ease;
        }

        .data-table tr {
            transition: all 0.3s ease;
        }

        .data-table tr:hover {
            background: rgba(255, 215, 0, 0.03);
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--glass-dark);
            backdrop-filter: blur(30px) saturate(180%);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 24px;
            padding: 3rem;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlide 0.3s ease;
        }

        @keyframes modalSlide {
            from { transform: translateY(-30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* LOGIN CARD */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
            padding: 2rem;
        }

        .login-card {
            background: var(--glass-dark);
            backdrop-filter: blur(30px) saturate(180%);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 24px;
            padding: 3rem;
            width: 100%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.6s ease;
        }

        /* RESPONSIVIDADE */
        @media (max-width: 1200px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }
            
            .main-content {
                padding: 1rem;
                margin-top: 120px;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .sidebar-container {
                display: none;
            }
            
            .main-content.expanded {
                margin-left: 0;
            }
        }

        @media (max-width: 480px) {
            .logo {
                font-size: 1.4rem;
            }
            
            .login-card {
                padding: 2rem;
            }
            
            .btn {
                padding: 0.8rem 1.2rem;
            }
        }

        /* ANIMAÇÕES */
        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        /* STATUS BADGES */
        .status-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .status-homologado {
            background: linear-gradient(45deg, rgba(35, 209, 96, 0.2), rgba(35, 209, 96, 0.1));
            color: var(--success);
            border: 1px solid rgba(35, 209, 96, 0.3);
        }

        .status-analise {
            background: linear-gradient(45deg, rgba(255, 221, 87, 0.2), rgba(255, 221, 87, 0.1));
            color: var(--warning);
            border: 1px solid rgba(255, 221, 87, 0.3);
        }

        .status-recusado {
            background: linear-gradient(45deg, rgba(255, 56, 96, 0.2), rgba(255, 56, 96, 0.1));
            color: var(--danger);
            border: 1px solid rgba(255, 56, 96, 0.3);
        }

        /* IDEOLOGIA TAGS */
        .ideologia-tag {
            display: inline-block;
            padding: 0.4rem 1rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .ideologia-direita {
            background: linear-gradient(45deg, rgba(65, 105, 225, 0.2), rgba(65, 105, 225, 0.1));
            color: #4169e1;
            border: 1px solid rgba(65, 105, 225, 0.3);
        }

        .ideologia-centro {
            background: linear-gradient(45deg, rgba(50, 205, 50, 0.2), rgba(50, 205, 50, 0.1));
            color: #32cd32;
            border: 1px solid rgba(50, 205, 50, 0.3);
        }

        .ideologia-esquerda {
            background: linear-gradient(45deg, rgba(220, 20, 60, 0.2), rgba(220, 20, 60, 0.1));
            color: #dc143c;
            border: 1px solid rgba(220, 20, 60, 0.3);
        }

        /* PARTIDO CARD */
        .partido-card {
            background: rgba(255, 215, 0, 0.03);
            border: 1px solid rgba(255, 215, 0, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .partido-card:hover {
            background: rgba(255, 215, 0, 0.05);
            border-color: rgba(255, 215, 0, 0.3);
            transform: translateX(5px);
        }

        .partido-numero {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, var(--gold), var(--gold-dark));
            color: var(--obsidian);
            border-radius: 12px;
            font-weight: 900;
            font-size: 1.2rem;
            margin-right: 1rem;
        }

        /* AÇÕES RÁPIDAS */
        .acoes-rapidas {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .acao-rapida {
            background: linear-gradient(135deg, 
                rgba(255, 215, 0, 0.05), 
                rgba(0, 243, 255, 0.05));
            border: 1px solid rgba(255, 215, 0, 0.1);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .acao-rapida:hover {
            transform: translateY(-10px) scale(1.05);
            border-color: var(--teal);
            box-shadow: 0 15px 40px rgba(0, 243, 255, 0.1);
        }

        .acao-rapida i {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--gold), var(--teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* MENSAGENS */
        .message {
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1rem 0;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .message-success {
            background: linear-gradient(45deg, rgba(35, 209, 96, 0.1), transparent);
            border: 1px solid rgba(35, 209, 96, 0.3);
            color: var(--success);
        }

        .message-error {
            background: linear-gradient(45deg, rgba(255, 56, 96, 0.1), transparent);
            border: 1px solid rgba(255, 56, 96, 0.3);
            color: var(--danger);
        }

        .message-warning {
            background: linear-gradient(45deg, rgba(255, 221, 87, 0.1), transparent);
            border: 1px solid rgba(255, 221, 87, 0.3);
            color: var(--warning);
        }

        /* LOADER */
        .loader {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 215, 0, 0.1);
            border-top: 3px solid var(--gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* NÚMERO DO CANDIDATO */
        .candidate-number {
            display: inline-block;
            background: linear-gradient(45deg, var(--gold-dark), var(--gold));
            color: var(--obsidian);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            font-size: 1.2rem;
            margin-right: 1rem;
        }

        /* INFO BOX */
        .info-box {
            background: linear-gradient(135deg, 
                rgba(0, 243, 255, 0.05), 
                rgba(157, 78, 221, 0.05));
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        /* COUNTER */
        .counter {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--teal), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body>
    <!-- Efeitos de fundo -->
    <div class="scanlines"></div>
    <div class="particles" id="particles"></div>
    
    <!-- Header -->
    <header class="header">
        <div class="logo-container">
            <div>
                <div class="logo">TSE RP BROOKASIL</div>
                <div class="logo-sub">SISTEMA ELEITORAL OFICIAL</div>
            </div>
        </div>
        
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="mostrarSecao('dashboard')">
                <i class="fas fa-chart-bar"></i> DASHBOARD
            </button>
            <button class="nav-tab" onclick="mostrarSecao('candidatos')">
                <i class="fas fa-users"></i> CANDIDATOS
            </button>
            <button class="nav-tab" onclick="mostrarSecao('candidatura')">
                <i class="fas fa-user-plus"></i> CANDIDATAR-SE
            </button>
            <button class="nav-tab" onclick="mostrarSecao('partidos')">
                <i class="fas fa-landmark"></i> PARTIDOS
            </button>
            <button class="nav-tab" onclick="mostrarSecao('login')" id="loginTab">
                <i class="fas fa-sign-in-alt"></i> LOGIN
            </button>
            <div id="adminIndicator" class="admin-indicator" style="display: none;">
                <i class="fas fa-user-shield"></i> MODO ADMIN
            </div>
        </div>
    </header>
    
    <!-- Sidebar -->
    <div class="sidebar-container">
        <div class="sidebar" id="sidebar">
            <div class="sidebar-item active" onclick="mostrarSecao('dashboard')">
                <i class="fas fa-chart-bar"></i>
                <span>Dashboard</span>
            </div>
            <div class="sidebar-item" onclick="mostrarSecao('candidatos')">
                <i class="fas fa-users"></i>
                <span>Candidatos</span>
            </div>
            <div class="sidebar-item" onclick="mostrarSecao('candidatura')">
                <i class="fas fa-user-plus"></i>
                <span>Candidatar-se</span>
            </div>
            <div class="sidebar-item" onclick="mostrarSecao('partidos')">
                <i class="fas fa-landmark"></i>
                <span>Partidos</span>
            </div>
            <div class="sidebar-item" onclick="mostrarSecao('admin')" id="sidebarAdmin" style="display: none;">
                <i class="fas fa-user-shield"></i>
                <span>Administração</span>
            </div>
            <div class="sidebar-item" onclick="mostrarSecao('tres')">
                <i class="fas fa-balance-scale"></i>
                <span>TREs</span>
            </div>
            <div class="sidebar-item" onclick="mostrarSecao('logs')" id="sidebarLogs" style="display: none;">
                <i class="fas fa-history"></i>
                <span>Logs do Sistema</span>
            </div>
            <div class="sidebar-item" onclick="mostrarSecao('config')" id="sidebarConfig" style="display: none;">
                <i class="fas fa-cog"></i>
                <span>Configurações</span>
            </div>
            <div class="sidebar-item" onclick="toggleSidebar()">
                <i class="fas fa-eye-slash"></i>
                <span>Ocultar Sidebar</span>
            </div>
        </div>
        <div class="sidebar-toggle" onclick="toggleSidebar()">
            <i class="fas fa-chevron-left"></i>
        </div>
    </div>
    
    <!-- Conteúdo Principal -->
    <main class="main-content" id="mainContent">
        <!-- Dashboard -->
        <section id="dashboard" class="section active">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-chart-bar"></i>
                    DASHBOARD ELEITORAL - BROOKASIL
                </h2>
                
                <div class="info-box">
                    <h3><i class="fas fa-info-circle"></i> SISTEMA ELEITORAL OFICIAL</h3>
                    <p><strong>Modo da Eleição Atual:</strong> <span id="modoEleicao" class="counter">MUNICIPAL</span></p>
                    <p>Sistema desenvolvido para garantir transparência e segurança no processo eleitoral da República de Brookasil.</p>
                </div>
                
                <div class="acoes-rapidas">
                    <div class="acao-rapida" onclick="mostrarSecao('candidatura')">
                        <i class="fas fa-user-plus"></i>
                        <h4>Candidatar-se</h4>
                        <p>Candidate-se para qualquer cargo eletivo</p>
                    </div>
                    <div class="acao-rapida" onclick="mostrarSecao('candidatos')">
                        <i class="fas fa-users"></i>
                        <h4>Ver Candidatos</h4>
                        <p>Consulte candidatos homologados</p>
                    </div>
                    <div class="acao-rapida" onclick="mostrarSecao('partidos')">
                        <i class="fas fa-landmark"></i>
                        <h4>Partidos</h4>
                        <p>Conheça os partidos políticos</p>
                    </div>
                    <div class="acao-rapida" onclick="mostrarSecao('tres')">
                        <i class="fas fa-balance-scale"></i>
                        <h4>TREs</h4>
                        <p>Informações dos Tribunais Regionais</p>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Candidatos Totais</div>
                        <div class="stat-number" id="totalCandidatos">0</div>
                        <div class="stat-desc">Sistema Nacional</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Homologados</div>
                        <div class="stat-number" id="homologados">0</div>
                        <div class="stat-desc">Aprovados pelo TSE/TRE</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Em Análise</div>
                        <div class="stat-number" id="emAnalise">0</div>
                        <div class="stat-desc">Aguardando análise</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Recusados</div>
                        <div class="stat-number" id="recusados">0</div>
                        <div class="stat-desc">Com motivo registrado</div>
                    </div>
                </div>
                
                <div class="charts-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem; margin-top: 2rem;">
                    <div class="chart-container">
                        <h3 class="card-title"><i class="fas fa-chart-pie"></i> IDEOLOGIAS</h3>
                        <canvas id="ideologiaChart"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <h3 class="card-title"><i class="fas fa-chart-bar"></i> DISTRIBUIÇÃO POR CARGO</h3>
                        <canvas id="cargoChart"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <h3 class="card-title"><i class="fas fa-map"></i> DISTRIBUIÇÃO POR ESTADO</h3>
                        <canvas id="estadoChart"></canvas>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Candidatos -->
        <section id="candidatos" class="section">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-users"></i>
                    CANDIDATOS HOMOLOGADOS
                </h2>
                
                <div class="filters">
                    <h3><i class="fas fa-filter"></i> FILTROS AVANÇADOS</h3>
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label class="filter-label"><i class="fas fa-map"></i> ESTADO</label>
                            <select class="filter-select" id="filterEstado">
                                <option value="">Todos os Estados</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label"><i class="fas fa-city"></i> CIDADE</label>
                            <select class="filter-select" id="filterCidade">
                                <option value="">Todas as Cidades</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label"><i class="fas fa-user-tie"></i> CARGO</label>
                            <select class="filter-select" id="filterCargo">
                                <option value="">Todos os Cargos</option>
                                <option value="Prefeito">Prefeito</option>
                                <option value="Vereador">Vereador</option>
                                <option value="Governador">Governador</option>
                                <option value="Presidente">Presidente</option>
                                <option value="Senador">Senador</option>
                                <option value="Deputado Federal">Deputado Federal</option>
                                <option value="Deputado Estadual">Deputado Estadual</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label"><i class="fas fa-flag"></i> PARTIDO</label>
                            <select class="filter-select" id="filterPartido">
                                <option value="">Todos os Partidos</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button class="btn btn-primary" onclick="filtrarCandidatos()">
                            <i class="fas fa-filter"></i> APLICAR FILTROS
                        </button>
                        <button class="btn btn-outline" onclick="resetarFiltros()">
                            <i class="fas fa-trash"></i> LIMPAR FILTROS
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>NÚMERO</th>
                                <th>NOME</th>
                                <th>CARGO</th>
                                <th>PARTIDO</th>
                                <th>LOCALIDADE</th>
                                <th>IDEOLOGIA</th>
                                <th>STATUS</th>
                                <th>AÇÕES</th>
                            </tr>
                        </thead>
                        <tbody id="candidatosTable">
                            <!-- Dados carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <div id="candidatosMessage" class="message" style="display: none;"></div>
            </div>
        </section>
        
        <!-- Candidatura -->
        <section id="candidatura" class="section">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-user-plus"></i>
                    FORMULÁRIO DE CANDIDATURA
                </h2>
                
                <div class="info-box">
                    <h3><i class="fas fa-info-circle"></i> INFORMAÇÕES IMPORTANTES</h3>
                    <p>• Todos os campos marcados com * são obrigatórios<br>
                    • Sua candidatura será analisada pelo TRE correspondente<br>
                    • O processo de homologação pode levar até 72 horas<br>
                    • Mantenha seus dados atualizados</p>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-user"></i> NOME COMPLETO *</label>
                    <input type="text" class="form-input" id="candidatoNome" placeholder="Digite seu nome completo">
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-id-card"></i> CPF (Apenas números) *</label>
                    <input type="text" class="form-input" id="candidatoCPF" placeholder="000.000.000-00" maxlength="14">
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-envelope"></i> E-MAIL *</label>
                    <input type="email" class="form-input" id="candidatoEmail" placeholder="seu.email@exemplo.com">
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-phone"></i> TELEFONE *</label>
                    <input type="text" class="form-input" id="candidatoTelefone" placeholder="(00) 00000-0000">
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-map"></i> ESTADO *</label>
                    <select class="form-select" id="candidatoEstado" onchange="carregarCidadesCandidatura()">
                        <option value="">Selecione um estado</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-city"></i> CIDADE *</label>
                    <select class="form-select" id="candidatoCidade">
                        <option value="">Selecione uma cidade</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-user-tie"></i> CARGO *</label>
                    <select class="form-select" id="candidatoCargo" onchange="gerarNumeroCandidato()">
                        <option value="">Selecione um cargo</option>
                        <option value="Prefeito">Prefeito</option>
                        <option value="Vereador">Vereador</option>
                        <option value="Governador">Governador</option>
                        <option value="Presidente">Presidente</option>
                        <option value="Senador">Senador</option>
                        <option value="Deputado Federal">Deputado Federal</option>
                        <option value="Deputado Estadual">Deputado Estadual</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-flag"></i> PARTIDO *</label>
                    <select class="form-select" id="candidatoPartido" onchange="gerarNumeroCandidato(); atualizarInfoPartido()">
                        <option value="">Selecione um partido</option>
                    </select>
                    <div id="infoPartido" style="margin-top: 1rem; display: none;"></div>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-hashtag"></i> NÚMERO DO CANDIDATO *</label>
                    <input type="text" class="form-input" id="candidatoNumero" placeholder="Número será gerado automaticamente" readonly>
                    <small style="color: var(--cyber-blue); display: block; margin-top: 0.5rem;">
                        <i class="fas fa-info-circle"></i> Número gerado automaticamente baseado no cargo e partido
                    </small>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-file-alt"></i> MANIFESTO / PROPOSTAS *</label>
                    <textarea class="form-textarea" id="candidatoManifesto" placeholder="Descreva suas propostas e ideais para a população..." rows="6"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-briefcase"></i> EXPERIÊNCIA POLÍTICA (opcional)</label>
                    <textarea class="form-textarea" id="candidatoExperiencia" placeholder="Descreva sua experiência política anterior, se houver..." rows="4"></textarea>
                </div>
                
                <div class="form-group">
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="enviarCandidatura()">
                            <i class="fas fa-paper-plane"></i> ENVIAR CANDIDATURA
                        </button>
                        <button class="btn btn-outline" onclick="limparFormulario()">
                            <i class="fas fa-trash"></i> LIMPAR FORMULÁRIO
                        </button>
                        <button class="btn btn-outline" onclick="mostrarSecao('candidatos')">
                            <i class="fas fa-eye"></i> VER CANDIDATOS
                        </button>
                    </div>
                </div>
                
                <div id="candidaturaMessage" class="message" style="display: none;"></div>
            </div>
        </section>
        
        <!-- Partidos -->
        <section id="partidos" class="section">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-landmark"></i>
                    PARTIDOS POLÍTICOS REGISTRADOS
                </h2>
                
                <div class="filters" style="margin-bottom: 2rem;">
                    <h3><i class="fas fa-filter"></i> FILTRAR POR IDEOLOGIA</h3>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-outline" onclick="filtrarPartidos('todos')">
                            <i class="fas fa-list"></i> Todos
                        </button>
                        <button class="btn btn-outline" onclick="filtrarPartidos('Direita')" style="color: #4169e1; border-color: #4169e1;">
                            <i class="fas fa-arrow-right"></i> Direita
                        </button>
                        <button class="btn btn-outline" onclick="filtrarPartidos('Centro')" style="color: #32cd32; border-color: #32cd32;">
                            <i class="fas fa-minus"></i> Centro
                        </button>
                        <button class="btn btn-outline" onclick="filtrarPartidos('Esquerda')" style="color: #dc143c; border-color: #dc143c;">
                            <i class="fas fa-arrow-left"></i> Esquerda
                        </button>
                    </div>
                </div>
                
                <div id="listaPartidos">
                    <!-- Lista de partidos carregada via JavaScript -->
                </div>
            </div>
        </section>
        
        <!-- Login -->
        <section id="login" class="section">
            <div class="login-container">
                <div class="login-card">
                    <h2 class="card-title">
                        <i class="fas fa-user-shield"></i>
                        ACESSO ADMINISTRATIVO
                    </h2>
                    <p class="logo-sub" style="margin-bottom: 2rem;">TSE Nacional, TREs Estaduais e Municipais</p>
                    
                    <div class="form-group">
                        <label class="form-label"><i class="fas fa-user-tag"></i> TIPO DE ACESSO</label>
                        <select class="form-select" id="adminType">
                            <option value="">Selecione o tipo de acesso</option>
                            <option value="TSE">TSE Nacional - Brookasil</option>
                            <optgroup label="TREs Estaduais">
                                <option value="TRE_Brookhaven">TRE Brookhaven (Estado)</option>
                                <option value="TRE_Novacore">TRE Novacore (Estado)</option>
                                <option value="TRE_Casteriber">TRE Casteríber (Estado)</option>
                                <option value="TRE_Fortemega">TRE Fortemega (Estado)</option>
                                <option value="TRE_Floremix">TRE Florêmix (Estado)</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label"><i class="fas fa-key"></i> SENHA DE ACESSO *</label>
                        <input type="password" class="form-input" id="adminPassword" placeholder="Digite a senha de acesso">
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="realizarLogin()">
                            <i class="fas fa-sign-in-alt"></i> ACESSAR SISTEMA
                        </button>
                    </div>
                    
                    <div id="senhasDicas" style="margin-top: 2rem; padding: 1.5rem; background: rgba(0,0,0,0.3); border-radius: 10px; display: none;">
                        <h4 style="color: var(--gold); margin-bottom: 1rem;"><i class="fas fa-info-circle"></i> INFORMAÇÕES DE ACESSO</h4>
                        <p><strong>TSE Nacional:</strong> Apenas o Presidente do TSE tem acesso completo ao sistema e pode ver senhas.</p>
                        <p><strong>TREs:</strong> Cada tribunal tem acesso apenas às suas jurisdições.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Admin -->
        <section id="admin" class="section">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-user-shield"></i>
                    PAINEL ADMINISTRATIVO - <span id="adminTitulo"></span>
                </h2>
                
                <div id="adminInfo" style="margin-bottom: 2rem;"></div>
                
                <div class="acoes-rapidas">
                    <div class="acao-rapida" onclick="mostrarAprovarCandidaturas()">
                        <i class="fas fa-check-circle"></i>
                        <h4>Aprovar Candidaturas</h4>
                        <p>Analise e aprove candidaturas pendentes</p>
                    </div>
                    
                    <div class="acao-rapida" onclick="mostrarRecusarCandidaturas()">
                        <i class="fas fa-times-circle"></i>
                        <h4>Recusar Candidaturas</h4>
                        <p>Recuse com justificativa obrigatória</p>
                    </div>
                    
                    <div class="acao-rapida" onclick="mostrarRecusados()">
                        <i class="fas fa-file-excel"></i>
                        <h4>Ver Recusados</h4>
                        <p>Consulte candidaturas recusadas</p>
                    </div>
                    
                    <div class="acao-rapida" onclick="mostrarSecao('logs')">
                        <i class="fas fa-history"></i>
                        <h4>Logs do Sistema</h4>
                        <p>Registro de todas as ações</p>
                    </div>
                </div>
                
                <div id="adminContent">
                    <!-- Conteúdo administrativo será carregado aqui -->
                </div>
                
                <div style="margin-top: 2rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button class="btn btn-outline" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> SAIR DO SISTEMA
                    </button>
                    <button class="btn btn-outline" onclick="mostrarSecao('dashboard')">
                        <i class="fas fa-chart-bar"></i> VOLTAR AO DASHBOARD
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Configurações -->
        <section id="config" class="section">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-cog"></i>
                    CONFIGURAÇÕES DO SISTEMA
                </h2>
                
                <div class="info-box">
                    <p><i class="fas fa-shield-alt"></i> <strong>Apenas TSE Nacional</strong> pode alterar estas configurações</p>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-vote-yea"></i> MODO DA ELEIÇÃO *</label>
                    <select class="form-select" id="configModoEleicao">
                        <option value="Municipal">🏙️ Municipal (Prefeito e Vereadores)</option>
                        <option value="Estadual">🏛️ Estadual (Governador, Deputados Estaduais e Senadores)</option>
                        <option value="Federal">🇧🇷 Federal (Presidente, Deputados Federais e Senadores)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-calendar-alt"></i> PRAZO PARA CANDIDATURAS (dias)</label>
                    <input type="number" class="form-input" id="configPrazoCandidaturas" value="30" min="1" max="365">
                </div>
                
                <div class="form-group">
                    <label class="form-label"><i class="fas fa-power-off"></i> STATUS DO SISTEMA</label>
                    <select class="form-select" id="configStatusSistema">
                        <option value="ativo">✅ Ativo</option>
                        <option value="manutencao">🔧 Em Manutenção</option>
                        <option value="fechado">🔒 Fechado</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <button class="btn btn-primary" onclick="salvarConfiguracoes()">
                        <i class="fas fa-save"></i> SALVAR CONFIGURAÇÕES
                    </button>
                </div>
                
                <div id="configMessage" class="message" style="display: none;"></div>
                
                <div class="info-box" style="margin-top: 2rem;">
                    <h3><i class="fas fa-exclamation-triangle"></i> AÇÕES CRÍTICAS</h3>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1rem;">
                        <button class="btn btn-danger" onclick="exportarBackup()">
                            <i class="fas fa-download"></i> EXPORTAR BACKUP
                        </button>
                        <button class="btn btn-danger" onclick="importarBackup()">
                            <i class="fas fa-upload"></i> IMPORTAR BACKUP
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Logs -->
        <section id="logs" class="section">
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-history"></i>
                    LOGS DO SISTEMA
                </h2>
                
                <div class="filters" style="margin-bottom: 2rem;">
                    <h3><i class="fas fa-filter"></i> FILTROS AVANÇADOS</h3>
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label class="filter-label"><i class="fas fa-tag"></i> TIPO DE AÇÃO</label>
                            <select class="filter-select" id="filterLogTipo">
                                <option value="">Todos os Tipos</option>
                                <option value="candidatura">Nova Candidatura</option>
                                <option value="aprovar">Aprovação</option>
                                <option value="recusar">Recusa</option>
                                <option value="login">Login</option>
                                <option value="logout">Logout</option>
                                <option value="config">Configuração</option>
                                <option value="sistema">Sistema</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label"><i class="fas fa-user"></i> USUÁRIO</label>
                            <input type="text" class="filter-input" id="filterLogUsuario" placeholder="Filtrar por usuário">
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button class="btn btn-primary" onclick="filtrarLogs()">
                            <i class="fas fa-filter"></i> FILTRAR LOGS
                        </button>
                        <button class="btn btn-outline" onclick="resetarFiltrosLogs()">
                            <i class="fas fa-trash"></i> LIMPAR FILTROS
                        </button>
                        <button class="btn btn-outline" onclick="exportarLogs()">
                            <i class="fas fa-download"></i> EXPORTAR LOGS
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>DATA/HORA</th>
                                <th>USUÁRIO</th>
                                <th>AÇÃO</th>
                                <th>DETALHES</th>
                            </tr>
                        </thead>
                        <tbody id="logsTable">
                            <!-- Logs carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 1rem; display: flex; justify-content: space-between; align-items: center;">
                    <span style="color: var(--cyber-blue);">Total de logs: <span id="totalLogs" class="counter">0</span></span>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Modal -->
    <div id="adminModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="fecharModal()" style="position: absolute; top: 1rem; right: 1rem; background: transparent; border: none; color: var(--gold); font-size: 1.5rem; cursor: pointer;">×</button>
            <h2 class="card-title" id="modalTitulo"></h2>
            <div id="modalContent">
                <!-- Conteúdo do modal será carregado aqui -->
            </div>
        </div>
    </div>
    
    <script>
        // ============================================
        // SISTEMA DE SEGURANÇA - SENHAS CRIPTOGRAFADAS
        // ============================================

        // Função para criptografar senhas (simplificada para demo)
        function encryptPassword(password) {
            // Em um sistema real, use uma biblioteca de criptografia adequada
            let encrypted = '';
            for (let i = 0; i < password.length; i++) {
                encrypted += String.fromCharCode(password.charCodeAt(i) + 3);
            }
            return btoa(encrypted);
        }

        function decryptPassword(encrypted) {
            // Apenas o TSE pode descriptografar
            try {
                const decoded = atob(encrypted);
                let decrypted = '';
                for (let i = 0; i < decoded.length; i++) {
                    decrypted += String.fromCharCode(decoded.charCodeAt(i) - 3);
                }
                return decrypted;
            } catch (e) {
                return null;
            }
        }

        // ============================================
        // DADOS DO SISTEMA (SENHAS CRIPTOGRAFADAS)
        // ============================================

        // Estados e Cidades (sem senhas expostas)
        const estados = [
            { 
                nome: "Brookhaven", 
                tre: "Tutu Protásio",
                senha: "dwxv%Nlpdq", // tutuBH criptografado
                cidades: [
                    { nome: "Cidade Eleitoral", tre: "Tutu Protásio", senha: "dwxv%FGH5" },
                    { nome: "Liberty City", tre: "Ronaldo Caiado", senha: "fdlgr%LC5" }
                ]
            },
            { 
                nome: "Novacore", 
                tre: "William Harris",
                senha: "zlooodp%1&", // williamNC criptografado
                cidades: [
                    { nome: "Nexaville", tre: "William Harris", senha: "zlooodp%1495" },
                    { nome: "Solária", tre: "Ryan Mendonça", senha: "udbq%6$5" }
                ]
            }
        ];

        // Partidos Políticos com limites por cargo
        const partidos = [
            // DIREITA
            { nome: "Partido Liberal", sigla: "PL", numero: 22, ideologia: "Direita", cor: "#4169e1" },
            { nome: "Progressistas", sigla: "PP", numero: 11, ideologia: "Direita", cor: "#0000cd" },
            { nome: "Republicanos", sigla: "Republicanos", numero: 10, ideologia: "Direita", cor: "#191970" },
            
            // CENTRO
            { nome: "Movimento Democrático Brookasileiro", sigla: "MDB", numero: 15, ideologia: "Centro", cor: "#32cd32" },
            { nome: "União Brasil", sigla: "UNIÃO", numero: 44, ideologia: "Centro", cor: "#90ee90" },
            
            // ESQUERDA
            { nome: "Partido dos Trabalhadores", sigla: "PT", numero: 13, ideologia: "Esquerda", cor: "#dc143c" },
            { nome: "Partido Socialismo e Liberdade", sigla: "PSOL", numero: 50, ideologia: "Esquerda", cor: "#ff0000" }
        ];

        // Configuração de dígitos por cargo
        const digitosPorCargo = {
            "Prefeito": 2,
            "Vereador": 5,
            "Presidente": 2,
            "Governador": 2,
            "Senador": 3,
            "Deputado Federal": 4,
            "Deputado Estadual": 5
        };

        // Limites por partido
        const limitesPorCargo = {
            "Prefeito": { porPartido: { cidade: 1 } },
            "Vereador": { porPartido: { cidade: 4 } },
            "Presidente": { porPartido: { pais: 1 } },
            "Governador": { porPartido: { estado: 1 } },
            "Senador": { porPartido: { estado: 4 } },
            "Deputado Federal": { porPartido: { cidade: 4 } },
            "Deputado Estadual": { porPartido: { estado: 4 } }
        };

        // ============================================
        // ESTADO DA APLICAÇÃO
        // ============================================

        let usuarioLogado = null;
        let candidatos = [];
        let logs = [];
        let configuracoes = {
            modoEleicao: "Municipal",
            prazoCandidaturas: 30,
            statusSistema: "ativo",
            dataInicio: new Date().toISOString()
        };

        // ============================================
        // INICIALIZAÇÃO
        // ============================================

        document.addEventListener('DOMContentLoaded', function() {
            inicializarDados();
            inicializarEventos();
            carregarDadosLocalStorage();
            criarParticulas();
            
            // Verificar se há usuário logado
            const savedUser = localStorage.getItem('tse_usuario');
            if (savedUser) {
                usuarioLogado = JSON.parse(savedUser);
                entrarModoAdmin();
            }
        });

        function criarParticulas() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 20}s`;
                particle.style.opacity = Math.random() * 0.3 + 0.1;
                container.appendChild(particle);
            }
        }

        function inicializarDados() {
            // Popular selects de estados
            const selectEstado = document.getElementById('filterEstado');
            const selectCandidatoEstado = document.getElementById('candidatoEstado');
            
            estados.forEach(estado => {
                const option1 = document.createElement('option');
                option1.value = estado.nome;
                option1.textContent = estado.nome;
                selectEstado.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = estado.nome;
                option2.textContent = estado.nome;
                selectCandidatoEstado.appendChild(option2);
            });
            
            // Popular selects de partidos
            const selectPartido = document.getElementById('filterPartido');
            const selectCandidatoPartido = document.getElementById('candidatoPartido');
            
            partidos.forEach(partido => {
                const option1 = document.createElement('option');
                option1.value = partido.sigla;
                option1.textContent = `${partido.sigla} - ${partido.nome}`;
                selectPartido.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = partido.sigla;
                option2.textContent = `${partido.sigla} - ${partido.nome}`;
                selectCandidatoPartido.appendChild(option2);
            });
        }

        function inicializarEventos() {
            // Formatação de CPF
            document.getElementById('candidatoCPF').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 11) value = value.substring(0, 11);
                
                if (value.length > 9) {
                    value = value.replace(/^(\d{3})(\d{3})(\d{3})(\d{2}).*/, '$1.$2.$3-$4');
                } else if (value.length > 6) {
                    value = value.replace(/^(\d{3})(\d{3})(\d{0,3}).*/, '$1.$2.$3');
                } else if (value.length > 3) {
                    value = value.replace(/^(\d{3})(\d{0,3}).*/, '$1.$2');
                }
                e.target.value = value;
            });
            
            // Formatação de telefone
            document.getElementById('candidatoTelefone').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 11) value = value.substring(0, 11);
                
                if (value.length > 10) {
                    value = value.replace(/^(\d{2})(\d{5})(\d{4}).*/, '($1) $2-$3');
                } else if (value.length > 6) {
                    value = value.replace(/^(\d{2})(\d{5})(\d{0,4}).*/, '($1) $2-$3');
                } else if (value.length > 2) {
                    value = value.replace(/^(\d{2})(\d{0,5}).*/, '($1) $2');
                }
                e.target.value = value;
            });
        }

        function carregarDadosLocalStorage() {
            const candidatosSalvos = localStorage.getItem('tse_candidatos');
            if (candidatosSalvos) {
                candidatos = JSON.parse(candidatosSalvos);
            }
            
            const logsSalvos = localStorage.getItem('tse_logs');
            if (logsSalvos) {
                logs = JSON.parse(logsSalvos);
            }
            
            const configSalvas = localStorage.getItem('tse_configuracoes');
            if (configSalvas) {
                configuracoes = JSON.parse(configSalvas);
                document.getElementById('modoEleicao').textContent = configuracoes.modoEleicao.toUpperCase();
                document.getElementById('configModoEleicao').value = configuracoes.modoEleicao;
                document.getElementById('configPrazoCandidaturas').value = configuracoes.prazoCandidaturas;
                document.getElementById('configStatusSistema').value = configuracoes.statusSistema;
            }
            
            atualizarDashboard();
        }

        // ============================================
        // FUNÇÕES DA SIDEBAR
        // ============================================

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const toggleIcon = document.querySelector('.sidebar-toggle i');
            
            sidebar.classList.toggle('hidden');
            mainContent.classList.toggle('expanded');
            
            if (sidebar.classList.contains('hidden')) {
                toggleIcon.className = 'fas fa-chevron-right';
            } else {
                toggleIcon.className = 'fas fa-chevron-left';
            }
            
            localStorage.setItem('sidebarHidden', sidebar.classList.contains('hidden'));
        }

        // ============================================
        // NAVEGAÇÃO
        // ============================================

        function mostrarSecao(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.add('active');
                
                const sidebarItem = document.querySelector(`.sidebar-item[onclick*="${sectionId}"]`);
                if (sidebarItem) {
                    sidebarItem.classList.add('active');
                }
                
                switch(sectionId) {
                    case 'dashboard':
                        atualizarDashboard();
                        break;
                    case 'candidatos':
                        carregarCandidatosPublicos();
                        break;
                    case 'partidos':
                        carregarListaPartidos();
                        break;
                    case 'admin':
                        if (usuarioLogado) mostrarDashboardAdmin();
                        break;
                    case 'logs':
                        carregarLogs();
                        break;
                }
            }
        }

        // ============================================
        // DASHBOARD E GRÁFICOS
        // ============================================

        function atualizarDashboard() {
            const total = candidatos.length;
            const homologados = candidatos.filter(c => c.status === 'Homologado').length;
            const emAnalise = candidatos.filter(c => c.status === 'Em análise').length;
            const recusados = candidatos.filter(c => c.status === 'Recusado').length;
            
            document.getElementById('totalCandidatos').textContent = total;
            document.getElementById('homologados').textContent = homologados;
            document.getElementById('emAnalise').textContent = emAnalise;
            document.getElementById('recusados').textContent = recusados;
            
            atualizarGraficos();
        }

        function atualizarGraficos() {
            // Gráfico de ideologias
            const ideologiaData = {
                'Direita': candidatos.filter(c => {
                    const partido = partidos.find(p => p.sigla === c.partido);
                    return partido && partido.ideologia === 'Direita';
                }).length,
                'Centro': candidatos.filter(c => {
                    const partido = partidos.find(p => p.sigla === c.partido);
                    return partido && partido.ideologia === 'Centro';
                }).length,
                'Esquerda': candidatos.filter(c => {
                    const partido = partidos.find(p => p.sigla === c.partido);
                    return partido && partido.ideologia === 'Esquerda';
                }).length
            };
            
            const ideologiaCtx = document.getElementById('ideologiaChart').getContext('2d');
            new Chart(ideologiaCtx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(ideologiaData),
                    datasets: [{
                        data: Object.values(ideologiaData),
                        backgroundColor: ['#4169e1', '#32cd32', '#dc143c'],
                        borderColor: ['#fff', '#fff', '#fff'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffd700',
                                font: {
                                    family: 'Orbitron'
                                }
                            }
                        }
                    }
                }
            });
            
            // Gráfico de cargos
            const cargoData = {};
            candidatos.forEach(c => {
                cargoData[c.cargo] = (cargoData[c.cargo] || 0) + 1;
            });
            
            const cargoCtx = document.getElementById('cargoChart').getContext('2d');
            new Chart(cargoCtx, {
                type: 'bar',
                data: {
                    labels: Object.keys(cargoData),
                    datasets: [{
                        label: 'Candidatos',
                        data: Object.values(cargoData),
                        backgroundColor: '#ffd700',
                        borderColor: '#fff',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffd700',
                                font: {
                                    family: 'Orbitron'
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#ffd700'
                            },
                            grid: {
                                color: 'rgba(255, 215, 0, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#ffd700'
                            },
                            grid: {
                                color: 'rgba(255, 215, 0, 0.1)'
                            }
                        }
                    }
                }
            });
        }

        // ============================================
        // CANDIDATOS
        // ============================================

        function carregarCandidatosPublicos() {
            const tbody = document.getElementById('candidatosTable');
            tbody.innerHTML = '';
            
            if (candidatos.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 3rem;">
                            <div class="loader"></div>
                            <p style="color: var(--cyber-blue); margin-top: 1rem;">Carregando candidatos...</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            let candidatosExibidos = candidatos;
            if (!usuarioLogado) {
                candidatosExibidos = candidatos.filter(c => c.status === 'Homologado');
            }
            
            if (candidatosExibidos.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 3rem; color: var(--cyber-blue);">
                            <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <p>Nenhum candidato homologado disponível no momento.</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            candidatosExibidos.forEach(candidato => {
                const partido = partidos.find(p => p.sigla === candidato.partido);
                const ideologia = partido ? partido.ideologia : 'N/A';
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><span class="candidate-number">${candidato.numero || 'N/A'}</span></td>
                    <td><strong>${candidato.nome}</strong></td>
                    <td>${candidato.cargo}</td>
                    <td>${candidato.partido}</td>
                    <td>${candidato.cidade} / ${candidato.estado}</td>
                    <td><span class="ideologia-tag ideologia-${ideologia.toLowerCase()}">${ideologia}</span></td>
                    <td><span class="status-badge status-${candidato.status.toLowerCase().replace(' ', '')}">${candidato.status}</span></td>
                    <td>
                        <button class="btn btn-outline" style="padding: 0.5rem 1rem; font-size: 0.9rem;" onclick="verDetalhesCandidato(${candidato.id})">
                            <i class="fas fa-eye"></i> Ver
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function filtrarCandidatos() {
            const estado = document.getElementById('filterEstado').value;
            const cargo = document.getElementById('filterCargo').value;
            const partido = document.getElementById('filterPartido').value;
            
            const tbody = document.getElementById('candidatosTable');
            tbody.innerHTML = '';
            
            let candidatosFiltrados = [...candidatos];
            
            if (estado) {
                candidatosFiltrados = candidatosFiltrados.filter(c => c.estado === estado);
            }
            
            if (cargo) {
                candidatosFiltrados = candidatosFiltrados.filter(c => c.cargo === cargo);
            }
            
            if (partido) {
                candidatosFiltrados = candidatosFiltrados.filter(c => c.partido === partido);
            }
            
            if (!usuarioLogado) {
                candidatosFiltrados = candidatosFiltrados.filter(c => c.status === 'Homologado');
            }
            
            if (candidatosFiltrados.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 3rem; color: var(--cyber-blue);">
                            <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <p>Nenhum candidato encontrado com os filtros aplicados.</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            candidatosFiltrados.forEach(candidato => {
                const partido = partidos.find(p => p.sigla === candidato.partido);
                const ideologia = partido ? partido.ideologia : 'N/A';
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><span class="candidate-number">${candidato.numero || 'N/A'}</span></td>
                    <td><strong>${candidato.nome}</strong></td>
                    <td>${candidato.cargo}</td>
                    <td>${candidato.partido}</td>
                    <td>${candidato.cidade} / ${candidato.estado}</td>
                    <td><span class="ideologia-tag ideologia-${ideologia.toLowerCase()}">${ideologia}</span></td>
                    <td><span class="status-badge status-${candidato.status.toLowerCase().replace(' ', '')}">${candidato.status}</span></td>
                    <td>
                        <button class="btn btn-outline" style="padding: 0.5rem 1rem; font-size: 0.9rem;" onclick="verDetalhesCandidato(${candidato.id})">
                            <i class="fas fa-eye"></i> Ver
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function resetarFiltros() {
            document.getElementById('filterEstado').value = '';
            document.getElementById('filterCidade').value = '';
            document.getElementById('filterCargo').value = '';
            document.getElementById('filterPartido').value = '';
            carregarCandidatosPublicos();
        }

        // ============================================
        // CANDIDATURA
        // ============================================

        function carregarCidadesCandidatura() {
            const estadoSelecionado = document.getElementById('candidatoEstado').value;
            const selectCidade = document.getElementById('candidatoCidade');
            selectCidade.innerHTML = '<option value="">Selecione uma cidade</option>';
            
            if (estadoSelecionado) {
                const estado = estados.find(e => e.nome === estadoSelecionado);
                if (estado) {
                    estado.cidades.forEach(cidade => {
                        const option = document.createElement('option');
                        option.value = cidade.nome;
                        option.textContent = cidade.nome;
                        selectCidade.appendChild(option);
                    });
                }
            }
        }

        function atualizarInfoPartido() {
            const partidoSelecionado = document.getElementById('candidatoPartido').value;
            const infoPartido = document.getElementById('infoPartido');
            
            if (!partidoSelecionado) {
                infoPartido.style.display = 'none';
                return;
            }
            
            const partido = partidos.find(p => p.sigla === partidoSelecionado);
            if (partido) {
                infoPartido.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: rgba(0,0,0,0.3); border-radius: 10px;">
                        <div class="partido-numero">${partido.numero}</div>
                        <div>
                            <strong style="color: var(--gold);">${partido.nome}</strong>
                            <div style="margin-top: 0.5rem;">
                                <span class="ideologia-tag ideologia-${partido.ideologia.toLowerCase()}">${partido.ideologia}</span>
                            </div>
                        </div>
                    </div>
                `;
                infoPartido.style.display = 'block';
            }
        }

        function gerarNumeroCandidato() {
            const cargo = document.getElementById('candidatoCargo').value;
            const partido = document.getElementById('candidatoPartido').value;
            const estado = document.getElementById('candidatoEstado').value;
            const cidade = document.getElementById('candidatoCidade').value;
            
            if (!cargo || !partido || !estado || !cidade) {
                document.getElementById('candidatoNumero').value = '';
                return;
            }
            
            const partidoInfo = partidos.find(p => p.sigla === partido);
            if (!partidoInfo) return;
            
            const digitos = digitosPorCargo[cargo];
            if (!digitos) return;
            
            // Gerar número baseado no partido + dígitos aleatórios
            let numeroBase = partidoInfo.numero.toString();
            
            // Adicionar dígitos aleatórios para completar o número necessário
            const digitosRestantes = digitos - numeroBase.length;
            if (digitosRestantes > 0) {
                for (let i = 0; i < digitosRestantes; i++) {
                    numeroBase += Math.floor(Math.random() * 10);
                }
            } else if (digitosRestantes < 0) {
                numeroBase = numeroBase.substring(0, digitos);
            }
            
            document.getElementById('candidatoNumero').value = numeroBase;
        }

        function validarLimitesPartido(candidatura) {
            const limite = limitesPorCargo[candidatura.cargo];
            if (!limite) return { valido: true, mensagem: '' };
            
            // Verificar limites por cidade
            if (limite.porPartido.cidade) {
                const candidatosMesmaCidade = candidatos.filter(c => 
                    c.cargo === candidatura.cargo &&
                    c.partido === candidatura.partido &&
                    c.cidade === candidatura.cidade &&
                    c.estado === candidatura.estado &&
                    c.status !== 'Recusado'
                );
                
                if (candidatosMesmaCidade.length >= limite.porPartido.cidade) {
                    return {
                        valido: false,
                        mensagem: `Limite de ${limite.porPartido.cidade} candidato(s) por partido para ${candidatura.cargo} na cidade já atingido`
                    };
                }
            }
            
            // Verificar limites por estado
            if (limite.porPartido.estado) {
                const candidatosMesmoEstado = candidatos.filter(c => 
                    c.cargo === candidatura.cargo &&
                    c.partido === candidatura.partido &&
                    c.estado === candidatura.estado &&
                    c.status !== 'Recusado'
                );
                
                if (candidatosMesmoEstado.length >= limite.porPartido.estado) {
                    return {
                        valido: false,
                        mensagem: `Limite de ${limite.porPartido.estado} candidato(s) por partido para ${candidatura.cargo} no estado já atingido`
                    };
                }
            }
            
            return { valido: true, mensagem: '' };
        }

        function enviarCandidatura() {
            const nome = document.getElementById('candidatoNome').value.trim();
            const cpf = document.getElementById('candidatoCPF').value;
            const email = document.getElementById('candidatoEmail').value.trim();
            const telefone = document.getElementById('candidatoTelefone').value;
            const estado = document.getElementById('candidatoEstado').value;
            const cidade = document.getElementById('candidatoCidade').value;
            const cargo = document.getElementById('candidatoCargo').value;
            const partido = document.getElementById('candidatoPartido').value;
            const numero = document.getElementById('candidatoNumero').value;
            const manifesto = document.getElementById('candidatoManifesto').value.trim();
            const experiencia = document.getElementById('candidatoExperiencia').value.trim();
            
            // Validações básicas
            if (!nome || !cpf || !email || !telefone || !estado || !cidade || !cargo || !partido || !numero || !manifesto) {
                mostrarMensagem('candidaturaMessage', '❌ Preencha todos os campos obrigatórios!', 'error');
                return;
            }
            
            // Validar CPF
            if (!validarCPF(cpf)) {
                mostrarMensagem('candidaturaMessage', '❌ CPF inválido!', 'error');
                return;
            }
            
            // Validar email
            if (!email.includes('@') || !email.includes('.')) {
                mostrarMensagem('candidaturaMessage', '❌ E-mail inválido!', 'error');
                return;
            }
            
            // Validar limites do partido
            const candidatura = { cargo, partido, cidade, estado, numero };
            const validacaoLimites = validarLimitesPartido(candidatura);
            
            if (!validacaoLimites.valido) {
                mostrarMensagem('candidaturaMessage', `❌ ${validacaoLimites.mensagem}`, 'error');
                return;
            }
            
            // Criar nova candidatura
            const novaCandidatura = {
                id: Date.now(),
                nome,
                cpf: cpf.replace(/\D/g, ''),
                email,
                telefone,
                estado,
                cidade,
                cargo,
                partido,
                numero,
                manifesto,
                experiencia: experiencia || '',
                status: 'Em análise',
                dataCadastro: new Date().toISOString()
            };
            
            // Adicionar à lista
            candidatos.push(novaCandidatura);
            salvarCandidatos();
            
            // Registrar log
            registrarLog('candidatura', `Nova candidatura: ${nome} (${partido}) para ${cargo} em ${cidade}/${estado}`, 'Público');
            
            // Mostrar mensagem de sucesso
            mostrarMensagem('candidaturaMessage', '✅ Candidatura enviada com sucesso! Aguarde análise do TRE correspondente.', 'success');
            
            // Limpar formulário
            limparFormulario();
            
            // Atualizar dashboard
            setTimeout(() => {
                atualizarDashboard();
                mostrarSecao('dashboard');
            }, 3000);
        }

        function limparFormulario() {
            document.getElementById('candidatoNome').value = '';
            document.getElementById('candidatoCPF').value = '';
            document.getElementById('candidatoEmail').value = '';
            document.getElementById('candidatoTelefone').value = '';
            document.getElementById('candidatoEstado').value = '';
            document.getElementById('candidatoCidade').innerHTML = '<option value="">Selecione uma cidade</option>';
            document.getElementById('candidatoCargo').value = '';
            document.getElementById('candidatoPartido').value = '';
            document.getElementById('candidatoNumero').value = '';
            document.getElementById('candidatoManifesto').value = '';
            document.getElementById('candidatoExperiencia').value = '';
            document.getElementById('infoPartido').style.display = 'none';
        }

        function validarCPF(cpf) {
            cpf = cpf.replace(/\D/g, '');
            if (cpf.length !== 11) return false;
            
            // CPFs conhecidos inválidos
            const cpfsInvalidos = [
                '00000000000', '11111111111', '22222222222',
                '33333333333', '44444444444', '55555555555',
                '66666666666', '77777777777', '88888888888', '99999999999'
            ];
            
            if (cpfsInvalidos.includes(cpf)) return false;
            
            // Validar dígitos verificadores
            let soma = 0;
            for (let i = 0; i < 9; i++) {
                soma += parseInt(cpf.charAt(i)) * (10 - i);
            }
            
            let resto = 11 - (soma % 11);
            let digito1 = resto > 9 ? 0 : resto;
            
            if (digito1 !== parseInt(cpf.charAt(9))) return false;
            
            soma = 0;
            for (let i = 0; i < 10; i++) {
                soma += parseInt(cpf.charAt(i)) * (11 - i);
            }
            
            resto = 11 - (soma % 11);
            let digito2 = resto > 9 ? 0 : resto;
            
            return digito2 === parseInt(cpf.charAt(10));
        }

        // ============================================
        // PARTIDOS
        // ============================================

        function carregarListaPartidos() {
            const container = document.getElementById('listaPartidos');
            container.innerHTML = '';
            
            // Agrupar por ideologia
            const partidosPorIdeologia = {
                'Direita': partidos.filter(p => p.ideologia === 'Direita'),
                'Centro': partidos.filter(p => p.ideologia === 'Centro'),
                'Esquerda': partidos.filter(p => p.ideologia === 'Esquerda')
            };
            
            for (const [ideologia, lista] of Object.entries(partidosPorIdeologia)) {
                const section = document.createElement('div');
                section.style.marginBottom = '3rem';
                
                section.innerHTML = `
                    <h3 style="color: ${ideologia === 'Direita' ? '#4169e1' : ideologia === 'Centro' ? '#32cd32' : '#dc143c'}; 
                         margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid currentColor;">
                        ${ideologia} <span class="ideologia-tag ideologia-${ideologia.toLowerCase()}">${lista.length} partidos</span>
                    </h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem;">
                `;
                
                lista.forEach(partido => {
                    section.innerHTML += `
                        <div class="partido-card">
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div class="partido-numero">${partido.numero}</div>
                                <div style="flex: 1;">
                                    <h4 style="color: var(--gold); margin-bottom: 0.5rem;">${partido.nome}</h4>
                                    <p style="color: var(--gold-light); font-size: 0.9rem;">Sigla: ${partido.sigla}</p>
                                    <p style="color: var(--gold-light); font-size: 0.9rem;">Número: ${partido.numero}</p>
                                </div>
                                <span class="ideologia-tag ideologia-${partido.ideologia.toLowerCase()}">${partido.ideologia}</span>
                            </div>
                        </div>
                    `;
                });
                
                section.innerHTML += '</div>';
                container.appendChild(section);
            }
        }

        function filtrarPartidos(ideologia) {
            const container = document.getElementById('listaPartidos');
            container.innerHTML = '';
            
            let partidosFiltrados = partidos;
            
            if (ideologia !== 'todos') {
                partidosFiltrados = partidos.filter(p => p.ideologia === ideologia);
            }
            
            if (partidosFiltrados.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: var(--cyber-blue);">
                        <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                        <p>Nenhum partido encontrado.</p>
                    </div>
                `;
                return;
            }
            
            const section = document.createElement('div');
            section.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem;">
            `;
            
            partidosFiltrados.forEach(partido => {
                section.innerHTML += `
                    <div class="partido-card">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div class="partido-numero">${partido.numero}</div>
                            <div style="flex: 1;">
                                <h4 style="color: var(--gold); margin-bottom: 0.5rem;">${partido.nome}</h4>
                                <p style="color: var(--gold-light); font-size: 0.9rem;">Sigla: ${partido.sigla}</p>
                                <p style="color: var(--gold-light); font-size: 0.9rem;">Número: ${partido.numero}</p>
                            </div>
                            <span class="ideologia-tag ideologia-${partido.ideologia.toLowerCase()}">${partido.ideologia}</span>
                        </div>
                    </div>
                `;
            });
            
            section.innerHTML += '</div>';
            container.appendChild(section);
        }

        // ============================================
        // LOGIN E SEGURANÇA
        // ============================================

        function realizarLogin() {
            const tipoAcesso = document.getElementById('adminType').value;
            const senha = document.getElementById('adminPassword').value;
            
            if (!tipoAcesso) {
                alert('❌ Selecione o tipo de acesso!');
                return;
            }
            
            if (!senha) {
                alert('❌ Digite a senha de acesso!');
                return;
            }
            
            let usuario = null;
            
            if (tipoAcesso === 'TSE') {
                // Senha do TSE: Brookasil1234
                if (senha === 'Brookasil1234') {
                    usuario = {
                        tipo: 'TSE',
                        nome: 'Tutu Protásio',
                        jurisdicao: 'Nacional',
                        acessoCompleto: true
                    };
                }
            } else {
                // Verificar TREs
                const [tipo, nomeEstado] = tipoAcesso.split('_');
                if (tipo === 'TRE') {
                    const estado = estados.find(e => e.nome === nomeEstado);
                    if (estado) {
                        // Verificar senha descriptografada
                        const senhaDescriptografada = decryptPassword(estado.senha);
                        if (senhaDescriptografada === senha) {
                            usuario = {
                                tipo: 'TRE',
                                nome: estado.tre,
                                jurisdicao: `Estado de ${estado.nome}`,
                                acessoCompleto: false
                            };
                        }
                    }
                }
            }
            
            if (usuario) {
                usuarioLogado = usuario;
                localStorage.setItem('tse_usuario', JSON.stringify(usuario));
                
                registrarLog('login', `Login realizado: ${usuario.nome} (${usuario.jurisdicao})`, usuario.nome);
                
                entrarModoAdmin();
                mostrarSecao('admin');
                
                mostrarMensagem('adminInfo', `✅ Login realizado com sucesso! Bem-vindo, ${usuario.nome}!`, 'success');
            } else {
                alert('❌ Credenciais incorretas!');
            }
        }

        function entrarModoAdmin() {
            document.getElementById('loginTab').innerHTML = '<i class="fas fa-user-shield"></i> PAINEL ADMIN';
            document.getElementById('adminIndicator').style.display = 'flex';
            document.getElementById('sidebarAdmin').style.display = 'flex';
            document.getElementById('sidebarLogs').style.display = 'flex';
            
            if (usuarioLogado.tipo === 'TSE') {
                document.getElementById('sidebarConfig').style.display = 'flex';
            }
        }

        function logout() {
            if (usuarioLogado) {
                registrarLog('logout', `Logout realizado: ${usuarioLogado.nome}`, usuarioLogado.nome);
            }
            
            usuarioLogado = null;
            localStorage.removeItem('tse_usuario');
            
            document.getElementById('loginTab').innerHTML = '<i class="fas fa-sign-in-alt"></i> LOGIN';
            document.getElementById('adminIndicator').style.display = 'none';
            document.getElementById('sidebarAdmin').style.display = 'none';
            document.getElementById('sidebarLogs').style.display = 'none';
            document.getElementById('sidebarConfig').style.display = 'none';
            
            mostrarSecao('dashboard');
            mostrarMensagem('dashboard', '✅ Logout realizado com sucesso!', 'success');
        }

        // ============================================
        // ADMINISTRAÇÃO
        // ============================================

        function mostrarDashboardAdmin() {
            const adminTitulo = document.getElementById('adminTitulo');
            const adminInfo = document.getElementById('adminInfo');
            const adminContent = document.getElementById('adminContent');
            
            adminTitulo.textContent = usuarioLogado.nome.toUpperCase();
            
            adminInfo.innerHTML = `
                <div class="info-box">
                    <h3><i class="fas fa-user-circle"></i> INFORMAÇÕES DO USUÁRIO</h3>
                    <p><strong>Tipo:</strong> ${usuarioLogado.tipo}</p>
                    <p><strong>Jurisdição:</strong> ${usuarioLogado.jurisdicao}</p>
                    <p><strong>Modo da Eleição:</strong> ${configuracoes.modoEleicao}</p>
                    ${usuarioLogado.tipo === 'TSE' ? '<p><strong>Privilégios:</strong> Acesso completo ao sistema</p>' : ''}
                </div>
            `;
            
            // Estatísticas para o admin
            let candidaturasPendentes = [];
            if (usuarioLogado.tipo === 'TSE') {
                candidaturasPendentes = candidatos.filter(c => c.status === 'Em análise');
            } else {
                const estadoNome = usuarioLogado.jurisdicao.replace('Estado de ', '').trim();
                candidaturasPendentes = candidatos.filter(c => 
                    c.status === 'Em análise' && 
                    c.estado === estadoNome
                );
            }
            
            adminContent.innerHTML = `
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Candidaturas Pendentes</div>
                        <div class="stat-number">${candidaturasPendentes.length}</div>
                        <div class="stat-desc">Aguardando sua análise</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Total no Sistema</div>
                        <div class="stat-number">${candidatos.length}</div>
                        <div class="stat-desc">Candidaturas registradas</div>
                    </div>
                </div>
                
                ${candidaturasPendentes.length > 0 ? `
                <div style="margin-top: 2rem;">
                    <h3 class="card-title"><i class="fas fa-clock"></i> CANDIDATURAS PENDENTES</h3>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>NOME</th>
                                    <th>CARGO</th>
                                    <th>LOCALIDADE</th>
                                    <th>PARTIDO</th>
                                    <th>AÇÕES</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${candidaturasPendentes.slice(0, 10).map(c => `
                                    <tr>
                                        <td>${c.nome}</td>
                                        <td>${c.cargo}</td>
                                        <td>${c.cidade}/${c.estado}</td>
                                        <td>${c.partido}</td>
                                        <td>
                                            <button class="btn btn-success" onclick="aprovarCandidatura(${c.id})" style="padding: 0.5rem 1rem;">
                                                <i class="fas fa-check"></i> Aprovar
                                            </button>
                                            <button class="btn btn-danger" onclick="mostrarFormRecusar(${c.id})" style="padding: 0.5rem 1rem; margin-left: 0.5rem;">
                                                <i class="fas fa-times"></i> Recusar
                                            </button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
                ` : ''}
            `;
        }

        function mostrarAprovarCandidaturas() {
            // Implementação similar à anterior
            alert('Funcionalidade em desenvolvimento');
        }

        function aprovarCandidatura(id) {
            const candidato = candidatos.find(c => c.id === id);
            if (!candidato) return;
            
            candidato.status = 'Homologado';
            candidato.aprovadoPor = usuarioLogado.nome;
            candidato.dataAprovacao = new Date().toISOString();
            
            salvarCandidatos();
            registrarLog('aprovar', `Candidatura aprovada: ${candidato.nome}`, usuarioLogado.nome);
            
            mostrarDashboardAdmin();
            atualizarDashboard();
            mostrarMensagem('adminInfo', `✅ Candidatura de ${candidato.nome} aprovada com sucesso!`, 'success');
        }

        function mostrarFormRecusar(id) {
            const candidato = candidatos.find(c => c.id === id);
            if (!candidato) return;
            
            const motivo = prompt(`Digite o motivo para recusar a candidatura de ${candidato.nome}:`);
            if (motivo) {
                recusarCandidatura(id, motivo);
            }
        }

        function recusarCandidatura(id, motivo) {
            const candidato = candidatos.find(c => c.id === id);
            if (!candidato) return;
            
            candidato.status = 'Recusado';
            candidato.motivoRecusa = motivo;
            candidato.recusadoPor = usuarioLogado.nome;
            candidato.dataRecusa = new Date().toISOString();
            
            salvarCandidatos();
            registrarLog('recusar', `Candidatura recusada: ${candidato.nome} - Motivo: ${motivo}`, usuarioLogado.nome);
            
            mostrarDashboardAdmin();
            atualizarDashboard();
            mostrarMensagem('adminInfo', `❌ Candidatura de ${candidato.nome} recusada.`, 'error');
        }

        // ============================================
        // CONFIGURAÇÕES
        // ============================================

        function salvarConfiguracoes() {
            if (!usuarioLogado || usuarioLogado.tipo !== 'TSE') {
                mostrarMensagem('configMessage', '❌ Apenas o TSE Nacional pode alterar as configurações!', 'error');
                return;
            }
            
            const novoModo = document.getElementById('configModoEleicao').value;
            const prazoCandidaturas = parseInt(document.getElementById('configPrazoCandidaturas').value);
            const statusSistema = document.getElementById('configStatusSistema').value;
            
            configuracoes.modoEleicao = novoModo;
            configuracoes.prazoCandidaturas = prazoCandidaturas;
            configuracoes.statusSistema = statusSistema;
            
            localStorage.setItem('tse_configuracoes', JSON.stringify(configuracoes));
            
            document.getElementById('modoEleicao').textContent = novoModo.toUpperCase();
            registrarLog('config', `Configurações atualizadas: Modo=${novoModo}`, usuarioLogado.nome);
            
            mostrarMensagem('configMessage', '✅ Configurações salvas com sucesso!', 'success');
        }

        // ============================================
        // LOGS
        // ============================================

        function carregarLogs() {
            const tbody = document.getElementById('logsTable');
            tbody.innerHTML = '';
            
            document.getElementById('totalLogs').textContent = logs.length;
            
            if (logs.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 3rem; color: var(--cyber-blue);">
                            <i class="fas fa-history" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <p>Nenhum log registrado no momento.</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            const logsOrdenados = [...logs].sort((a, b) => 
                new Date(b.timestamp) - new Date(a.timestamp)
            );
            
            logsOrdenados.forEach(log => {
                const data = new Date(log.timestamp);
                const dataFormatada = data.toLocaleDateString('pt-BR') + ' ' + data.toLocaleTimeString('pt-BR');
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${dataFormatada}</td>
                    <td>${log.usuario || 'Sistema'}</td>
                    <td>${log.acao}</td>
                    <td>${log.detalhes || ''}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // ============================================
        // FUNÇÕES AUXILIARES
        // ============================================

        function salvarCandidatos() {
            localStorage.setItem('tse_candidatos', JSON.stringify(candidatos));
        }

        function registrarLog(acao, detalhes, usuario = null) {
            const log = {
                id: Date.now(),
                timestamp: new Date().toISOString(),
                usuario: usuario || (usuarioLogado ? usuarioLogado.nome : 'Público'),
                acao: acao,
                detalhes: detalhes
            };
            
            logs.push(log);
            localStorage.setItem('tse_logs', JSON.stringify(logs));
            
            if (document.getElementById('logs')?.classList.contains('active')) {
                carregarLogs();
            }
        }

        function mostrarMensagem(elementId, mensagem, tipo) {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            element.innerHTML = `
                <div class="message message-${tipo}">
                    <i class="fas fa-${tipo === 'success' ? 'check-circle' : tipo === 'error' ? 'times-circle' : 'exclamation-circle'}"></i>
                    ${mensagem}
                </div>
            `;
            element.style.display = 'block';
            
            if (tipo === 'success') {
                setTimeout(() => {
                    element.style.display = 'none';
                }, 5000);
            }
        }

        function exportarBackup() {
            const backup = {
                candidatos: candidatos,
                logs: logs,
                configuracoes: configuracoes,
                dataBackup: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(backup, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const link = document.createElement('a');
            link.setAttribute('href', dataUri);
            link.setAttribute('download', `backup_tse_${new Date().toISOString().split('T')[0]}.json`);
            link.click();
            
            registrarLog('sistema', 'Backup do sistema exportado', usuarioLogado?.nome || 'Sistema');
            mostrarMensagem('configMessage', '✅ Backup exportado com sucesso!', 'success');
        }

        function exportarLogs() {
            const logsStr = JSON.stringify(logs, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(logsStr);
            
            const link = document.createElement('a');
            link.setAttribute('href', dataUri);
            link.setAttribute('download', `logs_tse_${new Date().toISOString().split('T')[0]}.json`);
            link.click();
            
            mostrarMensagem('logs', '✅ Logs exportados com sucesso!', 'success');
        }

        function verDetalhesCandidato(id) {
            const candidato = candidatos.find(c => c.id === id);
            if (!candidato) return;
            
            const partido = partidos.find(p => p.sigla === candidato.partido);
            
            const modal = document.getElementById('adminModal');
            const modalTitulo = document.getElementById('modalTitulo');
            const modalContent = document.getElementById('modalContent');
            
            modalTitulo.innerHTML = `<i class="fas fa-user"></i> DETALHES DO CANDIDATO`;
            
            let html = `
                <div style="margin-bottom: 2rem;">
                    <h3 style="color: var(--gold); margin-bottom: 1rem;">${candidato.nome}</h3>
                    <div class="info-box">
                        <p><strong>Número:</strong> <span class="candidate-number">${candidato.numero}</span></p>
                        <p><strong>Cargo:</strong> ${candidato.cargo}</p>
                        <p><strong>Partido:</strong> ${candidato.partido} - ${partido ? partido.nome : 'N/A'}</p>
                        <p><strong>Ideologia:</strong> <span class="ideologia-tag ideologia-${partido ? partido.ideologia.toLowerCase() : 'N/A'}">${partido ? partido.ideologia : 'N/A'}</span></p>
                        <p><strong>Localidade:</strong> ${candidato.cidade} / ${candidato.estado}</p>
                        <p><strong>Status:</strong> <span class="status-badge status-${candidato.status.toLowerCase().replace(' ', '')}">${candidato.status}</span></p>
                    </div>
                    
                    <div class="info-box">
                        <h4><i class="fas fa-file-alt"></i> MANIFESTO</h4>
                        <p>${candidato.manifesto || 'Não informado'}</p>
                    </div>
                    
                    ${candidato.experiencia ? `
                    <div class="info-box">
                        <h4><i class="fas fa-briefcase"></i> EXPERIÊNCIA</h4>
                        <p>${candidato.experiencia}</p>
                    </div>
                    ` : ''}
                    
                    ${candidato.motivoRecusa ? `
                    <div class="info-box" style="background: rgba(255, 56, 96, 0.1); border-color: rgba(255, 56, 96, 0.3);">
                        <h4><i class="fas fa-times-circle"></i> MOTIVO DA RECUSA</h4>
                        <p>${candidato.motivoRecusa}</p>
                        <p><small>Recusado por: ${candidato.recusadoPor || 'N/A'}</small></p>
                    </div>
                    ` : ''}
                </div>
                
                <div style="display: flex; gap: 1rem;">
                    <button class="btn btn-outline" onclick="fecharModal()">
                        <i class="fas fa-times"></i> FECHAR
                    </button>
                </div>
            `;
            
            modalContent.innerHTML = html;
            modal.classList.add('active');
        }

        function fecharModal() {
            document.getElementById('adminModal').classList.remove('active');
        }
    </script>
</body>
</html>
