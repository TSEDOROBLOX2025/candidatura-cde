<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSE RP BROOKASIL - Sistema Eleitoral Oficial</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --obsidian: #0a0a0a;
            --gold: #ffd700;
            --gold-light: #fff0a3;
            --gold-dark: #b8860b;
            --cyber-blue: #00f3ff;
            --cyber-pink: #ff00ff;
            --glass-dark: rgba(10, 10, 10, 0.8);
            --glass-light: rgba(255, 215, 0, 0.1);
            --danger: #ff3860;
            --success: #23d160;
            --warning: #ffdd57;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--obsidian);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 243, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 0, 255, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: -2;
        }

        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                transparent 50%,
                rgba(0, 243, 255, 0.03) 50%
            );
            background-size: 100% 4px;
            pointer-events: none;
            z-index: -1;
            animation: scan 10s linear infinite;
        }

        @keyframes scan {
            0% { transform: translateY(0); }
            100% { transform: translateY(4px); }
        }

        .mouse-light {
            position: fixed;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
            z-index: -1;
            transform: translate(-50%, -50%);
            transition: transform 0.1s;
        }

        /* HEADER E NAVEGA√á√ÉO */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: var(--glass-dark);
            backdrop-filter: blur(40px);
            border-bottom: 2px solid var(--gold);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--gold);
            text-shadow: 0 0 10px var(--gold);
            letter-spacing: 2px;
        }

        .logo-sub {
            font-size: 0.8rem;
            color: var(--cyber-blue);
            display: block;
            letter-spacing: 4px;
        }

        .nav-tabs {
            display: flex;
            gap: 1rem;
        }

        .nav-tab {
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 0.8rem 1.5rem;
            font-family: 'Orbitron', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-tab:hover {
            background: rgba(255, 215, 0, 0.1);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: var(--gold);
            color: var(--obsidian);
            font-weight: 700;
        }

        .admin-indicator {
            background: var(--danger);
            color: white;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 1rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* SIDEBAR FLUTUANTE */
        .sidebar {
            position: fixed;
            left: 2rem;
            top: 50%;
            transform: translateY(-50%);
            background: var(--glass-dark);
            backdrop-filter: blur(40px);
            border: 1px solid var(--gold);
            border-radius: 20px;
            padding: 1.5rem;
            width: 80px;
            transition: width 0.3s ease;
            z-index: 999;
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.2);
        }

        .sidebar:hover {
            width: 250px;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.8rem;
            margin: 0.5rem 0;
            color: var(--gold);
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
        }

        .sidebar-item:hover {
            background: rgba(255, 215, 0, 0.1);
            transform: translateX(5px);
        }

        .sidebar-item i {
            font-size: 1.2rem;
            min-width: 24px;
        }

        /* CONTE√öDO PRINCIPAL */
        .main-content {
            margin-top: 100px;
            padding: 2rem;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* CARDS GLASSMORPHISM */
        .card {
            background: var(--glass-dark);
            backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: var(--gold);
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.2);
            transform: translateY(-5px);
        }

        .card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, var(--gold), var(--cyber-blue), var(--cyber-pink), var(--gold));
            z-index: -1;
            filter: blur(10px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover::before {
            opacity: 1;
        }

        .card-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            color: var(--gold);
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--gold);
            padding-bottom: 0.5rem;
        }

        /* DASHBOARD */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--glass-dark), rgba(0, 243, 255, 0.1));
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: scale(1.05);
        }

        .stat-number {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            font-weight: 900;
            color: var(--gold);
            text-shadow: 0 0 10px currentColor;
            margin: 0.5rem 0;
        }

        .stat-label {
            color: var(--cyber-blue);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .chart-container {
            background: var(--glass-dark);
            padding: 1.5rem;
            border-radius: 15px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        /* FILTROS */
        .filters {
            background: var(--glass-dark);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            border: 1px solid rgba(0, 243, 255, 0.3);
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-label {
            color: var(--cyber-blue);
            font-size: 0.9rem;
            font-weight: 600;
        }

        .filter-select, .filter-input {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--gold);
            color: white;
            padding: 0.8rem;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.3s ease;
        }

        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: var(--cyber-blue);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.5);
        }

        /* TABELAS */
        .table-container {
            overflow-x: auto;
            margin-top: 1rem;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--glass-dark);
        }

        .data-table th {
            background: rgba(255, 215, 0, 0.2);
            color: var(--gold);
            padding: 1rem;
            text-align: left;
            font-family: 'Orbitron', sans-serif;
            font-weight: 500;
            border-bottom: 2px solid var(--gold);
        }

        .data-table td {
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 215, 0, 0.1);
            transition: background 0.3s ease;
        }

        .data-table tr:hover td {
            background: rgba(255, 215, 0, 0.05);
        }

        /* BOT√ïES */
        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--gold), var(--gold-dark));
            color: var(--obsidian);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .btn-danger {
            background: linear-gradient(45deg, var(--danger), #b3002d);
            color: white;
        }

        .btn-success {
            background: linear-gradient(45deg, var(--success), #008e46);
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
        }

        .btn-outline:hover {
            background: rgba(255, 215, 0, 0.1);
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: var(--glass-dark);
            backdrop-filter: blur(40px);
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: transparent;
            border: none;
            color: var(--gold);
            font-size: 1.5rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .modal-close:hover {
            background: rgba(255, 215, 0, 0.1);
        }

        /* FORMUL√ÅRIOS */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            color: var(--cyber-blue);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 0.8rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--gold);
            border-radius: 8px;
            color: white;
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.3s ease;
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--cyber-blue);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.5);
        }

        /* LOGIN */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
        }

        .login-card {
            background: var(--glass-dark);
            backdrop-filter: blur(40px);
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 3rem;
            width: 100%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 0 60px rgba(255, 215, 0, 0.3);
        }

        .login-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            color: var(--gold);
            margin-bottom: 0.5rem;
        }

        .login-subtitle {
            color: var(--cyber-blue);
            margin-bottom: 2rem;
        }

        /* ABAS FLUTUANTES */
        .floating-tabs {
            position: fixed;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 1rem;
            z-index: 998;
        }

        .floating-tab {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--glass-dark);
            border: 1px solid var(--gold);
            color: var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .floating-tab:hover {
            width: 200px;
            border-radius: 25px;
            justify-content: flex-start;
            padding-left: 1rem;
            gap: 1rem;
        }

        .floating-tab:hover::after {
            content: attr(data-tooltip);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        /* RESPONSIVIDADE */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                padding: 1rem;
            }
            
            .nav-tabs {
                margin-top: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .sidebar {
                display: none;
            }
            
            .floating-tabs {
                display: none;
            }
            
            .main-content {
                margin-top: 150px;
                padding: 1rem;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .filter-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .logo {
                font-size: 1.2rem;
            }
            
            .nav-tab {
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }
            
            .card {
                padding: 1rem;
            }
        }

        /* ANIMA√á√ïES ESPECIAIS */
        .glow {
            text-shadow: 0 0 10px currentColor;
        }

        .cyber-border {
            position: relative;
            border: 1px solid transparent;
            background: linear-gradient(var(--glass-dark), var(--glass-dark)) padding-box,
                      linear-gradient(45deg, var(--gold), var(--cyber-blue), var(--cyber-pink), var(--gold)) border-box;
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

        .float-animation {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* STATUS BADGES */
        .status-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-analise {
            background: rgba(255, 221, 87, 0.2);
            color: var(--warning);
            border: 1px solid var(--warning);
        }

        .status-homologado {
            background: rgba(35, 209, 96, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status-recusado {
            background: rgba(255, 56, 96, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        /* IDEOLOGIA COLORS */
        .ideologia-direita {
            color: #4169e1;
            border-left: 4px solid #4169e1;
            padding-left: 1rem;
        }

        .ideologia-centro {
            color: #32cd32;
            border-left: 4px solid #32cd32;
            padding-left: 1rem;
        }

        .ideologia-esquerda {
            color: #dc143c;
            border-left: 4px solid #dc143c;
            padding-left: 1rem;
        }

        /* NOVOS ESTILOS */
        .tre-info {
            background: linear-gradient(135deg, rgba(0, 243, 255, 0.1), rgba(255, 215, 0, 0.1));
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            border: 1px solid rgba(0, 243, 255, 0.3);
        }

        .tre-info h4 {
            color: var(--cyber-blue);
            margin-bottom: 0.5rem;
        }

        .tre-info p {
            color: var(--gold-light);
            font-size: 0.9rem;
        }

        .partido-card {
            background: rgba(255, 215, 0, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }

        .partido-card:hover {
            background: rgba(255, 215, 0, 0.1);
            transform: translateX(5px);
        }

        .partido-numero {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: var(--gold);
            color: var(--obsidian);
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-weight: bold;
            margin-right: 1rem;
        }

        .ideologia-tag {
            display: inline-block;
            padding: 0.2rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 1rem;
        }

        .direita-tag {
            background: rgba(65, 105, 225, 0.2);
            color: #4169e1;
            border: 1px solid #4169e1;
        }

        .centro-tag {
            background: rgba(50, 205, 50, 0.2);
            color: #32cd32;
            border: 1px solid #32cd32;
        }

        .esquerda-tag {
            background: rgba(220, 20, 60, 0.2);
            color: #dc143c;
            border: 1px solid #dc143c;
        }

        .candidato-detalhes {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 10px;
            margin-top: 1rem;
            border-left: 4px solid var(--gold);
        }

        .acoes-rapidas {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        .acao-rapida {
            flex: 1;
            min-width: 200px;
            background: linear-gradient(135deg, var(--glass-dark), rgba(0, 243, 255, 0.1));
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .acao-rapida:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 243, 255, 0.2);
        }

        .acao-rapida i {
            font-size: 2rem;
            color: var(--cyber-blue);
            margin-bottom: 1rem;
        }

        .sistema-info {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(0, 243, 255, 0.05));
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
    </style>
</head>
<body>
    <!-- Efeito de scanlines -->
    <div class="scanlines"></div>
    
    <!-- Luz que segue o mouse -->
    <div class="mouse-light" id="mouseLight"></div>
    
    <!-- Header -->
    <header class="header">
        <div class="logo">
            TSE RP BROOKASIL
            <span class="logo-sub">SISTEMA ELEITORAL OFICIAL</span>
        </div>
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="mostrarSecao('dashboard')">DASHBOARD</button>
            <button class="nav-tab" onclick="mostrarSecao('candidatos')">CANDIDATOS</button>
            <button class="nav-tab" onclick="mostrarSecao('candidatura')">CANDIDATAR-SE</button>
            <button class="nav-tab" onclick="mostrarSecao('partidos')">PARTIDOS</button>
            <button class="nav-tab" onclick="mostrarSecao('login')" id="loginTab">LOGIN</button>
            <div id="adminIndicator" class="admin-indicator" style="display: none;">MODO ADMIN</div>
        </div>
    </header>
    
    <!-- Sidebar Flutuante -->
    <nav class="sidebar">
        <div class="sidebar-item" onclick="mostrarSecao('dashboard')">
            <i>üìä</i> <span>Dashboard</span>
        </div>
        <div class="sidebar-item" onclick="mostrarSecao('candidatos')">
            <i>üë•</i> <span>Candidatos</span>
        </div>
        <div class="sidebar-item" onclick="mostrarSecao('candidatura')">
            <i>‚úçÔ∏è</i> <span>Candidatar-se</span>
        </div>
        <div class="sidebar-item" onclick="mostrarSecao('partidos')">
            <i>üèõÔ∏è</i> <span>Partidos</span>
        </div>
        <div class="sidebar-item" onclick="mostrarSecao('admin')" id="sidebarAdmin" style="display: none;">
            <i>üîê</i> <span>Administra√ß√£o</span>
        </div>
        <div class="sidebar-item" onclick="mostrarSecao('tres')">
            <i>üè¢</i> <span>TREs</span>
        </div>
        <div class="sidebar-item" onclick="mostrarSecao('logs')">
            <i>üìã</i> <span>Logs</span>
        </div>
        <div class="sidebar-item" onclick="mostrarSecao('config')">
            <i>‚öôÔ∏è</i> <span>Configura√ß√µes</span>
        </div>
    </nav>
    
    <!-- Abas Flutuantes -->
    <div class="floating-tabs">
        <div class="floating-tab float-animation" data-tooltip="Relat√≥rio R√°pido" onclick="gerarRelatorioRapido()">
            üìà
        </div>
        <div class="floating-tab float-animation" data-tooltip="Alertas do Sistema" onclick="mostrarAlertas()">
            üîî
        </div>
        <div class="floating-tab float-animation" data-tooltip="Modo da Elei√ß√£o" onclick="mostrarModoEleicao()">
            üó≥Ô∏è
        </div>
        <div class="floating-tab pulse-animation" data-tooltip="Acesso R√°pido" onclick="alternarAcessoRapido()">
            ‚ö°
        </div>
        <div class="floating-tab" data-tooltip="Exportar Dados" onclick="exportarDados()">
            üì§
        </div>
    </div>
    
    <!-- Conte√∫do Principal -->
    <main class="main-content">
        <!-- Dashboard P√∫blico -->
        <section id="dashboard" class="section active">
            <div class="card">
                <h2 class="card-title">üèõÔ∏è DASHBOARD ELEITORAL - BROOKASIL</h2>
                
                <div class="sistema-info">
                    <h3 style="color: var(--cyber-blue); margin-bottom: 1rem;">üìä SISTEMA ELEITORAL OFICIAL</h3>
                    <p style="color: var(--gold-light); margin-bottom: 0.5rem;">
                        <strong>Modo da Elei√ß√£o Atual:</strong> <span id="modoEleicao" style="color: var(--gold);">MUNICIPAL</span>
                    </p>
                    <p style="color: var(--gold-light); font-size: 0.9rem;">
                        Sistema desenvolvido para garantir transpar√™ncia e seguran√ßa no processo eleitoral da Rep√∫blica de Brookasil.
                    </p>
                </div>
                
                <div class="acoes-rapidas">
                    <div class="acao-rapida" onclick="mostrarSecao('candidatura')">
                        <i>‚úçÔ∏è</i>
                        <h4>Candidatar-se</h4>
                        <p>Candidate-se para qualquer cargo eletivo</p>
                    </div>
                    <div class="acao-rapida" onclick="mostrarSecao('candidatos')">
                        <i>üë•</i>
                        <h4>Ver Candidatos</h4>
                        <p>Consulte candidatos homologados</p>
                    </div>
                    <div class="acao-rapida" onclick="mostrarSecao('partidos')">
                        <i>üèõÔ∏è</i>
                        <h4>Partidos</h4>
                        <p>Conhe√ßa os partidos pol√≠ticos</p>
                    </div>
                    <div class="acao-rapida" onclick="mostrarSecao('tres')">
                        <i>üè¢</i>
                        <h4>TREs</h4>
                        <p>Informa√ß√µes dos Tribunais Regionais</p>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Candidatos Totais</div>
                        <div class="stat-number" id="totalCandidatos">0</div>
                        <div class="stat-desc">Sistema Nacional</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Homologados</div>
                        <div class="stat-number" id="homologados">0</div>
                        <div class="stat-desc">Aprovados pelo TSE/TRE</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Em An√°lise</div>
                        <div class="stat-number" id="emAnalise">0</div>
                        <div class="stat-desc">Aguardando an√°lise</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Recusados</div>
                        <div class="stat-number" id="recusados">0</div>
                        <div class="stat-desc">Com motivo registrado</div>
                    </div>
                </div>
                
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3 class="card-title">üìä IDEOLOGIAS</h3>
                        <canvas id="ideologiaChart"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <h3 class="card-title">üéØ DISTRIBUI√á√ÉO POR CARGO</h3>
                        <canvas id="cargoChart"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <h3 class="card-title">üó∫Ô∏è DISTRIBUI√á√ÉO POR ESTADO</h3>
                        <canvas id="estadoChart"></canvas>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Ver Candidatos (P√∫blico) -->
        <section id="candidatos" class="section">
            <div class="card">
                <h2 class="card-title">üë• CANDIDATOS HOMOLOGADOS</h2>
                
                <div class="filters">
                    <h3 style="color: var(--cyber-blue); margin-bottom: 1rem;">üîç FILTROS AVAN√áADOS</h3>
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label class="filter-label">ESTADO</label>
                            <select class="filter-select" id="filterEstado">
                                <option value="">Todos os Estados</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">CIDADE</label>
                            <select class="filter-select" id="filterCidade">
                                <option value="">Todas as Cidades</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">CARGO</label>
                            <select class="filter-select" id="filterCargo">
                                <option value="">Todos os Cargos</option>
                                <option value="Prefeito">Prefeito</option>
                                <option value="Vereador">Vereador</option>
                                <option value="Governador">Governador</option>
                                <option value="Presidente">Presidente</option>
                                <option value="Senador">Senador</option>
                                <option value="Deputado Federal">Deputado Federal</option>
                                <option value="Deputado Estadual">Deputado Estadual</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">PARTIDO</label>
                            <select class="filter-select" id="filterPartido">
                                <option value="">Todos os Partidos</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">IDEOLOGIA</label>
                            <select class="filter-select" id="filterIdeologia">
                                <option value="">Todas as Ideologias</option>
                                <option value="Direita">Direita</option>
                                <option value="Centro">Centro</option>
                                <option value="Esquerda">Esquerda</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">STATUS</label>
                            <select class="filter-select" id="filterStatus">
                                <option value="Homologado">Homologado</option>
                                <option value="Em an√°lise">Em An√°lise</option>
                                <option value="Recusado">Recusado</option>
                                <option value="Todos">Todos</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="filtrarCandidatos()">
                            üîç APLICAR FILTROS
                        </button>
                        <button class="btn btn-outline" onclick="resetarFiltros()">
                            üóëÔ∏è LIMPAR FILTROS
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>NOME</th>
                                <th>CARGO</th>
                                <th>PARTIDO</th>
                                <th>LOCALIDADE</th>
                                <th>IDEOLOGIA</th>
                                <th>STATUS</th>
                                <th>A√á√ïES</th>
                            </tr>
                        </thead>
                        <tbody id="candidatosTable">
                            <!-- Dados carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <div id="candidatosMessage" style="margin-top: 1rem;"></div>
            </div>
        </section>
        
        <!-- Se Candidatar (P√∫blico) -->
        <section id="candidatura" class="section">
            <div class="card">
                <h2 class="card-title">‚úçÔ∏è FORMUL√ÅRIO DE CANDIDATURA</h2>
                
                <div class="sistema-info">
                    <h3 style="color: var(--cyber-blue); margin-bottom: 1rem;">‚ÑπÔ∏è INFORMA√á√ïES IMPORTANTES</h3>
                    <p style="color: var(--gold-light); margin-bottom: 0.5rem;">
                        ‚Ä¢ Todos os campos marcados com * s√£o obrigat√≥rios<br>
                        ‚Ä¢ Sua candidatura ser√° analisada pelo TRE correspondente<br>
                        ‚Ä¢ O processo de homologa√ß√£o pode levar at√© 72 horas<br>
                        ‚Ä¢ Mantenha seus dados atualizados
                    </p>
                </div>
                
                <div class="form-group">
                    <label class="form-label">NOME COMPLETO *</label>
                    <input type="text" class="form-input" id="candidatoNome" placeholder="Digite seu nome completo">
                </div>
                
                <div class="form-group">
                    <label class="form-label">CPF (Apenas n√∫meros) *</label>
                    <input type="text" class="form-input" id="candidatoCPF" placeholder="000.000.000-00" maxlength="14">
                </div>
                
                <div class="form-group">
                    <label class="form-label">E-MAIL *</label>
                    <input type="email" class="form-input" id="candidatoEmail" placeholder="seu.email@exemplo.com">
                </div>
                
                <div class="form-group">
                    <label class="form-label">TELEFONE *</label>
                    <input type="text" class="form-input" id="candidatoTelefone" placeholder="(00) 00000-0000">
                </div>
                
                <div class="form-group">
                    <label class="form-label">ESTADO *</label>
                    <select class="form-select" id="candidatoEstado" onchange="carregarCidadesCandidatura()">
                        <option value="">Selecione um estado</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">CIDADE *</label>
                    <select class="form-select" id="candidatoCidade">
                        <option value="">Selecione uma cidade</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">CARGO *</label>
                    <select class="form-select" id="candidatoCargo">
                        <option value="">Selecione um cargo</option>
                        <option value="Prefeito">Prefeito</option>
                        <option value="Vereador">Vereador</option>
                        <option value="Governador">Governador</option>
                        <option value="Presidente">Presidente</option>
                        <option value="Senador">Senador</option>
                        <option value="Deputado Federal">Deputado Federal</option>
                        <option value="Deputado Estadual">Deputado Estadual</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">PARTIDO *</label>
                    <select class="form-select" id="candidatoPartido" onchange="atualizarInfoPartido()">
                        <option value="">Selecione um partido</option>
                    </select>
                    <div id="infoPartido" style="margin-top: 0.5rem; padding: 0.5rem; background: rgba(0,0,0,0.3); border-radius: 5px; display: none;"></div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">MANIFESTO / PROPOSTAS *</label>
                    <textarea class="form-textarea" id="candidatoManifesto" placeholder="Descreva suas propostas e ideais para a popula√ß√£o..." rows="6"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">EXPERI√äNCIA POL√çTICA (opcional)</label>
                    <textarea class="form-textarea" id="candidatoExperiencia" placeholder="Descreva sua experi√™ncia pol√≠tica anterior, se houver..." rows="4"></textarea>
                </div>
                
                <div class="form-group">
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="enviarCandidatura()">
                            üì§ ENVIAR CANDIDATURA
                        </button>
                        <button class="btn btn-outline" onclick="limparFormulario()">
                            üóëÔ∏è LIMPAR FORMUL√ÅRIO
                        </button>
                        <button class="btn btn-outline" onclick="mostrarSecao('candidatos')">
                            üëÅÔ∏è VER CANDIDATOS
                        </button>
                    </div>
                </div>
                
                <div id="candidaturaMessage" style="margin-top: 1rem;"></div>
            </div>
        </section>
        
        <!-- Partidos -->
        <section id="partidos" class="section">
            <div class="card">
                <h2 class="card-title">üèõÔ∏è PARTIDOS POL√çTICOS REGISTRADOS</h2>
                
                <div class="filters" style="margin-bottom: 2rem;">
                    <h3 style="color: var(--cyber-blue); margin-bottom: 1rem;">üîç FILTRAR POR IDEOLOGIA</h3>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-outline" onclick="filtrarPartidos('todos')">
                            Todos
                        </button>
                        <button class="btn btn-outline" onclick="filtrarPartidos('Direita')" style="color: #4169e1; border-color: #4169e1;">
                            Direita
                        </button>
                        <button class="btn btn-outline" onclick="filtrarPartidos('Centro')" style="color: #32cd32; border-color: #32cd32;">
                            Centro
                        </button>
                        <button class="btn btn-outline" onclick="filtrarPartidos('Esquerda')" style="color: #dc143c; border-color: #dc143c;">
                            Esquerda
                        </button>
                    </div>
                </div>
                
                <div id="listaPartidos">
                    <!-- Lista de partidos carregada via JavaScript -->
                </div>
            </div>
        </section>
        
        <!-- TREs -->
        <section id="tres" class="section">
            <div class="card">
                <h2 class="card-title">üè¢ TRIBUNAL REGIONAL ELEITORAL - TREs</h2>
                
                <div class="sistema-info">
                    <h3 style="color: var(--cyber-blue); margin-bottom: 1rem;">‚ÑπÔ∏è SISTEMA DE TRIBUNAIS</h3>
                    <p style="color: var(--gold-light); margin-bottom: 0.5rem;">
                        O sistema eleitoral de Brookasil √© composto pelo TSE Nacional e pelos TREs Estaduais e Municipais.<br>
                        Cada TRE √© respons√°vel pela administra√ß√£o eleitoral em sua respectiva jurisdi√ß√£o.
                    </p>
                </div>
                
                <div id="listaTREs">
                    <!-- Lista de TREs carregada via JavaScript -->
                </div>
            </div>
        </section>
        
        <!-- Login Administrativo -->
        <section id="login" class="section">
            <div class="login-container">
                <div class="login-card">
                    <h2 class="login-title">üîê ACESSO ADMINISTRATIVO</h2>
                    <p class="login-subtitle">TSE Nacional, TREs Estaduais e Municipais</p>
                    
                    <div class="form-group">
                        <label class="form-label">TIPO DE ACESSO</label>
                        <select class="form-select" id="adminType" onchange="atualizarSenhasDicas()">
                            <option value="">Selecione o tipo de acesso</option>
                            <option value="TSE">TSE Nacional - Brookasil</option>
                            <optgroup label="TREs Estaduais">
                                <option value="TRE_Brookhaven">TRE Brookhaven (Estado)</option>
                                <option value="TRE_Novacore">TRE Novacore (Estado)</option>
                                <option value="TRE_Casteriber">TRE Caster√≠ber (Estado)</option>
                                <option value="TRE_Fortemega">TRE Fortemega (Estado)</option>
                                <option value="TRE_Floremix">TRE Flor√™mix (Estado)</option>
                            </optgroup>
                            <optgroup label="TREs Municipais - Brookhaven">
                                <option value="TRE_Cidade_Eleitoral">TRE Cidade Eleitoral (Cidade)</option>
                                <option value="TRE_Liberty_City">TRE Liberty City (Cidade)</option>
                            </optgroup>
                            <optgroup label="TREs Municipais - Novacore">
                                <option value="TRE_Nexaville">TRE Nexaville (Cidade)</option>
                                <option value="TRE_Solaria">TRE Sol√°ria (Cidade)</option>
                            </optgroup>
                            <optgroup label="TREs Municipais - Caster√≠ber">
                                <option value="TRE_Castelo_Verde">TRE Castelo Verde (Cidade)</option>
                                <option value="TRE_Monte_Prata">TRE Monte Prata (Cidade)</option>
                            </optgroup>
                            <optgroup label="TREs Municipais - Fortemega">
                                <option value="TRE_Marinha_City">TRE Marinha City (Cidade)</option>
                                <option value="TRE_Porto_Rubi">TRE Porto Rubi (Cidade)</option>
                            </optgroup>
                            <optgroup label="TREs Municipais - Flor√™mix">
                                <option value="TRE_Florapolis">TRE Flor√°polis (Cidade)</option>
                                <option value="TRE_Riomarina">TRE Riomarina (Cidade)</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">SENHA DE ACESSO *</label>
                        <input type="password" class="form-input" id="adminPassword" placeholder="Digite a senha de acesso">
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="realizarLogin()">
                            üöÄ ACESSAR SISTEMA
                        </button>
                    </div>
                    
                    <div id="senhasDicas" style="margin-top: 2rem; font-size: 0.9rem; color: var(--cyber-blue); display: none;">
                        <!-- Informa√ß√µes de senha ser√£o carregadas aqui -->
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Dashboard Administrativo (ap√≥s login) -->
        <section id="admin" class="section">
            <div class="card">
                <h2 class="card-title">‚ö° PAINEL ADMINISTRATIVO - <span id="adminTitulo"></span></h2>
                
                <div id="adminInfo" style="margin-bottom: 2rem;">
                    <!-- Informa√ß√µes do admin logado -->
                </div>
                
                <div class="acoes-rapidas">
                    <div class="acao-rapida" onclick="mostrarAprovarCandidaturas()">
                        <i>‚úÖ</i>
                        <h4>Aprovar Candidaturas</h4>
                        <p>Analise e aprove candidaturas pendentes</p>
                    </div>
                    
                    <div class="acao-rapida" onclick="mostrarRecusarCandidaturas()">
                        <i>‚ùå</i>
                        <h4>Recusar Candidaturas</h4>
                        <p>Recuse com justificativa obrigat√≥ria</p>
                    </div>
                    
                    <div class="acao-rapida" onclick="mostrarRecusados()">
                        <i>üìã</i>
                        <h4>Ver Recusados</h4>
                        <p>Consulte candidaturas recusadas</p>
                    </div>
                    
                    <div class="acao-rapida" onclick="mostrarSecao('logs')">
                        <i>üìä</i>
                        <h4>Logs do Sistema</h4>
                        <p>Registro de todas as a√ß√µes</p>
                    </div>
                </div>
                
                <div id="adminContent">
                    <!-- Conte√∫do administrativo ser√° carregado aqui -->
                </div>
                
                <div style="margin-top: 2rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button class="btn btn-outline" onclick="logout()">
                        üëã SAIR DO SISTEMA
                    </button>
                    <button class="btn btn-outline" onclick="mostrarSecao('dashboard')">
                        üìä VOLTAR AO DASHBOARD
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Configura√ß√µes (apenas TSE) -->
        <section id="config" class="section">
            <div class="card">
                <h2 class="card-title">‚öôÔ∏è CONFIGURA√á√ïES DO SISTEMA</h2>
                <p style="color: var(--cyber-blue); margin-bottom: 2rem;">
                    Apenas TSE Nacional pode alterar estas configura√ß√µes
                </p>
                
                <div class="form-group">
                    <label class="form-label">MODO DA ELEI√á√ÉO *</label>
                    <select class="form-select" id="configModoEleicao">
                        <option value="Municipal">üèôÔ∏è Municipal (Prefeito e Vereadores)</option>
                        <option value="Estadual">üèõÔ∏è Estadual (Governador, Deputados Estaduais e Senadores)</option>
                        <option value="Federal">üáßüá∑ Federal (Presidente, Deputados Federais e Senadores)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">PRAZO PARA CANDIDATURAS (dias)</label>
                    <input type="number" class="form-input" id="configPrazoCandidaturas" value="30" min="1" max="365">
                </div>
                
                <div class="form-group">
                    <label class="form-label">STATUS DO SISTEMA</label>
                    <select class="form-select" id="configStatusSistema">
                        <option value="ativo">‚úÖ Ativo</option>
                        <option value="manutencao">üîß Em Manuten√ß√£o</option>
                        <option value="fechado">üîí Fechado</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <button class="btn btn-primary" onclick="salvarConfiguracoes()">
                        üíæ SALVAR CONFIGURA√á√ïES
                    </button>
                </div>
                
                <div id="configMessage" style="margin-top: 1rem;"></div>
                
                <div class="sistema-info" style="margin-top: 2rem;">
                    <h3 style="color: var(--cyber-blue); margin-bottom: 1rem;">‚ö†Ô∏è A√á√ïES CR√çTICAS</h3>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-danger" onclick="limparDadosSistema()">
                            üóëÔ∏è LIMPAR DADOS DO SISTEMA
                        </button>
                        <button class="btn btn-danger" onclick="exportarBackup()">
                            üíæ EXPORTAR BACKUP
                        </button>
                        <button class="btn btn-danger" onclick="importarBackup()">
                            üì§ IMPORTAR BACKUP
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Logs do Sistema -->
        <section id="logs" class="section">
            <div class="card">
                <h2 class="card-title">üìã LOGS DO SISTEMA</h2>
                
                <div class="filters" style="margin-bottom: 2rem;">
                    <h3 style="color: var(--cyber-blue); margin-bottom: 1rem;">üîç FILTROS AVAN√áADOS</h3>
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label class="filter-label">TIPO DE A√á√ÉO</label>
                            <select class="filter-select" id="filterLogTipo">
                                <option value="">Todos os Tipos</option>
                                <option value="candidatura">Nova Candidatura</option>
                                <option value="aprovar">Aprova√ß√£o</option>
                                <option value="recusar">Recusa</option>
                                <option value="login">Login</option>
                                <option value="logout">Logout</option>
                                <option value="config">Configura√ß√£o</option>
                                <option value="sistema">Sistema</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">USU√ÅRIO</label>
                            <input type="text" class="filter-input" id="filterLogUsuario" placeholder="Filtrar por usu√°rio">
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">DATA INICIAL</label>
                            <input type="date" class="filter-input" id="filterLogDataInicio">
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">DATA FINAL</label>
                            <input type="date" class="filter-input" id="filterLogDataFim">
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="filtrarLogs()">
                            üîç FILTRAR LOGS
                        </button>
                        <button class="btn btn-outline" onclick="resetarFiltrosLogs()">
                            üóëÔ∏è LIMPAR FILTROS
                        </button>
                        <button class="btn btn-outline" onclick="exportarLogs()">
                            üì§ EXPORTAR LOGS
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>DATA/HORA</th>
                                <th>USU√ÅRIO</th>
                                <th>A√á√ÉO</th>
                                <th>DETALHES</th>
                                <th>IP/ORIGEM</th>
                            </tr>
                        </thead>
                        <tbody id="logsTable">
                            <!-- Logs carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 1rem; display: flex; justify-content: space-between; align-items: center;">
                    <span style="color: var(--cyber-blue);">Total de logs: <span id="totalLogs">0</span></span>
                    <button class="btn btn-outline" onclick="limparLogs()">
                        üóëÔ∏è LIMPAR LOGS ANTIGOS
                    </button>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Modal para Aprovar/Recusar Candidaturas -->
    <div id="adminModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="fecharModal()">√ó</button>
            <h2 class="card-title" id="modalTitulo"></h2>
            <div id="modalContent">
                <!-- Conte√∫do do modal ser√° carregado aqui -->
            </div>
        </div>
    </div>
    
    <script>
        // ============================================
        // DADOS DO SISTEMA
        // ============================================

        // Estados e Cidades com TREs
        const estados = [
            { 
                nome: "Brookhaven", 
                tre: "Tutu Prot√°sio",
                senha: "tutuBH",
                cidades: [
                    { nome: "Cidade Eleitoral", tre: "Tutu Prot√°sio", senha: "tutuCDE5" },
                    { nome: "Liberty City", tre: "Ronaldo Caiado", senha: "caiadoLC5" }
                ]
            },
            { 
                nome: "Novacore", 
                tre: "William Harris",
                senha: "williamNC",
                cidades: [
                    { nome: "Nexaville", tre: "William Harris", senha: "williamNV5" },
                    { nome: "Sol√°ria", tre: "Ryan Mendon√ßa", senha: "ryanSA5" }
                ]
            },
            { 
                nome: "Caster√≠ber", 
                tre: "Henrique Camilote",
                senha: "henriqueCB",
                cidades: [
                    { nome: "Castelo Verde", tre: "Henrique Camilote", senha: "henriqueCV5" },
                    { nome: "Monte Prata", tre: "Jacinto Leite", senha: "jacintoMP5" }
                ]
            },
            { 
                nome: "Fortemega", 
                tre: "Lucas Santos",
                senha: "lucasFM",
                cidades: [
                    { nome: "Marinha City", tre: "Lucas Santos", senha: "lucasMC5" },
                    { nome: "Porto Rubi", tre: "Davi Zavarisi", senha: "daviPR5" }
                ]
            },
            { 
                nome: "Flor√™mix", 
                tre: "Rhyan Kalleby",
                senha: "rhyanFX",
                cidades: [
                    { nome: "Flor√°polis", tre: "Rhyan Kalleby", senha: "rhyanFS5" },
                    { nome: "Riomarina", tre: "Pedro Camargo", senha: "pedroRA5" }
                ]
            }
        ];

        // Partidos Pol√≠ticos
        const partidos = [
            // DIREITA
            { nome: "Partido Liberal", sigla: "PL", numero: 22, ideologia: "Direita", cor: "#1e90ff" },
            { nome: "Progressistas", sigla: "PP", numero: 11, ideologia: "Direita", cor: "#4169e1" },
            { nome: "Republicanos", sigla: "Republicanos", numero: 10, ideologia: "Direita", cor: "#0000cd" },
            { nome: "Uni√£o da Direita Brookasileira", sigla: "UDB", numero: 38, ideologia: "Direita", cor: "#191970" },
            { nome: "Partido da Ordem e Liberdade", sigla: "POL", numero: 81, ideologia: "Direita", cor: "#000080" },
            { nome: "Alian√ßa Crist√£ Nacional", sigla: "ACN", numero: 84, ideologia: "Direita", cor: "#4b0082" },
            { nome: "Partido da Reedifica√ß√£o da Ordem Nacional", sigla: "PRONA", numero: 57, ideologia: "Direita", cor: "#8a2be2" },
            { nome: "Partido Social Liberal", sigla: "PSL", numero: 17, ideologia: "Direita", cor: "#4682b4" },
            { nome: "Partido da Esperan√ßa", sigla: "PESP", numero: 48, ideologia: "Direita", cor: "#5f9ea0" },
            { nome: "Partido Militar Nacionalista", sigla: "PMNL", numero: 86, ideologia: "Direita", cor: "#2f4f4f" },
            { nome: "Partido Republicano Trabalhista Nacional", sigla: "PRTN", numero: 75, ideologia: "Direita", cor: "#008b8b" },
            
            // CENTRO
            { nome: "Movimento Democr√°tico Brookasileiro", sigla: "MDB", numero: 15, ideologia: "Centro", cor: "#32cd32" },
            { nome: "Uni√£o Brasil", sigla: "UNI√ÉO", numero: 44, ideologia: "Centro", cor: "#90ee90" },
            { nome: "Partido Social Democr√°tico", sigla: "PSD", numero: 55, ideologia: "Centro", cor: "#00fa9a" },
            { nome: "Partido da Social Democracia Brookasileira", sigla: "PSDB", numero: 45, ideologia: "Centro", cor: "#3cb371" },
            { nome: "Partido da Uni√£o Nacional", sigla: "PUN", numero: 42, ideologia: "Centro", cor: "#2e8b57" },
            { nome: "Movimento Popular Democr√°tico", sigla: "MPD", numero: 37, ideologia: "Centro", cor: "#228b22" },
            { nome: "Partido da Mudan√ßa", sigla: "PDM", numero: 26, ideologia: "Centro", cor: "#008000" },
            { nome: "Movimento Trabalhista Brookasileiro", sigla: "MTB", numero: 63, ideologia: "Centro", cor: "#006400" },
            { nome: "Partido Trabalhista Democr√°tico", sigla: "PTD", numero: 46, ideologia: "Centro", cor: "#9acd32" },
            { nome: "Partido do Sindicato Democrata", sigla: "PDSD", numero: 88, ideologia: "Centro", cor: "#6b8e23" },
            { nome: "Partido Miss√£o", sigla: "MSS", numero: 14, ideologia: "Centro", cor: "#556b2f" },
            { nome: "Partido Constru√ß√£o", sigla: "PC", numero: 85, ideologia: "Centro", cor: "#adff2f" },
            
            // ESQUERDA
            { nome: "Partido dos Trabalhadores", sigla: "PT", numero: 13, ideologia: "Esquerda", cor: "#dc143c" },
            { nome: "Partido Socialismo e Liberdade", sigla: "PSOL", numero: 50, ideologia: "Esquerda", cor: "#ff0000" },
            { nome: "Partido Comunista do Brookasil", sigla: "PCdoB", numero: 65, ideologia: "Esquerda", cor: "#b22222" },
            { nome: "Partido Democr√°tico Trabalhista", sigla: "PDT", numero: 12, ideologia: "Esquerda", cor: "#cd5c5c" },
            { nome: "Partido da Frente Socialista", sigla: "PFS", numero: 60, ideologia: "Esquerda", cor: "#8b0000" },
            { nome: "Partido Socialista", sigla: "PS", numero: 56, ideologia: "Esquerda", cor: "#ff4500" },
            { nome: "Partido Social Trabalhista Nacional", sigla: "PSTN", numero: 31, ideologia: "Esquerda", cor: "#ff6347" }
        ];

        // Cargos dispon√≠veis
        const cargos = [
            "Prefeito", "Vereador", "Governador", "Presidente", 
            "Senador", "Deputado Federal", "Deputado Estadual"
        ];

        // ============================================
        // ESTADO DA APLICA√á√ÉO
        // ============================================

        let usuarioLogado = null;
        let candidatos = [];
        let logs = [];
        let configuracoes = {
            modoEleicao: "Municipal",
            prazoCandidaturas: 30,
            statusSistema: "ativo",
            dataInicio: new Date().toISOString()
        };
        let charts = {};

        // ============================================
        // INICIALIZA√á√ÉO
        // ============================================

        document.addEventListener('DOMContentLoaded', function() {
            inicializarDados();
            inicializarEventos();
            carregarDadosLocalStorage();
            
            // Luz que segue o mouse
            document.addEventListener('mousemove', function(e) {
                const light = document.getElementById('mouseLight');
                light.style.left = e.clientX + 'px';
                light.style.top = e.clientY + 'px';
            });
            
            // Verificar se h√° usu√°rio logado
            const savedUser = localStorage.getItem('tse_usuario');
            if (savedUser) {
                usuarioLogado = JSON.parse(savedUser);
                entrarModoAdmin();
            }
        });

        function inicializarDados() {
            // Popular selects de estados
            const selectEstado = document.getElementById('filterEstado');
            const selectCandidatoEstado = document.getElementById('candidatoEstado');
            
            estados.forEach(estado => {
                // Para filtros
                const option1 = document.createElement('option');
                option1.value = estado.nome;
                option1.textContent = estado.nome;
                selectEstado.appendChild(option1);
                
                // Para candidatura
                const option2 = document.createElement('option');
                option2.value = estado.nome;
                option2.textContent = estado.nome;
                selectCandidatoEstado.appendChild(option2);
            });
            
            // Popular selects de partidos
            const selectPartido = document.getElementById('filterPartido');
            const selectCandidatoPartido = document.getElementById('candidatoPartido');
            
            partidos.forEach(partido => {
                const option1 = document.createElement('option');
                option1.value = partido.sigla;
                option1.textContent = `${partido.sigla} - ${partido.nome}`;
                selectPartido.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = partido.sigla;
                option2.textContent = `${partido.sigla} - ${partido.nome}`;
                selectCandidatoPartido.appendChild(option2);
            });
            
            // Carregar lista de TREs
            carregarListaTREs();
            
            // Carregar lista de partidos
            carregarListaPartidos();
        }

        function inicializarEventos() {
            // Formata√ß√£o de CPF
            document.getElementById('candidatoCPF').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 11) value = value.substring(0, 11);
                
                if (value.length > 9) {
                    value = value.replace(/^(\d{3})(\d{3})(\d{3})(\d{2}).*/, '$1.$2.$3-$4');
                } else if (value.length > 6) {
                    value = value.replace(/^(\d{3})(\d{3})(\d{0,3}).*/, '$1.$2.$3');
                } else if (value.length > 3) {
                    value = value.replace(/^(\d{3})(\d{0,3}).*/, '$1.$2');
                }
                e.target.value = value;
            });
            
            // Formata√ß√£o de telefone
            document.getElementById('candidatoTelefone').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 11) value = value.substring(0, 11);
                
                if (value.length > 10) {
                    value = value.replace(/^(\d{2})(\d{5})(\d{4}).*/, '($1) $2-$3');
                } else if (value.length > 6) {
                    value = value.replace(/^(\d{2})(\d{5})(\d{0,4}).*/, '($1) $2-$3');
                } else if (value.length > 2) {
                    value = value.replace(/^(\d{2})(\d{0,5}).*/, '($1) $2');
                } else if (value.length > 0) {
                    value = value.replace(/^(\d{0,2}).*/, '($1');
                }
                e.target.value = value;
            });
        }

        function carregarDadosLocalStorage() {
            // Carregar candidatos
            const candidatosSalvos = localStorage.getItem('tse_candidatos');
            if (candidatosSalvos) {
                candidatos = JSON.parse(candidatosSalvos);
            }
            
            // Carregar logs
            const logsSalvos = localStorage.getItem('tse_logs');
            if (logsSalvos) {
                logs = JSON.parse(logsSalvos);
            }
            
            // Carregar configura√ß√µes
            const configSalvas = localStorage.getItem('tse_configuracoes');
            if (configSalvas) {
                configuracoes = JSON.parse(configSalvas);
                document.getElementById('modoEleicao').textContent = configuracoes.modoEleicao.toUpperCase();
                document.getElementById('configModoEleicao').value = configuracoes.modoEleicao;
                document.getElementById('configPrazoCandidaturas').value = configuracoes.prazoCandidaturas;
                document.getElementById('configStatusSistema').value = configuracoes.statusSistema;
            }
            
            // Atualizar interface
            atualizarDashboard();
        }

        // ============================================
        // NAVEGA√á√ÉO
        // ============================================

        function mostrarSecao(sectionId) {
            // Verificar se precisa de login
            if ((sectionId === 'admin' || sectionId === 'config') && !usuarioLogado) {
                mostrarSecao('login');
                alert('‚ö†Ô∏è Voc√™ precisa estar logado para acessar esta se√ß√£o!');
                return;
            }
            
            if (sectionId === 'config' && usuarioLogado && usuarioLogado.tipo !== 'TSE') {
                mostrarSecao('admin');
                alert('‚ö†Ô∏è Apenas o TSE Nacional pode acessar as configura√ß√µes!');
                return;
            }
            
            // Esconder todas as se√ß√µes
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Atualizar tabs ativas
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostrar se√ß√£o selecionada
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.add('active');
                
                // Atualizar tab ativa correspondente
                const tabMap = {
                    'dashboard': 'DASHBOARD',
                    'candidatos': 'CANDIDATOS',
                    'candidatura': 'CANDIDATAR-SE',
                    'partidos': 'PARTIDOS',
                    'login': 'LOGIN',
                    'admin': 'LOGIN' // Admin usa a mesma tab de login
                };
                
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    if (tab.textContent.includes(tabMap[sectionId])) {
                        tab.classList.add('active');
                    }
                });
                
                // Carregar dados espec√≠ficos da se√ß√£o
                switch(sectionId) {
                    case 'dashboard':
                        atualizarDashboard();
                        break;
                    case 'candidatos':
                        carregarCandidatosPublicos();
                        break;
                    case 'partidos':
                        carregarListaPartidos();
                        break;
                    case 'tres':
                        carregarListaTREs();
                        break;
                    case 'admin':
                        if (usuarioLogado) {
                            mostrarDashboardAdmin();
                        }
                        break;
                    case 'logs':
                        carregarLogs();
                        break;
                }
            }
        }

        // ============================================
        // DASHBOARD
        // ============================================

        function atualizarDashboard() {
            const total = candidatos.length;
            const homologados = candidatos.filter(c => c.status === 'Homologado').length;
            const emAnalise = candidatos.filter(c => c.status === 'Em an√°lise').length;
            const recusados = candidatos.filter(c => c.status === 'Recusado').length;
            
            document.getElementById('totalCandidatos').textContent = total;
            document.getElementById('homologados').textContent = homologados;
            document.getElementById('emAnalise').textContent = emAnalise;
            document.getElementById('recusados').textContent = recusados;
            
            atualizarGraficos();
        }

        function atualizarGraficos() {
            // Gr√°fico de ideologias
            const ideologiaData = {
                'Direita': candidatos.filter(c => {
                    const partido = partidos.find(p => p.sigla === c.partido);
                    return partido && partido.ideologia === 'Direita';
                }).length,
                'Centro': candidatos.filter(c => {
                    const partido = partidos.find(p => p.sigla === c.partido);
                    return partido && partido.ideologia === 'Centro';
                }).length,
                'Esquerda': candidatos.filter(c => {
                    const partido = partidos.find(p => p.sigla === c.partido);
                    return partido && partido.ideologia === 'Esquerda';
                }).length
            };
            
            const ideologiaCtx = document.getElementById('ideologiaChart').getContext('2d');
            if (charts.ideologia) {
                charts.ideologia.destroy();
            }
            
            charts.ideologia = new Chart(ideologiaCtx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(ideologiaData),
                    datasets: [{
                        data: Object.values(ideologiaData),
                        backgroundColor: ['#4169e1', '#32cd32', '#dc143c'],
                        borderColor: ['#fff', '#fff', '#fff'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffd700',
                                font: {
                                    family: 'Orbitron'
                                }
                            }
                        }
                    }
                }
            });
            
            // Gr√°fico de cargos
            const cargoData = {};
            candidatos.forEach(c => {
                cargoData[c.cargo] = (cargoData[c.cargo] || 0) + 1;
            });
            
            const cargoCtx = document.getElementById('cargoChart').getContext('2d');
            if (charts.cargo) {
                charts.cargo.destroy();
            }
            
            charts.cargo = new Chart(cargoCtx, {
                type: 'bar',
                data: {
                    labels: Object.keys(cargoData),
                    datasets: [{
                        label: 'Candidatos',
                        data: Object.values(cargoData),
                        backgroundColor: '#ffd700',
                        borderColor: '#fff',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffd700',
                                font: {
                                    family: 'Orbitron'
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#ffd700'
                            },
                            grid: {
                                color: 'rgba(255, 215, 0, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#ffd700'
                            },
                            grid: {
                                color: 'rgba(255, 215, 0, 0.1)'
                            }
                        }
                    }
                }
            });
            
            // Gr√°fico de estados
            const estadoData = {};
            candidatos.forEach(c => {
                estadoData[c.estado] = (estadoData[c.estado] || 0) + 1;
            });
            
            const estadoCtx = document.getElementById('estadoChart').getContext('2d');
            if (charts.estado) {
                charts.estado.destroy();
            }
            
            charts.estado = new Chart(estadoCtx, {
                type: 'polarArea',
                data: {
                    labels: Object.keys(estadoData),
                    datasets: [{
                        data: Object.values(estadoData),
                        backgroundColor: [
                            '#ffd700',
                            '#00f3ff',
                            '#ff00ff',
                            '#23d160',
                            '#ff3860'
                        ],
                        borderColor: '#fff',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffd700',
                                font: {
                                    family: 'Orbitron'
                                }
                            }
                        }
                    }
                }
            });
        }

        // ============================================
        // CANDIDATOS
        // ============================================

        function carregarCandidatosPublicos() {
            const tbody = document.getElementById('candidatosTable');
            tbody.innerHTML = '';
            
            if (candidatos.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 2rem; color: var(--cyber-blue);">
                            üì≠ Nenhum candidato registrado no momento.
                        </td>
                    </tr>
                `;
                return;
            }
            
            // Filtrar por status (p√∫blico s√≥ v√™ homologados)
            let candidatosExibidos = candidatos;
            if (!usuarioLogado) {
                candidatosExibidos = candidatos.filter(c => c.status === 'Homologado');
            }
            
            if (candidatosExibidos.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 2rem; color: var(--cyber-blue);">
                            üëÅÔ∏è Candidatos em an√°lise ainda n√£o est√£o dispon√≠veis para visualiza√ß√£o p√∫blica.
                        </td>
                    </tr>
                `;
                return;
            }
            
            candidatosExibidos.forEach(candidato => {
                const partido = partidos.find(p => p.sigla === candidato.partido);
                const ideologia = partido ? partido.ideologia : 'N/A';
                const ideologiaClass = ideologia === 'Direita' ? 'ideologia-direita' : 
                                     ideologia === 'Centro' ? 'ideologia-centro' : 
                                     'ideologia-esquerda';
                
                const statusClass = candidato.status === 'Homologado' ? 'status-homologado' :
                                  candidato.status === 'Em an√°lise' ? 'status-analise' : 'status-recusado';
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><strong>${candidato.nome}</strong></td>
                    <td>${candidato.cargo}</td>
                    <td>${candidato.partido}</td>
                    <td>${candidato.cidade} / ${candidato.estado}</td>
                    <td class="${ideologiaClass}">${ideologia}</td>
                    <td><span class="status-badge ${statusClass}">${candidato.status.toUpperCase()}</span></td>
                    <td>
                        <button class="btn btn-outline" style="padding: 0.3rem 0.8rem; font-size: 0.8rem;" onclick="verDetalhesCandidato(${candidato.id})">
                            üëÅÔ∏è Ver
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function filtrarCandidatos() {
            const estado = document.getElementById('filterEstado').value;
            const cidade = document.getElementById('filterCidade').value;
            const cargo = document.getElementById('filterCargo').value;
            const partido = document.getElementById('filterPartido').value;
            const ideologia = document.getElementById('filterIdeologia').value;
            const status = document.getElementById('filterStatus').value;
            
            const tbody = document.getElementById('candidatosTable');
            tbody.innerHTML = '';
            
            let candidatosFiltrados = [...candidatos];
            
            // Aplicar filtros
            if (estado) {
                candidatosFiltrados = candidatosFiltrados.filter(c => c.estado === estado);
            }
            
            if (cidade) {
                candidatosFiltrados = candidatosFiltrados.filter(c => c.cidade === cidade);
            }
            
            if (cargo) {
                candidatosFiltrados = candidatosFiltrados.filter(c => c.cargo === cargo);
            }
            
            if (partido) {
                candidatosFiltrados = candidatosFiltrados.filter(c => c.partido === partido);
            }
            
            if (ideologia) {
                candidatosFiltrados = candidatosFiltrados.filter(c => {
                    const p = partidos.find(part => part.sigla === c.partido);
                    return p && p.ideologia === ideologia;
                });
            }
            
            if (status !== 'Todos') {
                candidatosFiltrados = candidatosFiltrados.filter(c => c.status === status);
            }
            
            // Se n√£o h√° usu√°rio logado, mostrar apenas homologados
            if (!usuarioLogado) {
                candidatosFiltrados = candidatosFiltrados.filter(c => c.status === 'Homologado');
            }
            
            if (candidatosFiltrados.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 2rem; color: var(--cyber-blue);">
                            üîç Nenhum candidato encontrado com os filtros aplicados.
                        </td>
                    </tr>
                `;
                return;
            }
            
            candidatosFiltrados.forEach(candidato => {
                const partido = partidos.find(p => p.sigla === candidato.partido);
                const ideologia = partido ? partido.ideologia : 'N/A';
                const ideologiaClass = ideologia === 'Direita' ? 'ideologia-direita' : 
                                     ideologia === 'Centro' ? 'ideologia-centro' : 
                                     'ideologia-esquerda';
                
                const statusClass = candidato.status === 'Homologado' ? 'status-homologado' :
                                  candidato.status === 'Em an√°lise' ? 'status-analise' : 'status-recusado';
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><strong>${candidato.nome}</strong></td>
                    <td>${candidato.cargo}</td>
                    <td>${candidato.partido}</td>
                    <td>${candidato.cidade} / ${candidato.estado}</td>
                    <td class="${ideologiaClass}">${ideologia}</td>
                    <td><span class="status-badge ${statusClass}">${candidato.status.toUpperCase()}</span></td>
                    <td>
                        <button class="btn btn-outline" style="padding: 0.3rem 0.8rem; font-size: 0.8rem;" onclick="verDetalhesCandidato(${candidato.id})">
                            üëÅÔ∏è Ver
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function resetarFiltros() {
            document.getElementById('filterEstado').value = '';
            document.getElementById('filterCidade').value = '';
            document.getElementById('filterCargo').value = '';
            document.getElementById('filterPartido').value = '';
            document.getElementById('filterIdeologia').value = '';
            document.getElementById('filterStatus').value = 'Homologado';
            carregarCandidatosPublicos();
        }

        function verDetalhesCandidato(id) {
            const candidato = candidatos.find(c => c.id === id);
            if (!candidato) return;
            
            const partido = partidos.find(p => p.sigla === candidato.partido);
            
            const modalTitulo = document.getElementById('modalTitulo');
            const modalContent = document.getElementById('modalContent');
            const modal = document.getElementById('adminModal');
            
            modalTitulo.textContent = `üë§ DETALHES DO CANDIDATO`;
            
            let html = `
                <div class="candidato-detalhes">
                    <h3 style="color: var(--gold); margin-bottom: 1rem;">${candidato.nome}</h3>
                    <p><strong>üìß E-mail:</strong> ${candidato.email || 'N√£o informado'}</p>
                    <p><strong>üìû Telefone:</strong> ${candidato.telefone || 'N√£o informado'}</p>
                    <p><strong>üìç Localidade:</strong> ${candidato.cidade} / ${candidato.estado}</p>
                    <p><strong>üéØ Cargo:</strong> ${candidato.cargo}</p>
                    <p><strong>üèõÔ∏è Partido:</strong> ${candidato.partido} - ${partido ? partido.nome : 'N/A'}</p>
                    <p><strong>üìä Ideologia:</strong> ${partido ? partido.ideologia : 'N/A'}</p>
                    <p><strong>üìÖ Data de Cadastro:</strong> ${new Date(candidato.dataCadastro).toLocaleDateString('pt-BR')}</p>
                    <p><strong>üìã Status:</strong> <span class="status-badge ${candidato.status === 'Homologado' ? 'status-homologado' : candidato.status === 'Em an√°lise' ? 'status-analise' : 'status-recusado'}">${candidato.status.toUpperCase()}</span></p>
                    
                    ${candidato.aprovadoPor ? `<p><strong>‚úÖ Aprovado por:</strong> ${candidato.aprovadoPor}</p>` : ''}
                    ${candidato.motivoRecusa ? `<p><strong>‚ùå Motivo da Recusa:</strong> ${candidato.motivoRecusa}</p>` : ''}
                    ${candidato.recusadoPor ? `<p><strong>üë§ Recusado por:</strong> ${candidato.recusadoPor}</p>` : ''}
                </div>
                
                <div class="candidato-detalhes" style="margin-top: 1rem;">
                    <h4 style="color: var(--cyber-blue); margin-bottom: 0.5rem;">üìù MANIFESTO / PROPOSTAS</h4>
                    <p>${candidato.manifesto || 'N√£o informado'}</p>
                </div>
                
                ${candidato.experiencia ? `
                <div class="candidato-detalhes" style="margin-top: 1rem;">
                    <h4 style="color: var(--cyber-blue); margin-bottom: 0.5rem;">üíº EXPERI√äNCIA POL√çTICA</h4>
                    <p>${candidato.experiencia}</p>
                </div>
                ` : ''}
                
                <div style="margin-top: 1.5rem; display: flex; gap: 1rem;">
                    <button class="btn btn-outline" onclick="fecharModal()">
                        üîô Voltar
                    </button>
                </div>
            `;
            
            modalContent.innerHTML = html;
            modal.classList.add('active');
        }

        // ============================================
        // CANDIDATURA
        // ============================================

        function carregarCidadesCandidatura() {
            const estadoSelecionado = document.getElementById('candidatoEstado').value;
            const selectCidade = document.getElementById('candidatoCidade');
            selectCidade.innerHTML = '<option value="">Selecione uma cidade</option>';
            
            if (estadoSelecionado) {
                const estado = estados.find(e => e.nome === estadoSelecionado);
                if (estado) {
                    estado.cidades.forEach(cidade => {
                        const option = document.createElement('option');
                        option.value = cidade.nome;
                        option.textContent = cidade.nome;
                        selectCidade.appendChild(option);
                    });
                }
            }
        }

        function atualizarInfoPartido() {
            const partidoSelecionado = document.getElementById('candidatoPartido').value;
            const infoPartido = document.getElementById('infoPartido');
            
            if (!partidoSelecionado) {
                infoPartido.style.display = 'none';
                return;
            }
            
            const partido = partidos.find(p => p.sigla === partidoSelecionado);
            if (partido) {
                const ideologiaTag = partido.ideologia === 'Direita' ? 'direita-tag' : 
                                   partido.ideologia === 'Centro' ? 'centro-tag' : 'esquerda-tag';
                
                infoPartido.innerHTML = `
                    <strong>${partido.nome}</strong>
                    <span class="ideologia-tag ${ideologiaTag}" style="margin-left: 1rem;">${partido.ideologia}</span>
                    <span style="margin-left: 1rem; color: var(--gold);">N√∫mero: ${partido.numero}</span>
                `;
                infoPartido.style.display = 'block';
            }
        }

        function validarCPF(cpf) {
            cpf = cpf.replace(/[^\d]+/g, '');
            if (cpf.length !== 11) return false;
            
            // Elimina CPFs inv√°lidos conhecidos
            if (cpf === "00000000000" || 
                cpf === "11111111111" || 
                cpf === "22222222222" || 
                cpf === "33333333333" || 
                cpf === "44444444444" || 
                cpf === "55555555555" || 
                cpf === "66666666666" || 
                cpf === "77777777777" || 
                cpf === "88888888888" || 
                cpf === "99999999999") return false;
                
            // Valida√ß√£o do CPF
            let soma = 0;
            let resto;
            
            for (let i = 1; i <= 9; i++) {
                soma += parseInt(cpf.substring(i-1, i)) * (11 - i);
            }
            
            resto = (soma * 10) % 11;
            if ((resto === 10) || (resto === 11)) resto = 0;
            if (resto !== parseInt(cpf.substring(9, 10))) return false;
            
            soma = 0;
            for (let i = 1; i <= 10; i++) {
                soma += parseInt(cpf.substring(i-1, i)) * (12 - i);
            }
            
            resto = (soma * 10) % 11;
            if ((resto === 10) || (resto === 11)) resto = 0;
            if (resto !== parseInt(cpf.substring(10, 11))) return false;
            
            return true;
        }

        function enviarCandidatura() {
            // Obter valores dos campos
            const nome = document.getElementById('candidatoNome').value.trim();
            const cpf = document.getElementById('candidatoCPF').value;
            const estado = document.getElementById('candidatoEstado').value;
            const cidade = document.getElementById('candidatoCidade').value;
            const cargo = document.getElementById('candidatoCargo').value;
            const partido = document.getElementById('candidatoPartido').value;
            const coliga√ß√£o = document.getElementById('candidatoColiga√ß√£o').value.trim();
            const experiencia = document.getElementById('candidatoExperiencia').value.trim();
            
            // Valida√ß√µes
            if (!nome) {
                mostrarMensagem('candidaturaMessage', '‚ùå Digite seu nome completo!', 'danger');
                return;
            }
            
            if (!cpf || !validarCPF(cpf)) {
                mostrarMensagem('candidaturaMessage', '‚ùå CPF inv√°lido! Digite um CPF v√°lido.', 'danger');
                return;
            }
            
            
            if (!estado) {
                mostrarMensagem('candidaturaMessage', '‚ùå Selecione um estado!', 'danger');
                return;
            }
            
            if (!cidade) {
                mostrarMensagem('candidaturaMessage', '‚ùå Selecione uma cidade!', 'danger');
                return;
            }
            
            if (!cargo) {
                mostrarMensagem('candidaturaMessage', '‚ùå Selecione um cargo!', 'danger');
                return;
            }
            
            if (!partido) {
                mostrarMensagem('candidaturaMessage', '‚ùå Selecione um partido!', 'danger');
                return;
            }
            
            if (!coliga√ß√£o || manifesto.length < 15) {
                mostrarMensagem('candidaturaMessage', '‚ùå O manifesto deve ter pelo menos 15 caracteres!', 'danger');
                return;
            }
            
            // Verificar se j√° existe candidatura com mesmo CPF
            const cpfLimpo = cpf.replace(/\D/g, '');
            const candidaturaExistente = candidatos.find(c => c.cpf === cpfLimpo);
            if (candidaturaExistente) {
                mostrarMensagem('candidaturaMessage', '‚ùå J√° existe uma candidatura registrada com este CPF!', 'danger');
                return;
            }
            
            // Criar nova candidatura
            const novaCandidatura = {
                id: Date.now(),
                nome,
                cpf: cpfLimpo,
                estado,
                cidade,
                cargo,
                partido,
                coliga√ß√£o,
                experiencia: experiencia || '',
                status: 'Em an√°lise',
                dataCadastro: new Date().toISOString()
            };
            
            // Adicionar √† lista
            candidatos.push(novaCandidatura);
            salvarCandidatos();
            
            // Registrar log
            registrarLog('candidatura', `Nova candidatura: ${nome} (${partido}) para ${cargo} em ${cidade}/${estado}`, 'P√∫blico');
            
            // Mostrar mensagem de sucesso
            mostrarMensagem('candidaturaMessage', '‚úÖ Candidatura enviada com sucesso! Aguarde an√°lise do TRE correspondente.', 'success');
            
            // Limpar formul√°rio
            limparFormulario();
            
            // Atualizar dashboard
            setTimeout(() => {
                atualizarDashboard();
                mostrarSecao('dashboard');
            }, 3000);
        }

        function limparFormulario() {
            document.getElementById('candidatoNome').value = '';
            document.getElementById('candidatoCPF').value = '';
            document.getElementById('candidatoEmail').value = '';
            document.getElementById('candidatoTelefone').value = '';
            document.getElementById('candidatoEstado').value = '';
            document.getElementById('candidatoCidade').innerHTML = '<option value="">Selecione uma cidade</option>';
            document.getElementById('candidatoCargo').value = '';
            document.getElementById('candidatoPartido').value = '';
            document.getElementById('candidatoManifesto').value = '';
            document.getElementById('candidatoExperiencia').value = '';
            document.getElementById('infoPartido').style.display = 'none';
        }

        // ============================================
        // PARTIDOS
        // ============================================

        function carregarListaPartidos() {
            const container = document.getElementById('listaPartidos');
            container.innerHTML = '';
            
            // Agrupar partidos por ideologia
            const partidosPorIdeologia = {
                'Direita': partidos.filter(p => p.ideologia === 'Direita'),
                'Centro': partidos.filter(p => p.ideologia === 'Centro'),
                'Esquerda': partidos.filter(p => p.ideologia === 'Esquerda')
            };
            
            // Exibir todos os partidos inicialmente
            for (const [ideologia, listaPartidos] of Object.entries(partidosPorIdeologia)) {
                const ideologiaClass = ideologia === 'Direita' ? 'direita-tag' : 
                                     ideologia === 'Centro' ? 'centro-tag' : 'esquerda-tag';
                
                let html = `
                    <div style="margin-bottom: 2rem;">
                        <h3 style="color: ${ideologia === 'Direita' ? '#4169e1' : ideologia === 'Centro' ? '#32cd32' : '#dc143c'}; margin-bottom: 1rem;">
                            ${ideologia} <span class="ideologia-tag ${ideologiaClass}">${listaPartidos.length} partidos</span>
                        </h3>
                `;
                
                listaPartidos.forEach(partido => {
                    html += `
                        <div class="partido-card">
                            <div style="display: flex; align-items: center;">
                                <div class="partido-numero">${partido.numero}</div>
                                <div style="flex: 1;">
                                    <h4 style="color: var(--gold); margin-bottom: 0.2rem;">${partido.nome}</h4>
                                    <p style="color: var(--gold-light); font-size: 0.9rem;">Sigla: ${partido.sigla}</p>
                                </div>
                                <span class="ideologia-tag ${ideologiaClass}">${partido.ideologia}</span>
                            </div>
                        </div>
                    `;
                });
                
                html += `</div>`;
                container.innerHTML += html;
            }
        }

        function filtrarPartidos(ideologia) {
            const container = document.getElementById('listaPartidos');
            container.innerHTML = '';
            
            let partidosFiltrados = [...partidos];
            
            if (ideologia !== 'todos') {
                partidosFiltrados = partidosFiltrados.filter(p => p.ideologia === ideologia);
            }
            
            if (partidosFiltrados.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--cyber-blue);">
                        üîç Nenhum partido encontrado.
                    </div>
                `;
                return;
            }
            
            // Agrupar por ideologia
            const partidosPorIdeologia = {};
            partidosFiltrados.forEach(partido => {
                if (!partidosPorIdeologia[partido.ideologia]) {
                    partidosPorIdeologia[partido.ideologia] = [];
                }
                partidosPorIdeologia[partido.ideologia].push(partido);
            });
            
            for (const [ideologia, listaPartidos] of Object.entries(partidosPorIdeologia)) {
                const ideologiaClass = ideologia === 'Direita' ? 'direita-tag' : 
                                     ideologia === 'Centro' ? 'centro-tag' : 'esquerda-tag';
                
                let html = `
                    <div style="margin-bottom: 2rem;">
                        <h3 style="color: ${ideologia === 'Direita' ? '#4169e1' : ideologia === 'Centro' ? '#32cd32' : '#dc143c'}; margin-bottom: 1rem;">
                            ${ideologia} <span class="ideologia-tag ${ideologiaClass}">${listaPartidos.length} partidos</span>
                        </h3>
                `;
                
                listaPartidos.forEach(partido => {
                    html += `
                        <div class="partido-card">
                            <div style="display: flex; align-items: center;">
                                <div class="partido-numero">${partido.numero}</div>
                                <div style="flex: 1;">
                                    <h4 style="color: var(--gold); margin-bottom: 0.2rem;">${partido.nome}</h4>
                                    <p style="color: var(--gold-light); font-size: 0.9rem;">Sigla: ${partido.sigla}</p>
                                </div>
                                <span class="ideologia-tag ${ideologiaClass}">${partido.ideologia}</span>
                            </div>
                        </div>
                    `;
                });
                
                html += `</div>`;
                container.innerHTML += html;
            }
        }

        // ============================================
        // TREs
        // ============================================

        function carregarListaTREs() {
            const container = document.getElementById('listaTREs');
            container.innerHTML = '';
            
            // TSE Nacional
            container.innerHTML += `
                <div class="tre-info">
                    <h4 style="color: var(--gold);">üáßüá∑ TSE NACIONAL - BROOKASIL</h4>
                    <p><strong>Presidente:</strong> Tutu Prot√°sio</p>
                    <p><strong>Fun√ß√£o:</strong> Controle total do sistema eleitoral nacional</p>
                    <p><strong>Poderes:</strong> √önico que pode alterar o modo da elei√ß√£o</p>
                </div>
            `;
            
            // TREs Estaduais e Municipais
            estados.forEach(estado => {
                // TRE Estadual
                container.innerHTML += `
                    <div class="tre-info">
                        <h4 style="color: var(--cyber-blue);">üèõÔ∏è TRE ${estado.nome.toUpperCase()} (ESTADO)</h4>
                        <p><strong>Presidente:</strong> ${estado.tre}</p>
                        <p><strong>Senha de acesso:</strong> ${estado.senha}</p>
                        <p><strong>Jurisdi√ß√£o:</strong> Todo o estado de ${estado.nome}</p>
                        <p><strong>Poderes:</strong> Aprova/recusa candidaturas estaduais e municipais do estado</p>
                    </div>
                `;
                
                // TREs Municipais
                estado.cidades.forEach(cidade => {
                    container.innerHTML += `
                        <div class="tre-info" style="margin-left: 1rem; border-left: 3px solid var(--gold);">
                            <h4 style="color: var(--gold-light);">üèôÔ∏è TRE ${cidade.nome.toUpperCase()} (CIDADE)</h4>
                            <p><strong>Presidente:</strong> ${cidade.tre}</p>
                            <p><strong>Senha de acesso:</strong> ${cidade.senha}</p>
                            <p><strong>Jurisdi√ß√£o:</strong> Apenas o munic√≠pio de ${cidade.nome}</p>
                            <p><strong>Poderes:</strong> Aprova/recusa candidaturas municipais da cidade</p>
                        </div>
                    `;
                });
            });
        }

        // ============================================
        // LOGIN ADMINISTRATIVO
        // ============================================

        function atualizarSenhasDicas() {
            const tipoAcesso = document.getElementById('adminType').value;
            const senhasDicas = document.getElementById('senhasDicas');
            
            if (!tipoAcesso) {
                senhasDicas.style.display = 'none';
                return;
            }
            
            let info = '';
            
            switch(tipoAcesso) {
                case 'TSE':
                    info = `
                        <p><strong>TSE Nacional - Brookasil</strong></p>
                        <p><strong>Presidente:</strong> Tutu Prot√°sio</p>
                        <p><strong>Senha:</strong> Brookasil1234</p>
                        <p><strong>Poderes:</strong> Controle total do sistema</p>
                    `;
                    break;
                    
                case 'TRE_Brookhaven':
                    const estadoBH = estados.find(e => e.nome === 'Brookhaven');
                    info = `
                        <p><strong>TRE Brookhaven (Estado)</strong></p>
                        <p><strong>Presidente:</strong> ${estadoBH.tre}</p>
                        <p><strong>Senha:</strong> ${estadoBH.senha}</p>
                        <p><strong>Jurisdi√ß√£o:</strong> Todo o estado</p>
                    `;
                    break;
                    
                case 'TRE_Cidade_Eleitoral':
                    const cidadeCE = estados.find(e => e.nome === 'Brookhaven').cidades.find(c => c.nome === 'Cidade Eleitoral');
                    info = `
                        <p><strong>TRE Cidade Eleitoral (Cidade)</strong></p>
                        <p><strong>Presidente:</strong> ${cidadeCE.tre}</p>
                        <p><strong>Senha:</strong> ${cidadeCE.senha}</p>
                        <p><strong>Jurisdi√ß√£o:</strong> Apenas o munic√≠pio</p>
                    `;
                    break;
                    
                // Adicionar outros casos conforme necess√°rio
                default:
                    // Para outros TREs, buscar dinamicamente
                    const [tipo, nome] = tipoAcesso.split('_');
                    if (tipo === 'TRE') {
                        // Buscar no array de estados
                        let encontrado = false;
                        for (const estado of estados) {
                            // Verificar se √© o estado
                            if (estado.nome.replace(' ', '_') === nome) {
                                info = `
                                    <p><strong>TRE ${estado.nome} (Estado)</strong></p>
                                    <p><strong>Presidente:</strong> ${estado.tre}</p>
                                    <p><strong>Senha:</strong> ${estado.senha}</p>
                                    <p><strong>Jurisdi√ß√£o:</strong> Todo o estado</p>
                                `;
                                encontrado = true;
                                break;
                            }
                            
                            // Verificar nas cidades
                            for (const cidade of estado.cidades) {
                                if (cidade.nome.replace(' ', '_') === nome) {
                                    info = `
                                        <p><strong>TRE ${cidade.nome} (Cidade)</strong></p>
                                        <p><strong>Presidente:</strong> ${cidade.tre}</p>
                                        <p><strong>Senha:</strong> ${cidade.senha}</p>
                                        <p><strong>Jurisdi√ß√£o:</strong> Apenas o munic√≠pio</p>
                                    `;
                                    encontrado = true;
                                    break;
                                }
                            }
                            if (encontrado) break;
                        }
                    }
                    break;
            }
            
            senhasDicas.innerHTML = info;
            senhasDicas.style.display = 'block';
        }

        function realizarLogin() {
            const tipoAcesso = document.getElementById('adminType').value;
            const senha = document.getElementById('adminPassword').value;
            
            if (!tipoAcesso) {
                alert('‚ùå Selecione o tipo de acesso!');
                return;
            }
            
            if (!senha) {
                alert('‚ùå Digite a senha de acesso!');
                return;
            }
            
            let usuario = null;
            let senhaCorreta = '';
            let nomeUsuario = '';
            let jurisdicao = '';
            
            // Verificar senha de acordo com o tipo de acesso
            switch(tipoAcesso) {
                case 'TSE':
                    senhaCorreta = 'Brookasil1234';
                    nomeUsuario = 'Tutu Prot√°sio';
                    jurisdicao = 'Nacional';
                    if (senha === senhaCorreta) {
                        usuario = {
                            tipo: 'TSE',
                            nome: nomeUsuario,
                            jurisdicao: jurisdicao,
                            acessoCompleto: true
                        };
                    }
                    break;
                    
                default:
                    // Para TREs, buscar senha do array
                    const [tipo, nome] = tipoAcesso.split('_');
                    if (tipo === 'TRE') {
                        let encontrado = false;
                        for (const estado of estados) {
                            // Verificar se √© o estado
                            if (estado.nome.replace(' ', '_') === nome) {
                                senhaCorreta = estado.senha;
                                nomeUsuario = estado.tre;
                                jurisdicao = `Estado de ${estado.nome}`;
                                encontrado = true;
                                break;
                            }
                            
                            // Verificar nas cidades
                            for (const cidade of estado.cidades) {
                                if (cidade.nome.replace(' ', '_') === nome) {
                                    senhaCorreta = cidade.senha;
                                    nomeUsuario = cidade.tre;
                                    jurisdicao = `Munic√≠pio de ${cidade.nome}`;
                                    encontrado = true;
                                    break;
                                }
                            }
                            if (encontrado) break;
                        }
                        
                        if (senha === senhaCorreta) {
                            usuario = {
                                tipo: 'TRE',
                                nome: nomeUsuario,
                                jurisdicao: jurisdicao,
                                acessoCompleto: false
                            };
                        }
                    }
                    break;
            }
            
            if (usuario) {
                usuarioLogado = usuario;
                localStorage.setItem('tse_usuario', JSON.stringify(usuario));
                
                // Registrar log
                registrarLog('login', `Login realizado: ${usuario.nome} (${usuario.jurisdicao})`, usuario.nome);
                
                // Entrar no modo admin
                entrarModoAdmin();
                
                // Mostrar painel admin
                mostrarSecao('admin');
                
                alert(`‚úÖ Login realizado com sucesso!\nBem-vindo, ${usuario.nome}!`);
            } else {
                alert('‚ùå Senha incorreta! Verifique as credenciais.');
            }
        }

        function entrarModoAdmin() {
            document.getElementById('loginTab').textContent = 'PAINEL ADMIN';
            document.getElementById('adminIndicator').style.display = 'block';
            document.getElementById('sidebarAdmin').style.display = 'flex';
        }

        function logout() {
            if (usuarioLogado) {
                // Registrar log
                registrarLog('logout', `Logout realizado: ${usuarioLogado.nome}`, usuarioLogado.nome);
            }
            
            usuarioLogado = null;
            localStorage.removeItem('tse_usuario');
            
            // Atualizar interface
            document.getElementById('loginTab').textContent = 'LOGIN';
            document.getElementById('adminIndicator').style.display = 'none';
            document.getElementById('sidebarAdmin').style.display = 'none';
            
            // Voltar para dashboard
            mostrarSecao('dashboard');
            
            alert('‚úÖ Logout realizado com sucesso!');
        }

        // ============================================
        // ADMINISTRA√á√ÉO
        // ============================================

        function mostrarDashboardAdmin() {
            const adminTitulo = document.getElementById('adminTitulo');
            const adminInfo = document.getElementById('adminInfo');
            const adminContent = document.getElementById('adminContent');
            
            adminTitulo.textContent = usuarioLogado.nome.toUpperCase();
            
            adminInfo.innerHTML = `
                <div class="sistema-info">
                    <h3 style="color: var(--cyber-blue); margin-bottom: 0.5rem;">üë§ INFORMA√á√ïES DO USU√ÅRIO</h3>
                    <p><strong>Tipo:</strong> ${usuarioLogado.tipo}</p>
                    <p><strong>Jurisdi√ß√£o:</strong> ${usuarioLogado.jurisdicao}</p>
                    <p><strong>Modo da Elei√ß√£o:</strong> ${configuracoes.modoEleicao}</p>
                </div>
            `;
            
            // Estat√≠sticas espec√≠ficas para o usu√°rio
            let candidaturasPendentes = [];
            if (usuarioLogado.tipo === 'TSE') {
                // TSE v√™ tudo
                candidaturasPendentes = candidatos.filter(c => c.status === 'Em an√°lise');
            } else if (usuarioLogado.tipo === 'TRE') {
                // TRE v√™ apenas sua jurisdi√ß√£o
                const jurisdicao = usuarioLogado.jurisdicao.toLowerCase();
                candidaturasPendentes = candidatos.filter(c => {
                    if (c.status !== 'Em an√°lise') return false;
                    if (jurisdicao.includes('estado')) {
                        const estadoNome = jurisdicao.replace('estado de ', '').trim();
                        return c.estado === estadoNome;
                    } else if (jurisdicao.includes('munic√≠pio')) {
                        const cidadeNome = jurisdicao.replace('munic√≠pio de ', '').trim();
                        return c.cidade === cidadeNome;
                    }
                    return false;
                });
            }
            
            const homologadosUsuario = candidatos.filter(c => c.aprovadoPor === usuarioLogado.nome).length;
            const recusadosUsuario = candidatos.filter(c => c.recusadoPor === usuarioLogado.nome).length;
            
            adminContent.innerHTML = `
                <div class="stats-grid" style="margin-top: 2rem;">
                    <div class="stat-card">
                        <div class="stat-label">Candidaturas Pendentes</div>
                        <div class="stat-number">${candidaturasPendentes.length}</div>
                        <div class="stat-desc">Aguardando sua an√°lise</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Homologados por voc√™</div>
                        <div class="stat-number">${homologadosUsuario}</div>
                        <div class="stat-desc">Aprova√ß√µes realizadas</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Recusados por voc√™</div>
                        <div class="stat-number">${recusadosUsuario}</div>
                        <div class="stat-desc">Recusas realizadas</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Total no Sistema</div>
                        <div class="stat-number">${candidatos.length}</div>
                        <div class="stat-desc">Candidaturas registradas</div>
                    </div>
                </div>
                
                ${candidaturasPendentes.length > 0 ? `
                <div class="card-title" style="margin-top: 2rem;">üìù CANDIDATURAS PENDENTES</div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>NOME</th>
                                <th>CARGO</th>
                                <th>LOCALIDADE</th>
                                <th>PARTIDO</th>
                                <th>A√á√ïES</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${candidaturasPendentes.slice(0, 5).map(candidato => `
                                <tr>
                                    <td>${candidato.nome}</td>
                                    <td>${candidato.cargo}</td>
                                    <td>${candidato.cidade}/${candidato.estado}</td>
                                    <td>${candidato.partido}</td>
                                    <td>
                                        <button class="btn btn-success" style="padding: 0.3rem 0.8rem; font-size: 0.8rem;" onclick="aprovarCandidatura(${candidato.id})">
                                            ‚úÖ Aprovar
                                        </button>
                                        <button class="btn btn-danger" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; margin-left: 0.5rem;" onclick="mostrarFormRecusar(${candidato.id})">
                                            ‚ùå Recusar
                                        </button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
                ${candidaturasPendentes.length > 5 ? `
                    <p style="text-align: center; color: var(--cyber-blue); margin-top: 1rem;">
                        ... e mais ${candidaturasPendentes.length - 5} candidaturas pendentes.
                    </p>
                ` : ''}
                ` : ''}
            `;
        }

        function mostrarAprovarCandidaturas() {
            // Determinar jurisdi√ß√£o do usu√°rio
            let candidaturasPendentes = [];
            if (usuarioLogado.tipo === 'TSE') {
                candidaturasPendentes = candidatos.filter(c => c.status === 'Em an√°lise');
            } else if (usuarioLogado.tipo === 'TRE') {
                const jurisdicao = usuarioLogado.jurisdicao.toLowerCase();
                candidaturasPendentes = candidatos.filter(c => {
                    if (c.status !== 'Em an√°lise') return false;
                    if (jurisdicao.includes('estado')) {
                        const estadoNome = jurisdicao.replace('estado de ', '').trim();
                        return c.estado === estadoNome;
                    } else if (jurisdicao.includes('munic√≠pio')) {
                        const cidadeNome = jurisdicao.replace('munic√≠pio de ', '').trim();
                        return c.cidade === cidadeNome;
                    }
                    return false;
                });
            }
            
            const modalTitulo = document.getElementById('modalTitulo');
            const modalContent = document.getElementById('modalContent');
            const modal = document.getElementById('adminModal');
            
            modalTitulo.textContent = '‚úÖ APROVAR CANDIDATURAS PENDENTES';
            
            if (candidaturasPendentes.length === 0) {
                modalContent.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <p style="color: var(--cyber-blue); font-size: 1.2rem;">üéâ Nenhuma candidatura pendente!</p>
                        <p>Todas as candidaturas em sua jurisdi√ß√£o j√° foram analisadas.</p>
                        <button class="btn btn-outline" onclick="fecharModal()" style="margin-top: 1rem;">FECHAR</button>
                    </div>
                `;
            } else {
                let html = `
                    <p style="margin-bottom: 1rem; color: var(--gold-light);">
                        Total de candidaturas pendentes: <strong>${candidaturasPendentes.length}</strong>
                    </p>
                    <div style="max-height: 400px; overflow-y: auto;">
                `;
                
                candidaturasPendentes.forEach(candidato => {
                    const partidoInfo = partidos.find(p => p.sigla === candidato.partido);
                    html += `
                        <div class="cyber-border" style="padding: 1rem; margin-bottom: 1rem;">
                            <h3 style="color: var(--gold); margin-bottom: 0.5rem;">${candidato.nome}</h3>
                            <p><strong>üìß E-mail:</strong> ${candidato.email}</p>
                            <p><strong>üìû Telefone:</strong> ${candidato.telefone}</p>
                            <p><strong>üéØ Cargo:</strong> ${candidato.cargo}</p>
                            <p><strong>üìç Local:</strong> ${candidato.cidade} / ${candidato.estado}</p>
                            <p><strong>üèõÔ∏è Partido:</strong> ${candidato.partido} (${partidoInfo ? partidoInfo.ideologia : 'N/A'})</p>
                            <p><strong>üìù Manifesto:</strong> ${candidato.manifesto.substring(0, 100)}...</p>
                            
                            <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                                <button class="btn btn-success" onclick="aprovarCandidatura(${candidato.id})">
                                    ‚úÖ APROVAR
                                </button>
                                <button class="btn btn-danger" onclick="mostrarFormRecusar(${candidato.id})">
                                    ‚ùå RECUSAR
                                </button>
                                <button class="btn btn-outline" onclick="verDetalhesCandidato(${candidato.id})">
                                    üëÅÔ∏è DETALHES
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                modalContent.innerHTML = html;
            }
            
            modal.classList.add('active');
        }

        function mostrarRecusarCandidaturas() {
            // Mesma l√≥gica de jurisdi√ß√£o
            let candidaturasPendentes = [];
            if (usuarioLogado.tipo === 'TSE') {
                candidaturasPendentes = candidatos.filter(c => c.status === 'Em an√°lise');
            } else if (usuarioLogado.tipo === 'TRE') {
                const jurisdicao = usuarioLogado.jurisdicao.toLowerCase();
                candidaturasPendentes = candidatos.filter(c => {
                    if (c.status !== 'Em an√°lise') return false;
                    if (jurisdicao.includes('estado')) {
                        const estadoNome = jurisdicao.replace('estado de ', '').trim();
                        return c.estado === estadoNome;
                    } else if (jurisdicao.includes('munic√≠pio')) {
                        const cidadeNome = jurisdicao.replace('munic√≠pio de ', '').trim();
                        return c.cidade === cidadeNome;
                    }
                    return false;
                });
            }
            
            const modalTitulo = document.getElementById('modalTitulo');
            const modalContent = document.getElementById('modalContent');
            const modal = document.getElementById('adminModal');
            
            modalTitulo.textContent = '‚ùå RECUSAR CANDIDATURAS';
            
            if (candidaturasPendentes.length === 0) {
                modalContent.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <p style="color: var(--cyber-blue); font-size: 1.2rem;">üéâ Nenhuma candidatura pendente!</p>
                        <p>Todas as candidaturas em sua jurisdi√ß√£o j√° foram analisadas.</p>
                        <button class="btn btn-outline" onclick="fecharModal()" style="margin-top: 1rem;">FECHAR</button>
                    </div>
                `;
            } else {
                let html = `
                    <p style="margin-bottom: 1rem; color: var(--warning);">
                        ‚ö†Ô∏è ATEN√á√ÉO: Toda recusa deve ter um motivo justificado e registrado.
                    </p>
                    <div style="max-height: 400px; overflow-y: auto;">
                `;
                
                candidaturasPendentes.forEach(candidato => {
                    html += `
                        <div class="cyber-border" style="padding: 1rem; margin-bottom: 1rem;">
                            <h3 style="color: var(--gold); margin-bottom: 0.5rem;">${candidato.nome}</h3>
                            <p><strong>Cargo:</strong> ${candidato.cargo} | <strong>Local:</strong> ${candidato.cidade}/${candidato.estado}</p>
                            <p><strong>Partido:</strong> ${candidato.partido}</p>
                            
                            <div class="form-group" style="margin-top: 0.5rem;">
                                <label class="form-label">Motivo da Recusa *</label>
                                <textarea class="form-textarea" id="motivo-${candidato.id}" placeholder="Digite o motivo detalhado da recusa..." rows="2" required></textarea>
                            </div>
                            
                            <button class="btn btn-danger" onclick="recusarCandidatura(${candidato.id})">
                                ‚ùå CONFIRMAR RECUSA
                            </button>
                        </div>
                    `;
                });
                
                html += '</div>';
                modalContent.innerHTML = html;
            }
            
            modal.classList.add('active');
        }

        function mostrarRecusados() {
            let candidaturasRecusadas = [];
            if (usuarioLogado.tipo === 'TSE') {
                candidaturasRecusadas = candidatos.filter(c => c.status === 'Recusado');
            } else if (usuarioLogado.tipo === 'TRE') {
                const jurisdicao = usuarioLogado.jurisdicao.toLowerCase();
                candidaturasRecusadas = candidatos.filter(c => {
                    if (c.status !== 'Recusado') return false;
                    if (jurisdicao.includes('estado')) {
                        const estadoNome = jurisdicao.replace('estado de ', '').trim();
                        return c.estado === estadoNome;
                    } else if (jurisdicao.includes('munic√≠pio')) {
                        const cidadeNome = jurisdicao.replace('munic√≠pio de ', '').trim();
                        return c.cidade === cidadeNome;
                    }
                    return false;
                });
            }
            
            const modalTitulo = document.getElementById('modalTitulo');
            const modalContent = document.getElementById('modalContent');
            const modal = document.getElementById('adminModal');
            
            modalTitulo.textContent = 'üìã CANDIDATURAS RECUSADAS';
            
            if (candidaturasRecusadas.length === 0) {
                modalContent.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <p style="color: var(--cyber-blue); font-size: 1.2rem;">‚úÖ Nenhuma candidatura recusada!</p>
                        <button class="btn btn-outline" onclick="fecharModal()" style="margin-top: 1rem;">FECHAR</button>
                    </div>
                `;
            } else {
                let html = `
                    <p style="margin-bottom: 1rem; color: var(--gold-light);">
                        Total de candidaturas recusadas: <strong>${candidaturasRecusadas.length}</strong>
                    </p>
                    <div style="max-height: 400px; overflow-y: auto;">
                `;
                
                candidaturasRecusadas.forEach(candidato => {
                    html += `
                        <div class="cyber-border" style="padding: 1rem; margin-bottom: 1rem;">
                            <h3 style="color: var(--danger); margin-bottom: 0.5rem;">${candidato.nome}</h3>
                            <p><strong>Cargo:</strong> ${candidato.cargo}</p>
                            <p><strong>Local:</strong> ${candidato.cidade} / ${candidato.estado}</p>
                            <p><strong>Partido:</strong> ${candidato.partido}</p>
                            <p><strong>Recusado por:</strong> ${candidato.recusadoPor || 'N/A'}</p>
                            <p><strong>Motivo:</strong> ${candidato.motivoRecusa || 'N/A'}</p>
                            <p><strong>Data:</strong> ${new Date(candidato.dataCadastro).toLocaleDateString('pt-BR')}</p>
                        </div>
                    `;
                });
                
                html += '</div>';
                modalContent.innerHTML = html;
            }
            
            modal.classList.add('active');
        }

        function aprovarCandidatura(candidatoId) {
            const candidatoIndex = candidatos.findIndex(c => c.id === candidatoId);
            if (candidatoIndex === -1) return;
            
            // Atualizar candidatura
            candidatos[candidatoIndex].status = 'Homologado';
            candidatos[candidatoIndex].aprovadoPor = usuarioLogado.nome;
            candidatos[candidatoIndex].dataAprovacao = new Date().toISOString();
            
            // Salvar
            salvarCandidatos();
            
            // Registrar log
            registrarLog('aprovar', `Candidatura aprovada: ${candidatos[candidatoIndex].nome} (${candidatos[candidatoIndex].partido}) para ${candidatos[candidatoIndex].cargo}`, usuarioLogado.nome);
            
            alert('‚úÖ Candidatura aprovada com sucesso!');
            fecharModal();
            mostrarDashboardAdmin();
            atualizarDashboard();
        }

        function mostrarFormRecusar(candidatoId) {
            const candidato = candidatos.find(c => c.id === candidatoId);
            if (!candidato) return;
            
            const modalContent = document.getElementById('modalContent');
            
            modalContent.innerHTML = `
                <div class="form-group">
                    <label class="form-label">CANDIDATO</label>
                    <input type="text" class="form-input" value="${candidato.nome}" readonly>
                </div>
                
                <div class="form-group">
                    <label class="form-label">CARGO</label>
                    <input type="text" class="form-input" value="${candidato.cargo}" readonly>
                </div>
                
                <div class="form-group">
                    <label class="form-label">PARTIDO</label>
                    <input type="text" class="form-input" value="${candidato.partido}" readonly>
                </div>
                
                <div class="form-group">
                    <label class="form-label">MOTIVO DA RECUSA *</label>
                    <textarea class="form-textarea" id="motivoRecusa" placeholder="Digite o motivo detalhado da recusa..." rows="4" required></textarea>
                </div>
                
                <div class="form-group">
                    <button class="btn btn-danger" onclick="recusarCandidaturaComMotivo(${candidatoId})">
                        ‚ùå CONFIRMAR RECUSA
                    </button>
                    <button class="btn btn-outline" onclick="mostrarAprovarCandidaturas()">
                        üîô VOLTAR
                    </button>
                </div>
            `;
        }

        function recusarCandidatura(candidatoId) {
            const motivoInput = document.getElementById(`motivo-${candidatoId}`);
            if (!motivoInput || !motivoInput.value.trim()) {
                alert('‚ùå Digite o motivo da recusa!');
                return;
            }
            
            const motivo = motivoInput.value;
            recusarCandidaturaComMotivo(candidatoId, motivo);
        }

        function recusarCandidaturaComMotivo(candidatoId, motivo) {
            if (!motivo) {
                motivo = document.getElementById('motivoRecusa').value;
                if (!motivo.trim()) {
                    alert('‚ùå Digite o motivo da recusa!');
                    return;
                }
            }
            
            const candidatoIndex = candidatos.findIndex(c => c.id === candidatoId);
            if (candidatoIndex === -1) return;
            
            // Atualizar candidatura
            candidatos[candidatoIndex].status = 'Recusado';
            candidatos[candidatoIndex].motivoRecusa = motivo;
            candidatos[candidatoIndex].recusadoPor = usuarioLogado.nome;
            candidatos[candidatoIndex].dataRecusa = new Date().toISOString();
            
            // Salvar
            salvarCandidatos();
            
            // Registrar log
            registrarLog('recusar', `Candidatura recusada: ${candidatos[candidatoIndex].nome} (${candidatos[candidatoIndex].partido}) - Motivo: ${motivo}`, usuarioLogado.nome);
            
            alert('‚úÖ Candidatura recusada com sucesso!');
            fecharModal();
            mostrarDashboardAdmin();
            atualizarDashboard();
        }

        // ============================================
        // CONFIGURA√á√ïES
        // ============================================

        function salvarConfiguracoes() {
            if (usuarioLogado?.tipo !== 'TSE') {
                mostrarMensagem('configMessage', '‚ùå Apenas o TSE Nacional pode alterar as configura√ß√µes!', 'danger');
                return;
            }
            
            const novoModo = document.getElementById('configModoEleicao').value;
            const prazoCandidaturas = parseInt(document.getElementById('configPrazoCandidaturas').value);
            const statusSistema = document.getElementById('configStatusSistema').value;
            
            // Atualizar configura√ß√µes
            configuracoes.modoEleicao = novoModo;
            configuracoes.prazoCandidaturas = prazoCandidaturas;
            configuracoes.statusSistema = statusSistema;
            
            // Salvar
            localStorage.setItem('tse_configuracoes', JSON.stringify(configuracoes));
            
            // Atualizar interface
            document.getElementById('modoEleicao').textContent = novoModo.toUpperCase();
            
            // Registrar log
            registrarLog('config', `Configura√ß√µes atualizadas: Modo=${novoModo}, Prazo=${prazoCandidaturas}d, Status=${statusSistema}`, usuarioLogado.nome);
            
            mostrarMensagem('configMessage', '‚úÖ Configura√ß√µes salvas com sucesso!', 'success');
        }

        function limparDadosSistema() {
            if (!confirm('‚ö†Ô∏è ATEN√á√ÉO: Esta a√ß√£o ir√° apagar TODOS os dados do sistema (candidatos, logs, etc).\n\nTem certeza que deseja continuar?')) {
                return;
            }
            
            if (usuarioLogado?.tipo !== 'TSE') {
                alert('‚ùå Apenas o TSE Nacional pode executar esta a√ß√£o!');
                return;
            }
            
            // Limpar dados
            candidatos = [];
            logs = [];
            localStorage.removeItem('tse_candidatos');
            localStorage.removeItem('tse_logs');
            
            // Registrar log
            registrarLog('sistema', 'Todos os dados do sistema foram apagados', usuarioLogado.nome);
            
            // Atualizar interface
            atualizarDashboard();
            carregarCandidatosPublicos();
            
            alert('‚úÖ Dados do sistema apagados com sucesso!');
        }

        function exportarBackup() {
            const backup = {
                candidatos: candidatos,
                logs: logs,
                configuracoes: configuracoes,
                dataBackup: new Date().toISOString(),
                versao: '1.0'
            };
            
            const dataStr = JSON.stringify(backup, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `backup_tse_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            registrarLog('sistema', 'Backup do sistema exportado', usuarioLogado?.nome || 'Sistema');
        }

        function importarBackup() {
            if (usuarioLogado?.tipo !== 'TSE') {
                alert('‚ùå Apenas o TSE Nacional pode importar backups!');
                return;
            }
            
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = function(event) {
                    try {
                        const backup = JSON.parse(event.target.result);
                        
                        // Validar backup
                        if (!backup.candidatos || !backup.logs || !backup.configuracoes) {
                            throw new Error('Arquivo de backup inv√°lido');
                        }
                        
                        if (!confirm(`‚ö†Ô∏è Esta a√ß√£o ir√° substituir todos os dados atuais.\n\nBackup de: ${new Date(backup.dataBackup).toLocaleDateString('pt-BR')}\n\nDeseja continuar?`)) {
                            return;
                        }
                        
                        // Restaurar dados
                        candidatos = backup.candidatos;
                        logs = backup.logs;
                        configuracoes = backup.configuracoes;
                        
                        // Salvar no localStorage
                        localStorage.setItem('tse_candidatos', JSON.stringify(candidatos));
                        localStorage.setItem('tse_logs', JSON.stringify(logs));
                        localStorage.setItem('tse_configuracoes', JSON.stringify(configuracoes));
                        
                        // Atualizar interface
                        document.getElementById('modoEleicao').textContent = configuracoes.modoEleicao.toUpperCase();
                        document.getElementById('configModoEleicao').value = configuracoes.modoEleicao;
                        document.getElementById('configPrazoCandidaturas').value = configuracoes.prazoCandidaturas;
                        document.getElementById('configStatusSistema').value = configuracoes.statusSistema;
                        
                        atualizarDashboard();
                        carregarCandidatosPublicos();
                        
                        // Registrar log
                        registrarLog('sistema', `Backup importado: ${file.name}`, usuarioLogado.nome);
                        
                        alert('‚úÖ Backup importado com sucesso!');
                    } catch (error) {
                        alert(`‚ùå Erro ao importar backup: ${error.message}`);
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }

        // ============================================
        // LOGS DO SISTEMA
        // ============================================

        function carregarLogs() {
            const tbody = document.getElementById('logsTable');
            const totalLogs = document.getElementById('totalLogs');
            
            tbody.innerHTML = '';
            totalLogs.textContent = logs.length;
            
            if (logs.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 2rem; color: var(--cyber-blue);">
                            üì≠ Nenhum log registrado no momento.
                        </td>
                    </tr>
                `;
                return;
            }
            
            // Ordenar logs por data (mais recente primeiro)
            const logsOrdenados = [...logs].sort((a, b) => 
                new Date(b.timestamp) - new Date(a.timestamp)
            );
            
            logsOrdenados.forEach(log => {
                const data = new Date(log.timestamp);
                const dataFormatada = data.toLocaleDateString('pt-BR') + ' ' + data.toLocaleTimeString('pt-BR');
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${dataFormatada}</td>
                    <td>${log.usuario || 'Sistema'}</td>
                    <td>${log.acao}</td>
                    <td>${log.detalhes || ''}</td>
                    <td>${log.ip || 'Local'}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function filtrarLogs() {
            const tipo = document.getElementById('filterLogTipo').value;
            const usuario = document.getElementById('filterLogUsuario').value.toLowerCase();
            const dataInicio = document.getElementById('filterLogDataInicio').value;
            const dataFim = document.getElementById('filterLogDataFim').value;
            
            const tbody = document.getElementById('logsTable');
            tbody.innerHTML = '';
            
            let logsFiltrados = [...logs];
            
            // Aplicar filtros
            if (tipo) {
                logsFiltrados = logsFiltrados.filter(log => 
                    log.acao.toLowerCase().includes(tipo.toLowerCase())
                );
            }
            
            if (usuario) {
                logsFiltrados = logsFiltrados.filter(log => 
                    (log.usuario || '').toLowerCase().includes(usuario)
                );
            }
            
            if (dataInicio) {
                const inicio = new Date(dataInicio);
                logsFiltrados = logsFiltrados.filter(log => 
                    new Date(log.timestamp) >= inicio
                );
            }
            
            if (dataFim) {
                const fim = new Date(dataFim);
                fim.setHours(23, 59, 59, 999);
                logsFiltrados = logsFiltrados.filter(log => 
                    new Date(log.timestamp) <= fim
                );
            }
            
            document.getElementById('totalLogs').textContent = logsFiltrados.length;
            
            if (logsFiltrados.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 2rem; color: var(--cyber-blue);">
                            üîç Nenhum log encontrado com os filtros aplicados.
                        </td>
                    </tr>
                `;
                return;
            }
            
            // Ordenar por data
            logsFiltrados.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            logsFiltrados.forEach(log => {
                const data = new Date(log.timestamp);
                const dataFormatada = data.toLocaleDateString('pt-BR') + ' ' + data.toLocaleTimeString('pt-BR');
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${dataFormatada}</td>
                    <td>${log.usuario || 'Sistema'}</td>
                    <td>${log.acao}</td>
                    <td>${log.detalhes || ''}</td>
                    <td>${log.ip || 'Local'}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function resetarFiltrosLogs() {
            document.getElementById('filterLogTipo').value = '';
            document.getElementById('filterLogUsuario').value = '';
            document.getElementById('filterLogDataInicio').value = '';
            document.getElementById('filterLogDataFim').value = '';
            carregarLogs();
        }

        function exportarLogs() {
            const logsStr = JSON.stringify(logs, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(logsStr);
            
            const exportFileDefaultName = `logs_tse_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            registrarLog('sistema', 'Logs do sistema exportados', usuarioLogado?.nome || 'Sistema');
        }

        function limparLogs() {
            if (!confirm('‚ö†Ô∏è Esta a√ß√£o ir√° apagar todos os logs antigos (anteriores a 30 dias).\n\nDeseja continuar?')) {
                return;
            }
            
            const trintaDiasAtras = new Date();
            trintaDiasAtras.setDate(trintaDiasAtras.getDate() - 30);
            
            const logsAntigos = logs.filter(log => new Date(log.timestamp) < trintaDiasAtras);
            
            if (logsAntigos.length === 0) {
                alert('‚ÑπÔ∏è N√£o h√° logs antigos para limpar.');
                return;
            }
            
            // Manter apenas logs dos √∫ltimos 30 dias
            logs = logs.filter(log => new Date(log.timestamp) >= trintaDiasAtras);
            salvarLogs();
            
            // Registrar log
            registrarLog('sistema', `${logsAntigos.length} logs antigos foram apagados`, usuarioLogado?.nome || 'Sistema');
            
            // Atualizar interface
            carregarLogs();
            
            alert(`‚úÖ ${logsAntigos.length} logs antigos foram apagados!`);
        }

        // ============================================
        // FUN√á√ïES AUXILIARES
        // ============================================

        function salvarCandidatos() {
            localStorage.setItem('tse_candidatos', JSON.stringify(candidatos));
        }

        function salvarLogs() {
            localStorage.setItem('tse_logs', JSON.stringify(logs));
        }

        function registrarLog(acao, detalhes, usuario = null) {
            const log = {
                id: Date.now(),
                timestamp: new Date().toISOString(),
                usuario: usuario || (usuarioLogado ? usuarioLogado.nome : 'P√∫blico'),
                acao: acao,
                detalhes: detalhes,
                ip: '127.0.0.1' // Simula√ß√£o de IP
            };
            
            logs.push(log);
            salvarLogs();
            
            // Atualizar logs se a se√ß√£o estiver ativa
            if (document.getElementById('logs')?.classList.contains('active')) {
                carregarLogs();
            }
        }

        function mostrarMensagem(elementId, mensagem, tipo) {
            const element = document.getElementById(elementId);
            const color = tipo === 'success' ? '#23d160' : 
                         tipo === 'warning' ? '#ffdd57' : '#ff3860';
            
            element.innerHTML = `
                <div style="background: rgba(${tipo === 'success' ? '35, 209, 96' : tipo === 'warning' ? '255, 221, 87' : '255, 56, 96'}, 0.2); 
                            border: 1px solid ${color}; 
                            padding: 1rem; 
                            border-radius: 8px;
                            color: ${color};">
                    ${mensagem}
                </div>
            `;
            
            if (tipo === 'success') {
                setTimeout(() => {
                    element.innerHTML = '';
                }, 5000);
            }
        }

        function fecharModal() {
            document.getElementById('adminModal').classList.remove('active');
        }

        // ============================================
        // FUN√á√ïES DAS ABAS FLUTUANTES
        // ============================================

        function gerarRelatorioRapido() {
            const total = candidatos.length;
            const homologados = candidatos.filter(c => c.status === 'Homologado').length;
            const emAnalise = candidatos.filter(c => c.status === 'Em an√°lise').length;
            const recusados = candidatos.filter(c => c.status === 'Recusado').length;
            
            alert(`üìä RELAT√ìRIO R√ÅPIDO DO SISTEMA\n\n` +
                  `Total de Candidatos: ${total}\n` +
                  `Homologados: ${homologados}\n` +
                  `Em An√°lise: ${emAnalise}\n` +
                  `Recusados: ${recusados}\n` +
                  `Modo da Elei√ß√£o: ${configuracoes.modoEleicao}\n` +
                  `Status do Sistema: ${configuracoes.statusSistema}\n\n` +
                  `üìÖ Data: ${new Date().toLocaleDateString('pt-BR')}\n` +
                  `üïí Hora: ${new Date().toLocaleTimeString('pt-BR')}`);
        }

        function mostrarAlertas() {
            const alertas = [];
            
            // Verificar candidaturas pendentes
            const pendentes = candidatos.filter(c => c.status === 'Em an√°lise').length;
            if (pendentes > 0) {
                alertas.push(`‚ö†Ô∏è ${pendentes} candidatura(s) pendente(s) de an√°lise`);
            }
            
            // Verificar status do sistema
            if (configuracoes.statusSistema === 'manutencao') {
                alertas.push('üîß Sistema em manuten√ß√£o');
            } else if (configuracoes.statusSistema === 'fechado') {
                alertas.push('üîí Sistema fechado para novas candidaturas');
            }
            
            // Verificar se h√° usu√°rio logado
            if (!usuarioLogado) {
                alertas.push('üë§ Modo de visualiza√ß√£o p√∫blica');
            } else {
                alertas.push(`üîê Logado como: ${usuarioLogado.nome} (${usuarioLogado.tipo})`);
            }
            
            // Verificar data de in√≠cio do sistema
            const dataInicio = new Date(configuracoes.dataInicio);
            const diasAtivo = Math.floor((new Date() - dataInicio) / (1000 * 60 * 60 * 24));
            alertas.push(`üìÖ Sistema ativo h√° ${diasAtivo} dia(s)`);
            
            if (alertas.length === 0) {
                alert('‚úÖ Sistema funcionando normalmente!\n\nNenhum alerta encontrado.');
            } else {
                alert('üîî ALERTAS DO SISTEMA:\n\n' + alertas.join('\n'));
            }
        }

        function mostrarModoEleicao() {
            let descricao = '';
            switch(configuracoes.modoEleicao) {
                case 'Municipal':
                    descricao = 'üèôÔ∏è Elei√ß√£o para Prefeito e Vereadores\n‚Ä¢ Vota√ß√£o em cada munic√≠pio\n‚Ä¢ TREs municipais t√™m jurisdi√ß√£o total';
                    break;
                case 'Estadual':
                    descricao = 'üèõÔ∏è Elei√ß√£o para Governador, Deputados Estaduais e Senadores\n‚Ä¢ Vota√ß√£o em todo o estado\n‚Ä¢ TREs estaduais t√™m jurisdi√ß√£o total';
                    break;
                case 'Federal':
                    descricao = 'üáßüá∑ Elei√ß√£o para Presidente, Deputados Federais e Senadores\n‚Ä¢ Vota√ß√£o em todo o pa√≠s\n‚Ä¢ TSE tem jurisdi√ß√£o total';
                    break;
            }
            
            alert(`üó≥Ô∏è MODO DA ELEI√á√ÉO ATUAL\n\n` +
                  `üî∏ ${configuracoes.modoEleicao.toUpperCase()}\n\n` +
                  `${descricao}\n\n` +
                  `Apenas TSE Nacional pode alterar este modo.`);
        }

        function alternarAcessoRapido() {
            if (usuarioLogado) {
                mostrarSecao('admin');
            } else {
                mostrarSecao('login');
            }
        }

        function exportarDados() {
            if (!usuarioLogado || usuarioLogado.tipo !== 'TSE') {
                alert('‚ùå Apenas o TSE Nacional pode exportar dados!');
                return;
            }
            
            const dados = {
                candidatos: candidatos,
                logs: logs,
                configuracoes: configuracoes,
                dataExportacao: new Date().toISOString()
            };
            
            const dadosStr = JSON.stringify(dados, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dadosStr);
            
            const exportFileDefaultName = `dados_tse_completo_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            registrarLog('sistema', 'Dados completos do sistema exportados', usuarioLogado.nome);
            
            alert('‚úÖ Dados exportados com sucesso!');
        }
    </script>
</body>
</html>
